(this["webpackJsonpcloudreve-frontend"]=this["webpackJsonpcloudreve-frontend"]||[]).push([[11],{8080:function(e,a,t){"use strict";t.r(a);var n=t(10),r=t(0),l=t.n(r),c=t(97),i=t(7148),o=t(357),m=t(9),s=t(6),u=t(8),d=t(7033),p=t(180),E=t(87),b=t(7019),v=t(7022),h=t(7021),f=t(55),g=t(243),O=t(74),N=t(66),y=t(64),C=t(28),S=t(44),j=t(7034),k=t(57),_=t(7101),x=t(7041),z=t(8035),w=t(8036),D=t(8037),R=t(8038),I=t(8039),F=t(8040),W=t(8041),P=t(8042),T=t(8043),A=t(8044),q=t(8045),L=t(8046),B=t(8047),M=t(7040),U=t(8048),K=t(7140),H=t(7595),G=t.n(H),V=t(7594),J=t.n(V),X=t(262),Y=t.n(X),$=t(4),Z=t(7),Q=t(18),ee=t(52),ae=t(19),te=t(368),ne=t(119),re=Object(u.a)({root:{maxWidth:"100%",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:0}},expanded:{}})(b.a),le=Object(u.a)({root:{minHeight:0,padding:0,"&$expanded":{minHeight:0}},content:{maxWidth:"100%",margin:0,display:"block","&$expanded":{margin:"0"}},expanded:{}})(h.a),ce=Object(u.a)((function(e){return{root:{display:"block",padding:e.spacing(0)}}}))(v.a),ie=Object(c.a)((function(e){return{root:{display:"flex",width:"100%"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(s.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),title:{flexGrow:1},toolbar:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},sub:{paddingLeft:36,color:e.palette.text.secondary},subMenu:{backgroundColor:e.palette.background.default,paddingTop:0,paddingBottom:0},active:{backgroundColor:Object(C.i)(e.palette.primary.main,.8),color:e.palette.primary.main,"&:hover":{backgroundColor:Object(C.i)(e.palette.primary.main,.7)}},activeText:{fontWeight:500},activeIcon:{color:e.palette.primary.main}}})),oe=[{title:"nav.summary",icon:l.a.createElement(_.a,null),path:"home"},{title:"nav.settings",icon:l.a.createElement(x.a,null),sub:[{title:"nav.basicSetting",path:"basic",icon:l.a.createElement(z.a,null)},{title:"nav.publicAccess",path:"access",icon:l.a.createElement(w.a,null)},{title:"nav.email",path:"mail",icon:l.a.createElement(D.a,null)},{title:"nav.transportation",path:"upload",icon:l.a.createElement(R.a,null)},{title:"nav.appearance",path:"theme",icon:l.a.createElement(I.a,null)},{title:"nav.image",path:"image",icon:l.a.createElement(F.a,null)},{title:"nav.captcha",path:"captcha",icon:l.a.createElement(W.a,null)}]},{title:"nav.storagePolicy",icon:l.a.createElement(P.a,null),path:"policy"},{title:"nav.nodes",icon:l.a.createElement(T.a,null),path:"node"},{title:"nav.groups",icon:l.a.createElement(A.a,null),path:"group"},{title:"nav.users",icon:l.a.createElement(q.a,null),path:"user"},{title:"nav.files",icon:l.a.createElement(L.a,null),path:"file"},{title:"nav.shares",icon:l.a.createElement(B.a,null),path:"share"},{title:"nav.tasks",icon:l.a.createElement(M.a,null),sub:[{title:"nav.remoteDownload",path:"download",icon:l.a.createElement(U.a,null)},{title:"nav.generalTasks",path:"task",icon:l.a.createElement(K.a,null)}]}];function me(e){var a,t,c=e.content,i=Object(ne.a)("dashboard").t,o=ie(),m=Object(S.a)(),u=Object(r.useState)(!ae.a.isMobile()),b=Object(n.a)(u,2),v=b[0],h=b[1],C=Object(r.useState)(null),_=Object(n.a)(C,2),x=_[0],z=_[1],w=Object(Q.g)(),D=Object(Q.h)(),R=Object(Z.d)(),I=Object(r.useCallback)((function(e){return R(Object(ee.b)(e))}),[R]);Object(r.useEffect)((function(){I(i("nav.title"))}),[]),Object(r.useEffect)((function(){return function(){I()}}),[]);var F=Object(Q.j)().path;return l.a.createElement("div",{className:o.root},l.a.createElement(d.a,{position:"fixed",className:Object($.a)(o.appBar,Object(s.a)({},o.appBarShift,v))},l.a.createElement(j.a,null,l.a.createElement(f.a,{color:"inherit","aria-label":"open drawer",onClick:function(){h(!0)},edge:"start",className:Object($.a)(o.menuButton,Object(s.a)({},o.hide,v))},l.a.createElement(Y.a,null)),l.a.createElement(k.a,{variant:"h6",className:o.title,noWrap:!0},i("nav.dashboard")),l.a.createElement(te.a,null))),l.a.createElement(E.a,{variant:"permanent",className:Object($.a)(o.drawer,(a={},Object(s.a)(a,o.drawerOpen,v),Object(s.a)(a,o.drawerClose,!v),a)),classes:{paper:Object($.a)((t={},Object(s.a)(t,o.drawerOpen,v),Object(s.a)(t,o.drawerClose,!v),t))}},l.a.createElement("div",{className:o.toolbar},l.a.createElement(f.a,{onClick:function(){h(!1)}},"rtl"===m.direction?l.a.createElement(J.a,null):l.a.createElement(G.a,null))),l.a.createElement(p.a,null),l.a.createElement(g.a,{className:o.noPadding},oe.map((function(e){return void 0!==e.path?l.a.createElement(O.a,{onClick:function(){return w.push("/admin/"+e.path)},button:!0,className:Object($.a)(Object(s.a)({},o.active,D.pathname.startsWith("/admin/"+e.path))),key:e.title},l.a.createElement(N.a,{className:Object($.a)(Object(s.a)({},o.activeIcon,D.pathname.startsWith("/admin/"+e.path)))},e.icon),l.a.createElement(y.a,{className:Object($.a)(Object(s.a)({},o.activeText,D.pathname.startsWith("/admin/"+e.path))),primary:i(e.title)})):l.a.createElement(re,{key:e.title,square:!0,expanded:x===e.title,onChange:function(a,t){z(t?e.title:null)}},l.a.createElement(le,{"aria-controls":"panel1d-content",id:"panel1d-header"},l.a.createElement(O.a,{button:!0,key:e.title},l.a.createElement(N.a,null,e.icon),l.a.createElement(y.a,{primary:i(e.title)}))),l.a.createElement(ce,null,l.a.createElement(g.a,{className:o.subMenu},e.sub.map((function(e){var a;return l.a.createElement(O.a,{onClick:function(){return w.push("/admin/"+e.path)},className:Object($.a)((a={},Object(s.a)(a,o.sub,v),Object(s.a)(a,o.active,D.pathname.startsWith("/admin/"+e.path)),a)),button:!0,key:e.title},l.a.createElement(N.a,{className:Object($.a)(Object(s.a)({},o.activeIcon,D.pathname.startsWith("/admin/"+e.path)))},e.icon),l.a.createElement(y.a,{primary:i(e.title)}))})))))})))),l.a.createElement("main",{className:o.content},l.a.createElement("div",{className:o.toolbar}),c(F)))}var se=t(20),ue=t(7094),de=t(479),pe=t.n(de),Ee=t(7771),be=t(245),ve=t(7030),he=t(7155),fe=t(240),ge=t(7136),Oe=t(144),Ne=t(239),ye=t(7023),Ce=t(7029),Se=t(7025),je=t(7114),ke=t(7024),_e=t(7096),xe=t(7137),ze=t(108),we=t(8055),De=t(8056),Re=t(8057),Ie=t(8058),Fe=t(7122),We=t(7142),Pe=t(8059),Te=t(8060),Ae=t(8061),qe=t(8062),Le=t(88),Be=t.n(Le),Me=t(8049),Ue=t(8054),Ke=t(7730),He=t(7731),Ge=t(8013),Ve=t(7583),Je=t(8009),Xe=t(7596),Ye=t(100),$e=t(2),Ze=t(12),Qe=t(275),ea=Object(c.a)((function(e){return{paper:{padding:e.spacing(3),height:"100%"},logo:{width:70},logoContainer:{padding:e.spacing(3),display:"flex"},title:{marginLeft:16},cloudreve:{fontSize:25,color:e.palette.text.secondary},version:{color:e.palette.text.hint},links:{padding:e.spacing(3)},iconRight:{minWidth:0},userIcon:{backgroundColor:fe.a[100],color:fe.a[600]},fileIcon:{backgroundColor:ge.a[100],color:ge.a[800]},publicIcon:{backgroundColor:Oe.a[100],color:Oe.a[800]},secretIcon:{backgroundColor:Ne.a[100],color:Ne.a[800]}}}));function aa(){var e=Object(ne.a)("dashboard").t,a=ea(),t=Object(r.useState)([]),c=Object(n.a)(t,2),i=c[0],o=c[1],m=Object(r.useState)([]),s=Object(n.a)(m,2),u=s[0],d=s[1],E=Object(r.useState)({}),b=Object(n.a)(E,2),v=b[0],h=b[1],f=l.a.useState(!1),C=Object(n.a)(f,2),S=C[0],j=C[1],x=l.a.useState(""),z=Object(n.a)(x,2),w=z[0],D=z[1],R=Object(r.useState)({fileTotal:0,userTotal:0,publicShareTotal:0,secretShareTotal:0}),I=Object(n.a)(R,2),F=I[0],W=I[1],P=Object(r.useState)({backend:"-"}),T=Object(n.a)(P,2),A=T[0],q=T[1],L=Object(Z.d)(),B=Object(r.useCallback)((function(e,a,t,n){return L(Object($e.R)(e,a,t,n))}),[L]);return Object(r.useEffect)((function(){Ze.b.get("/admin/summary").then((function(e){var a=[];e.data.date.forEach((function(t,n){a.push({name:t,file:e.data.files[n],user:e.data.users[n],share:e.data.shares[n]})})),o(a),W({fileTotal:e.data.fileTotal,userTotal:e.data.userTotal,publicShareTotal:e.data.publicShareTotal,secretShareTotal:e.data.secretShareTotal}),q(e.data.version),D(e.data.siteURL),""!==e.data.siteURL&&e.data.siteURL===window.location.origin||j(!0)})).catch((function(e){B("top","right",e.message,"error")})),Be.a.get("https://pan_api.114514cn.me/api/v3/admin/news?tag="+e("summary.newsTag")).then((function(e){d(e.data.data);var a={};e.data.included.forEach((function(e){"users"===e.type&&(a[e.id]=e.attributes)})),h(a)})).catch((function(a){B("top","right",e("summary.newsletterError"),"warning")}))}),[]),l.a.createElement(_e.a,{container:!0,spacing:3},l.a.createElement(ye.a,{open:S,onClose:function(){return j(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(ke.a,{id:"alert-dialog-title"},e("summary.confirmSiteURLTitle")),l.a.createElement(Se.a,null,l.a.createElement(je.a,{id:"alert-dialog-description"},l.a.createElement(k.a,null,""===w&&e("summary.siteURLNotSet",{current:window.location.origin}),""!==w&&e("summary.siteURLNotMatch",{current:window.location.origin})),l.a.createElement(k.a,null,e("summary.siteURLDescription")))),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:function(){return j(!1)},color:"default"},e("summary.ignore")),l.a.createElement(ve.a,{onClick:function(){return j(!1),void Ze.b.patch("/admin/setting",{options:[{key:"siteURL",value:window.location.origin}]}).then((function(){D(window.location.origin),B("top","right",e("settings.saved"),"success")})).catch((function(e){B("top","right",e.message,"error")}))},color:"primary"},e("summary.changeIt")))),l.a.createElement(_e.a,{alignContent:"stretch",item:!0,xs:12,md:8,lg:9},l.a.createElement(ze.a,{className:a.paper},l.a.createElement(k.a,{variant:"button",display:"block",gutterBottom:!0},e("summary.trend")),l.a.createElement(Xe.ResponsiveContainer,{width:"100%",aspect:ae.a.isMobile()?4/3:3},l.a.createElement(Me.a,{width:1200,height:300,data:i},l.a.createElement(Ue.a,{strokeDasharray:"3 3"}),l.a.createElement(Ke.a,{dataKey:"name"}),l.a.createElement(He.a,null),l.a.createElement(Ge.a,null),l.a.createElement(Ve.a,null),l.a.createElement(Je.a,{name:e("nav.files"),type:"monotone",dataKey:"file",stroke:"#3f51b5"}),l.a.createElement(Je.a,{name:e("nav.users"),type:"monotone",dataKey:"user",stroke:"#82ca9d"}),l.a.createElement(Je.a,{name:e("nav.shares"),type:"monotone",dataKey:"share",stroke:"#e91e63"}))))),l.a.createElement(_e.a,{item:!0,xs:12,md:4,lg:3},l.a.createElement(ze.a,{className:a.paper},l.a.createElement(k.a,{variant:"button",display:"block",gutterBottom:!0},e("summary.summary")),l.a.createElement(p.a,null),l.a.createElement(g.a,{className:a.root},l.a.createElement(O.a,null,l.a.createElement(xe.a,null,l.a.createElement(be.a,{className:a.userIcon},l.a.createElement(we.a,null))),l.a.createElement(y.a,{primary:F.userTotal,secondary:e("summary.totalUsers")})),l.a.createElement(O.a,null,l.a.createElement(xe.a,null,l.a.createElement(be.a,{className:a.fileIcon},l.a.createElement(De.a,null))),l.a.createElement(y.a,{primary:F.fileTotal,secondary:e("summary.totalFiles")})),l.a.createElement(O.a,null,l.a.createElement(xe.a,null,l.a.createElement(be.a,{className:a.publicIcon},l.a.createElement(Re.a,null))),l.a.createElement(y.a,{primary:F.publicShareTotal,secondary:e("summary.publicShares")})),l.a.createElement(O.a,null,l.a.createElement(xe.a,null,l.a.createElement(be.a,{className:a.secretIcon},l.a.createElement(Ie.a,null))),l.a.createElement(y.a,{primary:F.secretShareTotal,secondary:e("summary.privateShares")}))))),l.a.createElement(_e.a,{item:!0,xs:12,md:4,lg:3},l.a.createElement(ze.a,null,l.a.createElement("div",{className:a.logoContainer},l.a.createElement("img",{alt:"cloudreve",className:a.logo,src:"/static/img/cloudreve.svg"}),l.a.createElement("div",{className:a.title},l.a.createElement(k.a,{className:a.cloudreve},"Cloudreve"),l.a.createElement(k.a,{className:a.version},A.backend," ","true"===A.is_pro&&l.a.createElement(he.a,{size:"small",label:"Pro"})))),l.a.createElement(p.a,null),l.a.createElement("div",null,l.a.createElement(g.a,{component:"nav","aria-label":"main mailbox folders"},l.a.createElement(O.a,{button:!0,onClick:function(){return window.open("https://cloudreve.org")}},l.a.createElement(N.a,null,l.a.createElement(_.a,null)),l.a.createElement(y.a,{primary:e("summary.homepage")}),l.a.createElement(N.a,{className:a.iconRight},l.a.createElement(Fe.a,null))),l.a.createElement(O.a,{button:!0,onClick:function(){return window.open("https://github.com/cloudreve/cloudreve")}},l.a.createElement(N.a,null,l.a.createElement(We.a,null)),l.a.createElement(y.a,{primary:"GitHub"}),l.a.createElement(N.a,{className:a.iconRight},l.a.createElement(Fe.a,null))),l.a.createElement(O.a,{button:!0,onClick:function(){return window.open("https://docs.cloudreve.org/")}},l.a.createElement(N.a,null,l.a.createElement(Pe.a,null)),l.a.createElement(y.a,{primary:e("summary.documents")}),l.a.createElement(N.a,{className:a.iconRight},l.a.createElement(Fe.a,null))),l.a.createElement(O.a,{button:!0,onClick:function(){return window.open(e("summary.forumLink"))}},l.a.createElement(N.a,null,l.a.createElement(Te.a,null)),l.a.createElement(y.a,{primary:e("summary.forum")}),l.a.createElement(N.a,{className:a.iconRight},l.a.createElement(Fe.a,null))),l.a.createElement(O.a,{button:!0,onClick:function(){return window.open(e("summary.telegramGroupLink"))}},l.a.createElement(N.a,null,l.a.createElement(Ae.a,null)),l.a.createElement(y.a,{primary:e("summary.telegramGroup")}),l.a.createElement(N.a,{className:a.iconRight},l.a.createElement(Fe.a,null))),l.a.createElement(O.a,{button:!0,onClick:function(){return window.open("https://cloudreve.org/pro")}},l.a.createElement(N.a,{style:{color:"#ff789d"}},l.a.createElement(qe.a,null)),l.a.createElement(y.a,{primary:e("summary.buyPro")}),l.a.createElement(N.a,{className:a.iconRight},l.a.createElement(Fe.a,null))))))),l.a.createElement(_e.a,{item:!0,xs:12,md:8,lg:9},l.a.createElement(ze.a,{className:a.paper},l.a.createElement(g.a,null,u&&u.map((function(t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{button:!0,alignItems:"flex-start",onClick:function(){return window.open("https://forum.cloudreve.org/d/"+t.id)}},l.a.createElement(xe.a,null,l.a.createElement(be.a,{alt:"Travis Howard",src:v[t.relationships.startUser.data.id]&&v[t.relationships.startUser.data.id].avatarUrl})),l.a.createElement(y.a,{primary:t.attributes.title,secondary:l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},v[t.relationships.startUser.data.id]&&v[t.relationships.startUser.data.id].username," "),l.a.createElement(Qe.a,{ns:"dashboard",i18nKey:"summary.publishedAt",components:[l.a.createElement(Ye.a,{key:0,datetime:t.attributes.startTime,locale:e("timeAgoLocaleCode",{ns:"common"})})]}))})),l.a.createElement(p.a,null))}))))))}var ta=t(272),na=t(7045),ra=t(7028),la=t(7026),ca=t(120),ia=t(464),oa=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function ma(){var e=Object(ne.a)("dashboard",{keyPrefix:"settings"}).t,a=oa(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),i=c[0],o=c[1],u=Object(r.useState)({siteURL:"",siteName:"",siteTitle:"",siteDes:"",siteScript:"",pwa_small_icon:"",pwa_medium_icon:"",pwa_large_icon:"",pwa_display:"",pwa_theme_color:"",pwa_background_color:""}),d=Object(n.a)(u,2),p=d[0],E=d[1],b=function(e){return function(a){E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},e,a.target.value)))}},v=Object(Z.d)(),h=Object(r.useCallback)((function(e,a,t,n){return v(Object($e.R)(e,a,t,n))}),[v]);Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:Object.keys(p)}).then((function(e){E(e.data)})).catch((function(e){h("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),o(!0);var t=[];Object.keys(p).forEach((function(e){t.push({key:e,value:p[e]})})),Ze.b.patch("/admin/setting",{options:t}).then((function(){h("top","right",e("saved"),"success")})).catch((function(e){h("top","right",e.message,"error")})).then((function(){o(!1)}))}},l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("basicInformation")),l.a.createElement("div",{className:a.formContainer},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("mainTitle")),l.a.createElement(ra.a,{value:p.siteName,onChange:b("siteName"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("mainTitleDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("subTitle")),l.a.createElement(ra.a,{value:p.siteTitle,onChange:b("siteTitle")}),l.a.createElement(na.a,{id:"component-helper-text"},e("subTitleDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("siteDescription")),l.a.createElement(ra.a,{value:p.siteDes,onChange:b("siteDes")}),l.a.createElement(na.a,{id:"component-helper-text"},e("siteDescriptionDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("siteURL")),l.a.createElement(ra.a,{type:"url",value:p.siteURL,onChange:b("siteURL"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("siteURLDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("customFooterHTML")),l.a.createElement(ra.a,{multiline:!0,value:p.siteScript,onChange:b("siteScript")}),l.a.createElement(na.a,{id:"component-helper-text"},e("customFooterHTMLDes")))))),l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("pwa")),l.a.createElement("div",{className:a.formContainer},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("smallIcon")),l.a.createElement(ra.a,{value:p.pwa_small_icon,onChange:b("pwa_small_icon")}),l.a.createElement(na.a,{id:"component-helper-text"},e("smallIconDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("mediumIcon")),l.a.createElement(ra.a,{value:p.pwa_medium_icon,onChange:b("pwa_medium_icon")}),l.a.createElement(na.a,{id:"component-helper-text"},e("mediumIconDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("largeIcon")),l.a.createElement(ra.a,{value:p.pwa_large_icon,onChange:b("pwa_large_icon")}),l.a.createElement(na.a,{id:"component-helper-text"},e("largeIconDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("displayMode")),l.a.createElement(ia.a,{value:p.pwa_display,onChange:b("pwa_display")},l.a.createElement(ca.a,{value:"fullscreen"},"fullscreen"),l.a.createElement(ca.a,{value:"standalone"},"standalone"),l.a.createElement(ca.a,{value:"minimal-ui"},"minimal-ui"),l.a.createElement(ca.a,{value:"browser"},"browser")),l.a.createElement(na.a,{id:"component-helper-text"},e("displayModeDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("themeColor")),l.a.createElement(ra.a,{value:p.pwa_theme_color,onChange:b("pwa_theme_color")}),l.a.createElement(na.a,{id:"component-helper-text"},e("themeColorDes"))))),l.a.createElement("div",{className:a.formContainer},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("backgroundColor")),l.a.createElement(ra.a,{value:p.pwa_background_color,onChange:b("pwa_background_color")}),l.a.createElement(na.a,{id:"component-helper-text"},e("backgroundColorDes")))))),l.a.createElement("div",{className:a.root},l.a.createElement(ve.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},e("save")))))}var sa=t(40),ua=t(7046),da=t(7047);function pa(e){var a=e.title,t=e.msg,n=e.open,r=e.onClose;return l.a.createElement(ye.a,{open:n,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(ke.a,{id:"alert-dialog-title"},a),l.a.createElement(Se.a,null,l.a.createElement(je.a,{id:"alert-dialog-description"},l.a.createElement(k.a,null,t))),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:r,color:"primary"},"\u77e5\u9053\u4e86")))}var Ea=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function ba(){var e=Object(ne.a)("dashboard",{keyPrefix:"settings"}).t,a=(Object(ne.a)("dashboard",{keyPrefix:"vas"}).t,Ea()),t=Object(r.useState)(!1),c=Object(n.a)(t,2),i=c[0],o=c[1],u=Object(r.useState)({register_enabled:"1",default_group:"1",email_active:"0",login_captcha:"0",reg_captcha:"0",forget_captcha:"0",authn_enabled:"0"}),d=Object(n.a)(u,2),p=d[0],E=d[1],b=Object(r.useState)(""),v=Object(n.a)(b,2),h=v[0],f=v[1],g=Object(r.useState)([]),O=Object(n.a)(g,2),N=O[0],y=O[1],C=Object(r.useState)(!1),S=Object(n.a)(C,2),j=S[0],_=S[1],x=function(e){return function(a){var t=a.target.value;void 0!==a.target.checked&&(t=a.target.checked?"1":"0"),E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},e,t)))}},z=Object(Z.d)(),w=Object(r.useCallback)((function(e,a,t,n){return z(Object($e.R)(e,a,t,n))}),[z]);Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:[].concat(Object(sa.a)(Object.keys(p)),["siteURL"])}).then((function(e){f(e.data.siteURL),delete e.data.siteURL,E(e.data)})).catch((function(e){w("top","right",e.message,"error")})),Ze.b.get("/admin/groups").then((function(e){y(e.data)})).catch((function(e){w("top","right",e.message,"error")}))}),[]);var D;return l.a.createElement("div",null,l.a.createElement(pa,{title:e("hint"),msg:e("webauthnNoHttps"),onClose:function(){return _(!1)},open:j}),l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),o(!0);var t=[];Object.keys(p).forEach((function(e){t.push({key:e,value:p[e]})})),Ze.b.patch("/admin/setting",{options:t}).then((function(){w("top","right",e("saved"),"success")})).catch((function(e){w("top","right",e.message,"error")})).then((function(){o(!1)}))}},l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("accountManagement")),l.a.createElement("div",{className:a.formContainer},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.register_enabled,onChange:x("register_enabled")}),label:e("allowNewRegistrations")}),l.a.createElement(na.a,{id:"component-helper-text"},e("allowNewRegistrationsDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.email_active,onChange:x("email_active")}),label:e("emailActivation")}),l.a.createElement(na.a,{id:"component-helper-text"},e("emailActivationDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.reg_captcha,onChange:x("reg_captcha")}),label:e("captchaForSignup")}),l.a.createElement(na.a,{id:"component-helper-text"},e("captchaForSignupDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.login_captcha,onChange:x("login_captcha")}),label:e("captchaForLogin")}),l.a.createElement(na.a,{id:"component-helper-text"},e("captchaForLoginDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.forget_captcha,onChange:x("forget_captcha")}),label:e("captchaForReset")}),l.a.createElement(na.a,{id:"component-helper-text"},e("captchaForResetDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.authn_enabled,onChange:function(e){h.startsWith("https://")?x("authn_enabled")(e):_(!0)}}),label:e("webauthn")}),l.a.createElement(na.a,{id:"component-helper-text"},e("webauthnDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("defaultGroup")),l.a.createElement(ia.a,{value:p.default_group,onChange:(D="default_group",function(e){var a=e.target.value;E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},D,a)))}),required:!0},N.map((function(e){return 3===e.ID?null:l.a.createElement(ca.a,{key:e.ID,value:e.ID.toString()},e.Name)}))),l.a.createElement(na.a,{id:"component-helper-text"},e("defaultGroupDes")))))),l.a.createElement("div",{className:a.root},l.a.createElement(ve.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},e("save")))))}var va=t(7118),ha=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),buttonMargin:{marginLeft:8}}}));function fa(){var e=Object(ne.a)("dashboard",{keyPrefix:"settings"}).t,a=(Object(ne.a)("dashboard",{keyPrefix:"vas"}).t,Object(ne.a)("common").t),t=ha(),c=Object(r.useState)(!1),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(""),h=Object(n.a)(v,2),f=h[0],g=h[1],O=Object(r.useState)({fromName:"",fromAdress:"",smtpHost:"",smtpPort:"",replyTo:"",smtpUser:"",smtpPass:"",smtpEncryption:"",mail_keepalive:"30",mail_activation_template:"",mail_reset_pwd_template:""}),N=Object(n.a)(O,2),y=N[0],C=N[1],S=function(e){return function(a){C(Object(m.a)(Object(m.a)({},y),{},Object(s.a)({},e,a.target.value)))}},j=Object(Z.d)(),_=Object(r.useCallback)((function(e,a,t,n){return j(Object($e.R)(e,a,t,n))}),[j]);Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:Object.keys(y)}).then((function(e){C(e.data)})).catch((function(e){_("top","right",e.message,"error")}))}),[]);var x;return l.a.createElement("div",null,l.a.createElement(ye.a,{open:E,onClose:function(){return b(!1)},"aria-labelledby":"form-dialog-title"},l.a.createElement(ke.a,{id:"form-dialog-title"},e("testSMTPSettings")),l.a.createElement(Se.a,null,l.a.createElement(je.a,null,l.a.createElement(k.a,null,e("testSMTPTooltip"))),l.a.createElement(va.a,{autoFocus:!0,margin:"dense",id:"name",label:e("recipient"),value:f,onChange:function(e){return g(e.target.value)},type:"email",fullWidth:!0})),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:function(){return b(!1)},color:"default"},a("cancel")),l.a.createElement(ve.a,{onClick:function(){return u(!0),void Ze.b.post("/admin/mailTest",{to:f}).then((function(){_("top","right",e("testMailSent"),"success")})).catch((function(e){_("top","right",e.message,"error")})).then((function(){u(!1)}))},disabled:o,color:"primary"},e("send")))),l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),u(!0);var t=[];Object.keys(y).forEach((function(e){t.push({key:e,value:y[e]})})),Ze.b.patch("/admin/setting",{options:t}).then((function(){_("top","right",e("saved"),"success"),Ze.b.get("/admin/reload/email").then((function(){})).catch((function(e){_("top","right",e.message,"error")})).then((function(){}))})).catch((function(e){_("top","right",e.message,"error")})).then((function(){u(!1)}))}},l.a.createElement("div",{className:t.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("smtp")),l.a.createElement("div",{className:t.formContainer},l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("senderName")),l.a.createElement(ra.a,{value:y.fromName,onChange:S("fromName"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("senderNameDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("senderAddress")),l.a.createElement(ra.a,{type:"email",required:!0,value:y.fromAdress,onChange:S("fromAdress")}),l.a.createElement(na.a,{id:"component-helper-text"},e("senderAddressDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("smtpServer")),l.a.createElement(ra.a,{value:y.smtpHost,onChange:S("smtpHost"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("smtpServerDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("smtpPort")),l.a.createElement(ra.a,{inputProps:{min:1,step:1},type:"number",value:y.smtpPort,onChange:S("smtpPort"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("smtpPortDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("smtpUsername")),l.a.createElement(ra.a,{value:y.smtpUser,onChange:S("smtpUser"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("smtpUsernameDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("smtpPassword")),l.a.createElement(ra.a,{type:"password",value:y.smtpPass,onChange:S("smtpPass"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("smtpPasswordDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("replyToAddress")),l.a.createElement(ra.a,{value:y.replyTo,onChange:S("replyTo"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("replyToAddressDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===y.smtpEncryption,onChange:(x="smtpEncryption",function(e){var a=e.target.value;void 0!==e.target.checked&&(a=e.target.checked?"1":"0"),C(Object(m.a)(Object(m.a)({},y),{},Object(s.a)({},x,a)))})}),label:e("enforceSSL")}),l.a.createElement(na.a,{id:"component-helper-text"},e("enforceSSLDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("smtpTTL")),l.a.createElement(ra.a,{inputProps:{min:1,step:1},type:"number",value:y.mail_keepalive,onChange:S("mail_keepalive"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("smtpTTLDes")))))),l.a.createElement("div",{className:t.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("emailTemplates")),l.a.createElement("div",{className:t.formContainer},l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("activateNewUser")),l.a.createElement(ra.a,{value:y.mail_activation_template,onChange:S("mail_activation_template"),multiline:!0,rowsMax:"10",required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("activateNewUserDes")))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("resetPassword")),l.a.createElement(ra.a,{value:y.mail_reset_pwd_template,onChange:S("mail_reset_pwd_template"),multiline:!0,rowsMax:"10",required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("resetPasswordDes")))))),l.a.createElement("div",{className:t.root},l.a.createElement(ve.a,{disabled:o,type:"submit",variant:"contained",color:"primary"},e("save")),"   ",l.a.createElement(ve.a,{className:t.buttonMargin,variant:"outlined",color:"primary",onClick:function(){return b(!0)}},e("sendTestEmail")))))}var ga=t(7115);function Oa(e){var a=e.onChange,t=e.min,c=e.value,i=e.required,o=e.label,m=e.max,s=e.suffix,u=Object(Z.d)(),d=(Object(r.useCallback)((function(e,a,t,n){return u(Object($e.R)(e,a,t,n))}),[u]),Object(r.useState)(1)),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(c),h=Object(n.a)(v,2),f=h[0],g=h[1],O=Object(r.useState)(""),N=Object(n.a)(O,2),y=N[0],C=N[1];return Object(r.useEffect)((function(){a({target:{value:(f*E).toString()}}),C(f*E>m||f*E<t?"\u4e0d\u7b26\u5408\u5c3a\u5bf8\u9650\u5236":"")}),[f,E,m,t]),Object(r.useEffect)((function(){var e=function(e){if(!e||"0"===e.toString())return[0,1048576];for(var a=4;a>=0;a--){var t=Math.pow(1024,a);if(e%t===0)return[e/t,t]}}(c);b(e[1]),g(e[0])}),[]),l.a.createElement(ta.a,{error:""!==y},l.a.createElement(la.a,{htmlFor:"component-helper"},o),l.a.createElement(ra.a,{style:{width:200},value:f,type:"number",inputProps:{step:1},onChange:function(e){return g(e.target.value)},required:i,endAdornment:l.a.createElement(ga.a,{position:"end"},l.a.createElement(ia.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:E,onChange:function(e){return b(e.target.value)}},l.a.createElement(ca.a,{value:1},"B",s&&s),l.a.createElement(ca.a,{value:1024},"KB",s&&s),l.a.createElement(ca.a,{value:1048576},"MB",s&&s),l.a.createElement(ca.a,{value:1073741824},"GB",s&&s),l.a.createElement(ca.a,{value:1099511627776},"TB",s&&s)))}),""!==y&&l.a.createElement(na.a,null,y))}var Na=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function ya(){var e=Object(ne.a)("dashboard",{keyPrefix:"settings"}).t,a=Na(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),i=c[0],o=c[1],u=Object(r.useState)({max_worker_num:"1",max_parallel_transfer:"1",temp_path:"",maxEditSize:"",chunk_retries:"0",archive_timeout:"0",download_timeout:"0",preview_timeout:"0",doc_preview_timeout:"0",upload_credential_timeout:"0",upload_session_timeout:"0",slave_api_timeout:"0",onedrive_monitor_timeout:"0",share_download_session_timeout:"0",onedrive_callback_check:"0",reset_after_upload_failed:"0",onedrive_source_timeout:"0",slave_node_retry:"0",slave_ping_interval:"0",slave_recover_interval:"0",slave_transfer_timeout:"0",use_temp_chunk_buffer:"1"}),d=Object(n.a)(u,2),p=d[0],E=d[1],b=function(e){return function(a){var t=a.target.checked?"1":"0";E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},e,t)))}},v=function(e){return function(a){E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},e,a.target.value)))}},h=Object(Z.d)(),f=Object(r.useCallback)((function(e,a,t,n){return h(Object($e.R)(e,a,t,n))}),[h]);Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:Object.keys(p)}).then((function(e){E(e.data)})).catch((function(e){f("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),o(!0);var t=[];Object.keys(p).forEach((function(e){t.push({key:e,value:p[e]})})),Ze.b.patch("/admin/setting",{options:t}).then((function(){f("top","right",e("saved"),"success")})).catch((function(e){f("top","right",e.message,"error")})).then((function(){o(!1)}))}},l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("transportation")),l.a.createElement("div",{className:a.formContainer},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("workerNum")),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:p.max_worker_num,onChange:v("max_worker_num"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("workerNumDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("transitParallelNum")),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:p.max_parallel_transfer,onChange:v("max_parallel_transfer"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("transitParallelNumDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},e("tempFolder")),l.a.createElement(ra.a,{value:p.temp_path,onChange:v("temp_path"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("tempFolderDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,null,""!==p.maxEditSize&&l.a.createElement(Oa,{value:p.maxEditSize,onChange:v("maxEditSize"),required:!0,min:0,max:2147483647,label:e("textEditMaxSize")}),l.a.createElement(na.a,{id:"component-helper-text"},e("textEditMaxSizeDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("failedChunkRetry")),l.a.createElement(ra.a,{type:"number",inputProps:{min:0,step:1},value:p.chunk_retries,onChange:v("chunk_retries"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e("failedChunkRetryDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.use_temp_chunk_buffer,onChange:b("use_temp_chunk_buffer")}),label:e("cacheChunks")}),l.a.createElement(na.a,{id:"component-helper-text"},e("cacheChunksDes")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===p.reset_after_upload_failed,onChange:b("reset_after_upload_failed")}),label:e("resetConnection")}),l.a.createElement(na.a,{id:"component-helper-text"},e("resetConnectionDes")))))),l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("expirationDuration")),l.a.createElement("div",{className:a.formContainer},[{name:"batchDownload",field:"archive_timeout"},{name:"downloadSession",field:"download_timeout"},{name:"previewURL",field:"preview_timeout"},{name:"docPreviewURL",field:"doc_preview_timeout"},{name:"uploadSession",field:"upload_session_timeout",des:"uploadSessionDes"},{name:"downloadSessionForShared",field:"share_download_session_timeout",des:"downloadSessionForSharedDes"},{name:"onedriveMonitorInterval",field:"onedrive_monitor_timeout",des:"onedriveMonitorIntervalDes"},{name:"onedriveCallbackTolerance",field:"onedrive_callback_check",des:"onedriveCallbackToleranceDes"},{name:"onedriveDownloadURLCache",field:"onedrive_source_timeout",des:"onedriveDownloadURLCacheDes"}].map((function(t){return l.a.createElement("div",{key:t.name,className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e(t.name)),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:p[t.field],onChange:v(t.field),required:!0}),t.des&&l.a.createElement(na.a,{id:"component-helper-text"},e(t.des))))})))),l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("nodesCommunication")),l.a.createElement("div",{className:a.formContainer},[{name:"slaveAPIExpiration",field:"slave_api_timeout",des:"slaveAPIExpirationDes"},{name:"heartbeatInterval",field:"slave_ping_interval",des:"heartbeatIntervalDes"},{name:"heartbeatFailThreshold",field:"slave_node_retry",des:"heartbeatFailThresholdDes"},{name:"heartbeatRecoverModeInterval",field:"slave_recover_interval",des:"heartbeatRecoverModeIntervalDes"},{name:"slaveTransitExpiration",field:"slave_transfer_timeout",des:"slaveTransitExpirationDes"}].map((function(t){return l.a.createElement("div",{key:t.name,className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e(t.name)),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:p[t.field],onChange:v(t.field),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},e(t.des))))})))),l.a.createElement("div",{className:a.root},l.a.createElement(ve.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},e("save")))))}var Ca=t(7095),Sa=t(7111),ja=t(7113),ka=t(7110),_a=t(7112),xa=t(7109),za=t(7135),wa=t(7150),Da=t(271),Ra=t(152),Ia=t(8063),Fa=t(7130),Wa=t(7996),Pa=Object(c.a)((function(e){return{picker:{"& div":{boxShadow:"none !important"},marginTop:e.spacing(1)},"@global":{".compact-picker:parent ":{boxShadow:"none !important"}},statusBar:{height:24,width:"100%"},fab:{textAlign:"right"}}}));function Ta(e){var a=e.open,t=e.onClose,c=e.onSubmit,i=Object(ne.a)("dashboard",{keyPrefix:"settings"}).t,o=Object(ne.a)("common").t,s=Pa(),u=Object(r.useState)({palette:{primary:{main:"#3f51b5",contrastText:"#fff"},secondary:{main:"#d81b60",contrastText:"#fff"}}}),p=Object(n.a)(u,2),E=p[0],b=p[1],v=Object(r.useCallback)((function(){try{return Object(Ra.a)(E)}catch(e){return Object(Ra.a)({})}}),[E]);return l.a.createElement(ye.a,{open:a,onClose:t,fullWidth:!0,maxWidth:"md"},l.a.createElement(Se.a,null,l.a.createElement(_e.a,{container:!0},l.a.createElement(_e.a,{spacing:2,md:8,xs:12,container:!0},l.a.createElement(_e.a,{md:6,xs:12,item:!0},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},i("primaryColor")),l.a.createElement(va.a,{value:E.palette.primary.main,onChange:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{primary:Object(m.a)(Object(m.a)({},E.palette.primary),{},{main:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:s.picker},l.a.createElement(Wa.a,{colors:["#4D4D4D","#999999","#FFFFFF","#f44336","#ff9800","#ffeb3b","#cddc39","#A4DD00","#00bcd4","#03a9f4","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#ff5722","#ffc107","#FCC400","#8bc34a","#4caf50","#009688","#2196f3","#3f51b5","#e91e63","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#673ab7","#9c27b0"],color:E.palette.primary.main,onChangeComplete:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{primary:Object(m.a)(Object(m.a)({},E.palette.primary),{},{main:e.hex})})}))}}))),l.a.createElement(_e.a,{md:6,xs:12,item:!0},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},i("secondaryColor")),l.a.createElement(va.a,{value:E.palette.secondary.main,onChange:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{secondary:Object(m.a)(Object(m.a)({},E.palette.secondary),{},{main:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:s.picker},l.a.createElement(Wa.a,{colors:["#4D4D4D","#999999","#FFFFFF","#ff1744","#ff3d00","#ffeb3b","#cddc39","#A4DD00","#00bcd4","#00e5ff","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#ff5722","#ffea00","#ffc400","#c6ff00","#00e676","#76ff03","#00b0ff","#2979ff","#f50057","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#1de9b6","#0C797D","#3d5afe","#651fff","#d500f9"],color:E.palette.secondary.main,onChangeComplete:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{secondary:Object(m.a)(Object(m.a)({},E.palette.secondary),{},{main:e.hex})})}))}}))),l.a.createElement(_e.a,{md:6,xs:12,item:!0},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},i("primaryColorText")),l.a.createElement(va.a,{value:E.palette.primary.contrastText,onChange:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{primary:Object(m.a)(Object(m.a)({},E.palette.primary),{},{contrastText:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:s.picker},l.a.createElement(Wa.a,{color:E.palette.primary.contrastText,onChangeComplete:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{primary:Object(m.a)(Object(m.a)({},E.palette.primary),{},{contrastText:e.hex})})}))}}))),l.a.createElement(_e.a,{md:6,xs:12,item:!0},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},i("secondaryColorText")),l.a.createElement(va.a,{value:E.palette.secondary.contrastText,onChange:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{secondary:Object(m.a)(Object(m.a)({},E.palette.secondary),{},{contrastText:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:s.picker},l.a.createElement(Wa.a,{color:E.palette.secondary.contrastText,onChangeComplete:function(e){b(Object(m.a)(Object(m.a)({},E),{},{palette:Object(m.a)(Object(m.a)({},E.palette),{},{secondary:Object(m.a)(Object(m.a)({},E.palette.secondary),{},{contrastText:e.hex})})}))}})))),l.a.createElement(_e.a,{spacing:2,md:4,xs:12},l.a.createElement(ue.a,{theme:v()},l.a.createElement("div",{className:s.statusBar,style:{backgroundColor:v().palette.primary.dark}}),l.a.createElement(d.a,{position:"static"},l.a.createElement(j.a,null,l.a.createElement(f.a,{edge:"start",className:s.menuButton,color:"inherit","aria-label":"menu"},l.a.createElement(Ia.a,null)),l.a.createElement(k.a,{variant:"h6",className:s.title},"Color"))),l.a.createElement("div",{style:{padding:16}},l.a.createElement(va.a,{fullWidth:!0,color:"secondary",label:"Text input"}),l.a.createElement("div",{className:s.fab,style:{paddingTop:64}},l.a.createElement(Da.a,{color:"secondary","aria-label":"add"},l.a.createElement(Fa.a,null)))))))),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:t,color:"default"},o("cancel")),l.a.createElement(ve.a,{onClick:function(){return c(E)},color:"primary"},o("ok"))))}var Aa=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:500,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),colorContainer:{display:"flex"},colorDot:{width:20,height:20,borderRadius:"50%",marginLeft:6}}}));function qa(){var e=Object(ne.a)("dashboard",{keyPrefix:"settings"}).t,a=Object(ne.a)().t,t=Aa(),c=Object(r.useState)(!1),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)({}),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)({themes:"{}",defaultTheme:"",home_view_method:"icon",share_view_method:"list"}),h=Object(n.a)(v,2),g=h[0],O=h[1],N=Object(r.useState)({}),y=Object(n.a)(N,2),C=y[0],S=y[1],j=Object(r.useState)({}),_=Object(n.a)(j,2),x=_[0],z=_[1],w=Object(r.useState)(!1),D=Object(n.a)(w,2),R=D[0],I=D[1],F=Object(Z.d)(),W=Object(r.useCallback)((function(e,a,t,n){return F(Object($e.R)(e,a,t,n))}),[F]);Object(r.useEffect)((function(){var e=JSON.parse(g.themes),a={};Object.keys(e).forEach((function(t){a[t]=JSON.stringify(e[t])})),b(e),S(a)}),[g.themes]);var P=function(e){return function(a){O(Object(m.a)(Object(m.a)({},g),{},Object(s.a)({},e,a.target.value)))}};Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:Object.keys(g)}).then((function(e){O(e.data)})).catch((function(e){W("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),u(!0);var t=[];Object.keys(g).forEach((function(e){t.push({key:e,value:g[e]})})),Ze.b.patch("/admin/setting",{options:t}).then((function(){W("top","right",e("saved"),"success")})).catch((function(e){W("top","right",e.message,"error")})).then((function(){u(!1)}))}},l.a.createElement("div",{className:t.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("themes")),l.a.createElement("div",{className:t.formContainer},l.a.createElement("div",{className:t.form},l.a.createElement(Sa.a,{"aria-label":"simple table"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,null,l.a.createElement(ka.a,null,e("colors")),l.a.createElement(ka.a,null,e("themeConfig")),l.a.createElement(ka.a,null,e("actions")))),l.a.createElement(ja.a,null,Object.keys(E).map((function(a){return l.a.createElement(xa.a,{key:a},l.a.createElement(ka.a,{component:"th",scope:"row"},l.a.createElement("div",{className:t.colorContainer},l.a.createElement("div",{style:{backgroundColor:E[a].palette.primary.main},className:t.colorDot}),l.a.createElement("div",{style:{backgroundColor:E[a].palette.secondary.main},className:t.colorDot}))),l.a.createElement(ka.a,null,l.a.createElement(va.a,{error:x[a],helperText:x[a]&&e("wrongFormat"),fullWidth:!0,multiline:!0,onChange:function(e){S(Object(m.a)(Object(m.a)({},C),{},Object(s.a)({},a,e.target.value)))},onBlur:function(e){try{var t=JSON.parse(e.target.value);if(!("palette"in t)||!("primary"in t.palette)||!("main"in t.palette.primary)||!("secondary"in t.palette)||!("main"in t.palette.secondary))throw e;b(Object(m.a)(Object(m.a)({},E),{},Object(s.a)({},a,t)))}catch(e){return void z(Object(m.a)(Object(m.a)({},x),{},Object(s.a)({},a,!0)))}z(Object(m.a)(Object(m.a)({},x),{},Object(s.a)({},a,!1)))},value:C[a]})),l.a.createElement(ka.a,null,l.a.createElement(f.a,{onClick:function(){return function(a){if(a!==g.defaultTheme)if(Object.keys(E).length<=1)W("top","right",e("keepAtLeastOneTheme"),"warning");else{var t=Object(m.a)({},E);delete t[a];var n=JSON.stringify(t);O(Object(m.a)(Object(m.a)({},g),{},{themes:n}))}else W("top","right",e("cannotDeleteDefaultTheme"),"warning")}(a)}},l.a.createElement(za.a,null))))})))),l.a.createElement("div",null,l.a.createElement(ve.a,{variant:"outlined",color:"primary",style:{marginTop:8},onClick:function(){return I(!0)}},e("createNewTheme"))),l.a.createElement(wa.a,{severity:"info",style:{marginTop:8}},l.a.createElement(k.a,{variant:"body2"},l.a.createElement(Qe.a,{i18nKey:"settings.themeConfigDes",ns:"dashboard",components:[l.a.createElement(Ca.a,{key:0,href:e("themeConfigDoc"),target:"_blank"})]})))),l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("defaultTheme")),l.a.createElement(ia.a,{value:g.defaultTheme,onChange:P("defaultTheme")},Object.keys(E).map((function(e){return l.a.createElement(ca.a,{key:e,value:e},l.a.createElement("div",{className:t.colorContainer},l.a.createElement("div",{style:{backgroundColor:E[e].palette.primary.main},className:t.colorDot}),l.a.createElement("div",{style:{backgroundColor:E[e].palette.secondary.main},className:t.colorDot})))}))),l.a.createElement(na.a,{id:"component-helper-text"},e("defaultThemeDes")))))),l.a.createElement("div",{className:t.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},e("appearance")),l.a.createElement("div",{className:t.formContainer},l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("personalFileListView")),l.a.createElement(ia.a,{value:g.home_view_method,onChange:P("home_view_method"),required:!0},l.a.createElement(ca.a,{value:"icon"},a("fileManager.gridViewLarge")),l.a.createElement(ca.a,{value:"smallIcon"},a("fileManager.gridViewSmall")),l.a.createElement(ca.a,{value:"list"},a("fileManager.listView"))),l.a.createElement(na.a,{id:"component-helper-text"},e("personalFileListViewDes"))))),l.a.createElement("div",{className:t.formContainer},l.a.createElement("div",{className:t.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},e("sharedFileListView")),l.a.createElement(ia.a,{value:g.share_view_method,onChange:P("share_view_method"),required:!0},l.a.createElement(ca.a,{value:"icon"},a("fileManager.gridViewLarge")),l.a.createElement(ca.a,{value:"smallIcon"},a("fileManager.gridViewSmall")),l.a.createElement(ca.a,{value:"list"},a("fileManager.listView"))),l.a.createElement(na.a,{id:"component-helper-text"},e("sharedFileListViewDes")))))),l.a.createElement("div",{className:t.root},l.a.createElement(ve.a,{disabled:o,type:"submit",variant:"contained",color:"primary"},e("save")))),l.a.createElement(Ta,{onSubmit:function(a){if(I(!1),void 0===E[a.palette.primary.main]){var t=Object(m.a)(Object(m.a)({},E),{},Object(s.a)({},a.palette.primary.main,a)),n=JSON.stringify(t);O(Object(m.a)(Object(m.a)({},g),{},{themes:n}))}else W("top","right",e("duplicatedThemePrimaryColor"),"warning")},open:R,onClose:function(){return I(!1)}}))}var La=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function Ba(){var e=La(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({gravatar_server:"",avatar_path:"",avatar_size:"",avatar_size_l:"",avatar_size_m:"",avatar_size_s:"",thumb_width:"",thumb_height:"",office_preview_service:"",thumb_file_suffix:"",thumb_max_task_count:"",thumb_encode_method:"",thumb_gc_after_gen:"0",thumb_encode_quality:""}),u=Object(n.a)(o,2),d=u[0],p=u[1],E=function(e){return function(a){p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},e,a.target.value)))}},b=Object(Z.d)(),v=Object(r.useCallback)((function(e,a,t,n){return b(Object($e.R)(e,a,t,n))}),[b]);Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:Object.keys(d)}).then((function(e){p(e.data)})).catch((function(e){v("top","right",e.message,"error")}))}),[]);var h;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(d).forEach((function(e){a.push({key:e,value:d[e]})})),Ze.b.patch("/admin/setting",{options:a}).then((function(){v("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){v("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"\u5934\u50cf"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Gravatar \u670d\u52a1\u5668"),l.a.createElement(ra.a,{type:"url",value:d.gravatar_server,onChange:E("gravatar_server"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},"Gravatar \u670d\u52a1\u5668\u5730\u5740\uff0c\u53ef\u9009\u62e9\u4f7f\u7528\u56fd\u5185\u955c\u50cf"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5934\u50cf\u5b58\u50a8\u8def\u5f84"),l.a.createElement(ra.a,{value:d.avatar_path,onChange:E("avatar_path"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},"\u7528\u6237\u4e0a\u4f20\u81ea\u5b9a\u4e49\u5934\u50cf\u7684\u5b58\u50a8\u8def\u5f84"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},""!==d.avatar_size&&l.a.createElement(Oa,{value:d.avatar_size,onChange:E("avatar_size"),required:!0,min:0,max:2147483647,label:"\u5934\u50cf\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u7528\u6237\u53ef\u4e0a\u4f20\u5934\u50cf\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5c0f\u5934\u50cf\u5c3a\u5bf8"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.avatar_size_s,onChange:E("avatar_size_s"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u4e2d\u5934\u50cf\u5c3a\u5bf8"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.avatar_size_m,onChange:E("avatar_size_m"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5927\u5934\u50cf\u5c3a\u5bf8"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.avatar_size_l,onChange:E("avatar_size_l"),required:!0}))))),l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"\u6587\u4ef6\u9884\u89c8"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"Office \u6587\u6863\u9884\u89c8\u670d\u52a1"),l.a.createElement(ra.a,{value:d.office_preview_service,onChange:E("office_preview_service"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},"\u53ef\u4f7f\u7528\u4ee5\u4e0b\u66ff\u6362\u53d8\u91cf\uff1a",l.a.createElement("br",null),l.a.createElement("code",null,"{$src}")," - \u6587\u4ef6 URL",l.a.createElement("br",null),l.a.createElement("code",null,"{$srcB64}")," - Base64 \u7f16\u7801\u540e\u7684\u6587\u4ef6 URL"))))),l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"\u7f29\u7565\u56fe"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(wa.a,{severity:"info"},"\u4ee5\u4e0b\u8bbe\u7f6e\u53ea\u9488\u5bf9\u672c\u673a\u5b58\u50a8\u7b56\u7565\u6709\u6548\u3002")),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7f29\u7565\u56fe\u5bbd\u5ea6"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.thumb_width,onChange:E("thumb_width"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7f29\u7565\u56fe\u9ad8\u5ea6"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.thumb_height,onChange:E("thumb_height"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7f29\u7565\u56fe\u6587\u4ef6\u540e\u7f00"),l.a.createElement(ra.a,{type:"text",value:d.thumb_file_suffix,onChange:E("thumb_file_suffix"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7f29\u7565\u56fe\u751f\u6210\u5e76\u884c\u6570\u91cf"),l.a.createElement(ra.a,{type:"number",inputProps:{min:-1,step:1},value:d.thumb_max_task_count,onChange:E("thumb_max_task_count"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},"-1 \u8868\u793a\u81ea\u52a8\u51b3\u5b9a"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7f29\u7565\u56fe\u683c\u5f0f"),l.a.createElement(ra.a,{type:"test",value:d.thumb_encode_method,onChange:E("thumb_encode_method"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},"\u53ef\u9009\uff1apng/jpg"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7f29\u7565\u56fe\u751f\u6210\u5e76\u884c\u6570\u91cf"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1,max:100},value:d.thumb_encode_quality,onChange:E("thumb_encode_quality"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},"\u538b\u7f29\u8d28\u91cf\u767e\u5206\u6bd4\uff0c\u53ea\u9488\u5bf9 jpg \u7f16\u7801\u6709\u6548"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===d.thumb_gc_after_gen,onChange:(h="thumb_gc_after_gen",function(e){var a=e.target.checked?"1":"0";p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},h,a)))})}),label:"\u751f\u6210\u5b8c\u6210\u540e\u7acb\u5373\u56de\u6536\u5185\u5b58"}))))),l.a.createElement("div",{className:e.root},l.a.createElement(ve.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}var Ma=t(241),Ua=t(7134),Ka=t(8085),Ha=t(92),Ga=t(8066),Va=t(48),Ja=t(26),Xa=t(7123),Ya=t(8064),$a=t(7127),Za=t(8065),Qa=Object(c.a)((function(e){return{cardContainer:{display:"flex"},cover:{width:100,height:60},card:{},content:{flex:"1 0 auto"},bg:{backgroundColor:e.palette.background.default,padding:"24px 24px"},dialogFooter:{justifyContent:"space-between"}}})),et=[{name:"\u672c\u673a\u5b58\u50a8",img:"local.png",path:"/admin/policy/add/local"},{name:"\u4ece\u673a\u5b58\u50a8",img:"remote.png",path:"/admin/policy/add/remote"},{name:"\u4e03\u725b",img:"qiniu.png",path:"/admin/policy/add/qiniu"},{name:"\u963f\u91cc\u4e91 OSS",img:"oss.png",path:"/admin/policy/add/oss"},{name:"\u53c8\u62cd\u4e91",img:"upyun.png",path:"/admin/policy/add/upyun"},{name:"\u817e\u8baf\u4e91 COS",img:"cos.png",path:"/admin/policy/add/cos"},{name:"OneDrive",img:"onedrive.png",path:"/admin/policy/add/onedrive"},{name:"Amazon S3",img:"s3.png",path:"/admin/policy/add/s3"}];function at(e){var a=e.open,t=e.onClose,n=Qa(),r=Object(Q.g)();return l.a.createElement(ye.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"sm",fullWidth:!0},l.a.createElement(ke.a,{id:"alert-dialog-title"},"\u9009\u62e9\u5b58\u50a8\u65b9\u5f0f"),l.a.createElement(Se.a,{dividers:!0,className:n.bg},l.a.createElement(_e.a,{container:!0,spacing:2},et.map((function(e){return l.a.createElement(_e.a,{item:!0,sm:12,md:6,key:e.path},l.a.createElement(Xa.a,{className:n.card},l.a.createElement(Ya.a,{onClick:function(){r.push(e.path),t()},className:n.cardContainer},l.a.createElement(Za.a,{className:n.cover,image:"/static/img/"+e.img}),l.a.createElement($a.a,{className:n.content},l.a.createElement(k.a,{variant:"subtitle1",color:"textSecondary"},e.name)))))})))),l.a.createElement(Ce.a,{className:n.dialogFooter},l.a.createElement(ve.a,{onClick:function(){return window.open("https://docs.cloudreve.org/use/policy/compare")},color:"primary"},"\u5b58\u50a8\u7b56\u7565\u5bf9\u6bd4"),l.a.createElement(ve.a,{onClick:t,color:"primary"},"\u53d6\u6d88")))}var tt=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{}}})),nt=[{id:"#",label:"#",minWidth:50},{id:"name",label:"\u540d\u79f0",minWidth:170},{id:"type",label:"\u7c7b\u578b",minWidth:170},{id:"count",label:"\u4e0b\u5c5e\u6587\u4ef6\u6570",minWidth:50,align:"right"},{id:"size",label:"\u6570\u636e\u91cf",minWidth:100,align:"right"},{id:"action",label:"\u64cd\u4f5c",minWidth:170,align:"right"}];function rt(){var e=tt(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)([]),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)(1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(10),h=Object(n.a)(v,2),g=h[0],O=h[1],N=Object(r.useState)(0),y=Object(n.a)(N,2),C=y[0],S=y[1],j=Object(r.useState)(!1),k=Object(n.a)(j,2),_=k[0],x=k[1],z=Object(r.useState)("all"),w=Object(n.a)(z,2),D=w[0],R=w[1],I=l.a.useState(null),F=Object(n.a)(I,2),W=F[0],P=F[1],T=l.a.useState(0),A=Object(n.a)(T,2),q=A[0],L=A[1],B=Object(Q.h)(),M=Object(Q.g)(),U=new URLSearchParams(Object(Q.h)().search),K=function(){P(null)},H=Object(Z.d)(),G=Object(r.useCallback)((function(e,a,t,n){return H(Object($e.R)(e,a,t,n))}),[H]);Object(r.useEffect)((function(){"0"===U.get("code")?G("top","right","\u6388\u6743\u6210\u529f","success"):U.get("msg")&&""!==U.get("msg")&&G("top","right",U.get("msg")+", "+U.get("err"),"warning")}),[B]);var V=function(){Ze.b.post("/admin/policy/list",{page:E,page_size:g,order_by:"id desc",conditions:"all"===D?{}:{type:D}}).then((function(e){i(e.data.items),u(e.data.statics),S(e.data.total)})).catch((function(e){G("top","right",e.message,"error")}))};Object(r.useEffect)((function(){V()}),[E,g,D]);var J=Boolean(W);return l.a.createElement("div",null,l.a.createElement(at,{open:_,onClose:function(){return x(!1)}}),l.a.createElement("div",{className:e.header},l.a.createElement(ve.a,{color:"primary",onClick:function(){return x(!0)},variant:"contained"},"\u6dfb\u52a0\u5b58\u50a8\u7b56\u7565"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(ia.a,{style:{marginRight:8},value:D,onChange:function(e){return R(e.target.value)}},l.a.createElement(ca.a,{value:"all"},"\u5168\u90e8"),l.a.createElement(ca.a,{value:"local"},"\u672c\u673a"),l.a.createElement(ca.a,{value:"remote"},"\u4ece\u673a"),l.a.createElement(ca.a,{value:"qiniu"},"\u4e03\u725b"),l.a.createElement(ca.a,{value:"upyun"},"\u53c8\u62cd\u4e91"),l.a.createElement(ca.a,{value:"oss"},"\u963f\u91cc\u4e91 OSS"),l.a.createElement(ca.a,{value:"cos"},"\u817e\u8baf\u4e91 COS"),l.a.createElement(ca.a,{value:"onedrive"},"OneDrive"),l.a.createElement(ca.a,{value:"s3"},"Amazon S3")),l.a.createElement(ve.a,{color:"primary",onClick:function(){return V()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},nt.map((function(e){return l.a.createElement(ka.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),l.a.createElement(ja.a,null,c.map((function(e){return l.a.createElement(xa.a,{hover:!0,key:e.ID},l.a.createElement(ka.a,null,e.ID),l.a.createElement(ka.a,null,e.Name),l.a.createElement(ka.a,null,void 0!==Va.l[e.Type]&&Va.l[e.Type]),l.a.createElement(ka.a,{align:"right"},void 0!==s[e.ID]&&s[e.ID][0].toLocaleString()),l.a.createElement(ka.a,{align:"right"},void 0!==s[e.ID]&&Object(Ja.p)(s[e.ID][1])),l.a.createElement(ka.a,{align:"right"},l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:function(){return a=e.ID,void Ze.b.delete("/admin/policy/"+a).then((function(){V(),G("top","right","\u5b58\u50a8\u7b56\u7565\u5df2\u5220\u9664","success")})).catch((function(e){G("top","right",e.message,"error")}));var a},size:"small"},l.a.createElement(za.a,null))),l.a.createElement(Ha.a,{title:"\u7f16\u8f91"},l.a.createElement(f.a,{onClick:function(a){L(e.ID),P(a.currentTarget)},size:"small"},l.a.createElement(Ga.a,null)))))}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,100],component:"div",count:C,rowsPerPage:g,page:E-1,onChangePage:function(e,a){return b(a+1)},onChangeRowsPerPage:function(e){O(e.target.value),b(1)}})),l.a.createElement(Ma.a,{open:J,anchorEl:W,onClose:K,keepMounted:!0},l.a.createElement(ca.a,{onClick:function(e){K(),M.push("/admin/policy/edit/pro/"+q)}},"\u4e13\u5bb6\u6a21\u5f0f\u7f16\u8f91"),l.a.createElement(ca.a,{onClick:function(e){K(),M.push("/admin/policy/edit/guide/"+q)}},"\u5411\u5bfc\u6a21\u5f0f\u7f16\u8f91")))}var lt=t(7020),ct=t(8082),it=t(8068),ot=t(8067),mt=t(8083),st=t(8086);function ut(e){var a=e.onChange,t=e.value,c=e.required,i=e.label,o=Object(r.useState)(""),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)("https://"),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(),h=Object(n.a)(v,2),f=h[0],g=h[1];return Object(r.useState)((function(){(t=t||"").startsWith("https://")?(u(t.replace("https://","")),b("https://")):""!==t&&(u(t.replace("http://","")),b("http://"))}),[t]),Object(r.useEffect)((function(){"http://"===E&&"https:"===window.location.protocol?g("\u60a8\u5f53\u524d\u7ad9\u70b9\u542f\u7528\u4e86 HTTPS \uff0c\u6b64\u5904\u9009\u62e9 HTTP \u53ef\u80fd\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u8fde\u63a5\u3002"):g("")}),[E]),l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},i),l.a.createElement(ra.a,{error:""!==f,value:s,onChange:function(e){u(e.target.value),a({target:{value:E+e.target.value}})},required:c,startAdornment:l.a.createElement(ga.a,{position:"start"},l.a.createElement(ia.a,{value:E,onChange:function(e){b(e.target.value),a({target:{value:e.target.value+s}})}},l.a.createElement(ca.a,{value:"http://"},"http://"),l.a.createElement(ca.a,{value:"https://"},"https://")))}),""!==f&&l.a.createElement(na.a,{error:""!==f},f))}var dt=[{value:"{randomkey16}",des:"16\u4f4d\u968f\u673a\u5b57\u7b26",example:"N6IimT5XZP324ACK",fileOnly:!1},{value:"{randomkey8}",des:"8\u4f4d\u968f\u673a\u5b57\u7b26",example:"gWz78q30",fileOnly:!1},{value:"{timestamp}",des:"\u79d2\u7ea7\u65f6\u95f4\u6233",example:"1582692933",fileOnly:!1},{value:"{timestamp_nano}",des:"\u7eb3\u79d2\u7ea7\u65f6\u95f4\u6233",example:"1582692933231834600",fileOnly:!1},{value:"{uid}",des:"\u7528\u6237ID",example:"1",fileOnly:!1},{value:"{originname}",des:"\u539f\u59cb\u6587\u4ef6\u540d",example:"MyPico.mp4",fileOnly:!0},{value:"{ext}",des:"\u6587\u4ef6\u6269\u5c55\u540d",example:".jpg",fileOnly:!0},{value:"{uuid}",des:"UUID V4",example:"31f0a770-659d-45bf-a5a9-166c06f33281",fileOnly:!0},{value:"{date}",des:"\u65e5\u671f",example:"20060102",fileOnly:!1},{value:"{datetime}",des:"\u65e5\u671f\u65f6\u95f4",example:"20060102150405",fileOnly:!1},{value:"{year}",des:"\u5e74\u4efd",example:"2006",fileOnly:!1},{value:"{month}",des:"\u6708\u4efd",example:"01",fileOnly:!1},{value:"{day}",des:"\u65e5",example:"02",fileOnly:!1},{value:"{hour}",des:"\u5c0f\u65f6",example:"15",fileOnly:!1},{value:"{minute}",des:"\u5206\u949f",example:"04",fileOnly:!1},{value:"{second}",des:"\u79d2",example:"05",fileOnly:!1}];function pt(e){var a=e.isFile,t=e.open,n=e.onClose;e.isSlave;return l.a.createElement(ye.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(ke.a,{id:"alert-dialog-title"},a?"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf":"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf"),l.a.createElement(Se.a,null,l.a.createElement(Ua.a,null,l.a.createElement(Sa.a,{size:"small","aria-label":"a dense table"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,null,l.a.createElement(ka.a,null,"\u9b54\u6cd5\u53d8\u91cf"),l.a.createElement(ka.a,null,"\u63cf\u8ff0"),l.a.createElement(ka.a,null,"\u793a\u4f8b"))),l.a.createElement(ja.a,null,dt.map((function(e){if(!e.fileOnly||a)return l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},e.value),l.a.createElement(ka.a,null,e.des),l.a.createElement(ka.a,null,e.example))})),!a&&l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"{path}"),l.a.createElement(ka.a,null,"\u7528\u6237\u4e0a\u4f20\u8def\u5f84"),l.a.createElement(ka.a,null,"/\u6211\u7684\u6587\u4ef6/\u5b66\u4e60\u8d44\u6599/")))))),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:n,color:"primary"},"\u5173\u95ed")))}var Et=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"}}}})),bt=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8bbe\u7f6e",optional:!1},{title:"\u8de8\u57df\u7b56\u7565",optional:!0},{title:"\u4e91\u51fd\u6570\u56de\u8c03",optional:!0},{title:"\u5b8c\u6210",optional:!1}];function vt(e){var a=Et(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=l.a.useState(new Set),h=Object(n.a)(v,2),f=h[0],g=h[1],O=Object(r.useState)(""),N=Object(n.a)(O,2),y=N[0],C=N[1],S=Object(r.useState)("false"),j=Object(n.a)(S,2),_=j[0],x=j[1],z=Object(r.useState)(e.policy?e.policy:{Type:"cos",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",Server:"",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",placeholder_with_size:"false"}}),w=Object(n.a)(z,2),D=w[0],R=w[1],I=Object(r.useState)(e.policy?e.policy.ID:0),F=Object(n.a)(I,2),W=F[0],P=F[1],T=Object(r.useState)("ap-chengdu"),A=Object(n.a)(T,2),q=A[0],L=A[1],B=function(e){return function(a){R(Object(m.a)(Object(m.a)({},D),{},Object(s.a)({},e,a.target.value)))}},M=function(e){return function(a){R(Object(m.a)(Object(m.a)({},D),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},D.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},U=Object(Z.d)(),K=Object(r.useCallback)((function(e,a,t,n){return U(Object($e.R)(e,a,t,n))}),[U]);return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u817e\u8baf\u4e91 COS \u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},bt.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,f.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4f7f\u7528 \u817e\u8baf\u4e91 COS \u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/cos5",target:"_blank"},"COS \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa\u5b58\u50a8\u6876\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f6c\u5230\u6240\u521b\u5efa\u5b58\u50a8\u6876\u7684\u57fa\u7840\u914d\u7f6e\u9875\u9762\uff0c\u5c06",l.a.createElement("code",null,"\u7a7a\u95f4\u540d\u79f0"),"\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7a7a\u95f4\u540d\u79f0"),l.a.createElement(ra.a,{inputProps:{pattern:"[a-z0-9-]+-[0-9]+",title:"\u7a7a\u95f4\u540d\u683c\u5f0f\u4e0d\u6b63\u786e, \u4e3e\u4f8b\uff1accc-1252109809"},required:!0,value:D.BucketName,onChange:B("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u9009\u62e9\u60a8\u521b\u5efa\u7684\u7a7a\u95f4\u7684\u8bbf\u95ee\u6743\u9650\u7c7b\u578b\uff0c\u63a8\u8350\u9009\u62e9",l.a.createElement("code",null,"\u79c1\u6709\u8bfb\u5199"),"\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u201c\u83b7\u53d6\u76f4\u94fe\u201d\u529f\u80fd\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:D.IsPrivate,onChange:B("IsPrivate"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u79c1\u6709\u8bfb\u5199"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u516c\u5171\u8bfb\u79c1\u6709\u5199"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f6c\u5230\u6240\u521b\u5efa Bucket \u7684\u57fa\u7840\u914d\u7f6e\uff0c\u586b\u5199",l.a.createElement("code",null,"\u57fa\u672c\u4fe1\u606f"),"\u680f\u76ee\u4e0b \u7ed9\u51fa\u7684"," ",l.a.createElement("code",null,"\u8bbf\u95ee\u57df\u540d")),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:D.Server,onChange:B("Server"),required:!0,label:"\u8bbf\u95ee\u57df\u540d"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u4f7f\u7528\u914d\u5957\u7684 \u817e\u8baf\u4e91CDN \u52a0\u901f COS \u8bbf\u95ee\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:_,onChange:function(e){x(e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(lt.a,{in:"true"===_},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/cdn/access/guid",target:"_blank"},"\u817e\u8baf\u4e91 CDN \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u8bbe\u5b9a\u6e90\u7ad9\u4e3a\u521a\u521b\u5efa\u7684 COS \u5b58\u50a8\u6876\u3002\u5728\u4e0b\u65b9\u586b\u5199 CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u9009\u62e9\u662f\u5426\u4f7f\u7528 HTTPS\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:D.BaseURL,onChange:B("BaseURL"),required:"true"===_,label:"CDN \u52a0\u901f\u57df\u540d"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(6,["true"===_]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u817e\u8baf\u4e91",l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank"},"\u8bbf\u95ee\u5bc6\u94a5"),"\u9875\u9762\u83b7\u53d6 \u4e00\u5bf9\u8bbf\u95ee\u5bc6\u94a5\uff0c\u5e76\u586b\u5199\u5728\u4e0b\u65b9\u3002\u8bf7\u786e\u4fdd\u8fd9\u5bf9\u5bc6\u94a5\u62e5\u6709 COS \u548c SCF \u670d\u52a1\u7684\u8bbf\u95ee\u6743\u9650\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"SecretId"),l.a.createElement(ra.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:D.AccessKey,onChange:B("AccessKey")}))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"SecretKey"),l.a.createElement(ra.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:D.SecretKey,onChange:B("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(7,["true"===_]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:D.Name,onChange:B("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContental,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),C("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:D.DirNameRule,onChange:B("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),C("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:D.AutoRename,onChange:B("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===D.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===D.AutoRename,value:D.FileNameRule,onChange:B("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:D.IsOriginLinkEnable,onChange:function(e){"true"!==D.IsPrivate||"true"!==e.target.value?B("IsOriginLinkEnable")(e):K("top","right","\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u6b64\u529f\u80fd","warning")},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},D);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),"false"===_&&(t.BaseURL=D.Server),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(a){K("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4),P(a.data)})).catch((function(e){K("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===D.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?R(Object(m.a)(Object(m.a)({},D),{},{MaxSize:"10485760"})):R(Object(m.a)(Object(m.a)({},D),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==D.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:D.MaxSize,onChange:B("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==D.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===D.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?R(Object(m.a)(Object(m.a)({},D),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},D.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):R(Object(m.a)(Object(m.a)({},D),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},D.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==D.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==D.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:D.OptionsSerialized.file_type,onChange:M("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(3,["0"!==D.MaxSize,""!==D.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u518d\u7528\u6237\u5f00\u59cb\u4e0a\u4f20\u65f6\u5c31\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6\u5e76\u6263\u9664\u7528\u6237\u5bb9\u91cf\uff1f\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u9632\u6b62\u7528\u6237\u6076\u610f\u53d1\u8d77\u591a\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u4f46\u4e0d\u5b8c\u6210\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:D.OptionsSerialized.placeholder_with_size,onChange:M("placeholder_with_size"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u521b\u5efa"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"COS \u5b58\u50a8\u6876 \u9700\u8981\u6b63\u786e\u914d\u7f6e\u8de8\u57df\u7b56\u7565\u540e\u624d\u80fd\u4f7f\u7528 Web \u7aef\u4e0a\u4f20\u6587\u4ef6\uff0cCloudreve \u53ef\u4ee5\u5e2e\u60a8\u81ea\u52a8\u8bbe\u7f6e\uff0c\u60a8\u4e5f\u53ef\u4ee5\u53c2\u8003\u6587\u6863\u6b65\u9aa4\u624b\u52a8\u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u5df2\u8bbe\u7f6e\u8fc7\u6b64 Bucket \u7684\u8de8\u57df\u7b56\u7565\uff0c\u6b64\u6b65\u9aa4\u53ef\u4ee5\u8df3\u8fc7\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:E,color:"secondary",variant:"contained",className:a.button,onClick:function(){return b(!0),void Ze.b.post("/admin/policy/cors",{id:W}).then((function(){K("top","right","\u8de8\u57df\u7b56\u7565\u5df2\u6dfb\u52a0","success"),u(5)})).catch((function(e){K("top","right",e.message,"error")})).then((function(){b(!1)}))},classes:{label:a.viewButtonLabel}},"\u8ba9 Cloudreve \u5e2e\u6211\u8bbe\u7f6e")))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){u((function(e){return e+1})),g((function(e){var a=new Set(e.values());return a.add(o),a}))}},"\u8df3\u8fc7")," ")),5===o&&l.a.createElement("form",{className:a.stepContent},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"COS \u5b58\u50a8\u6876 \u5ba2\u6237\u7aef\u76f4\u4f20\u9700\u8981\u501f\u52a9\u817e\u8baf\u4e91\u7684",l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/scf/index?rid=16",target:"_blank"},"\u4e91\u51fd\u6570"),"\u4ea7\u54c1\u4ee5\u786e\u4fdd\u4e0a\u4f20\u56de\u8c03\u53ef\u63a7\u3002\u5982\u679c\u60a8\u6253\u7b97\u5c06\u6b64\u5b58\u50a8\u7b56\u7565\u81ea\u7528\uff0c\u6216\u8005\u5206\u914d\u7ed9\u53ef\u4fe1\u8d56\u7528\u6237\u7ec4\uff0c\u6b64\u6b65\u9aa4\u53ef\u4ee5\u8df3\u8fc7\u3002 \u5982\u679c\u662f\u4f5c\u4e3a\u516c\u6709\u4f7f\u7528\uff0c\u8bf7\u52a1\u5fc5\u521b\u5efa\u56de\u8c03\u4e91\u51fd\u6570\u3002",l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement(k.a,{variant:"body2"},"Cloudreve \u53ef\u4ee5\u5c1d\u8bd5\u5e2e\u4f60\u81ea\u52a8\u521b\u5efa\u56de\u8c03\u4e91\u51fd\u6570\uff0c\u8bf7\u9009\u62e9 COS \u5b58\u50a8\u6876 \u6240\u5728\u5730\u57df\u540e\u7ee7\u7eed\u3002 \u521b\u5efa\u53ef\u80fd\u4f1a\u82b1\u8d39\u6570\u79d2\u949f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u3002\u521b\u5efa\u524d\u8bf7\u786e\u4fdd\u60a8\u7684\u817e\u8baf\u4e91\u8d26\u53f7\u5df2\u5f00\u542f\u4e91\u51fd\u6570\u670d\u52a1\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u6876\u6240\u5728\u5730\u533a"),l.a.createElement(ia.a,{value:q,onChange:function(e){return L(e.target.value)},required:!0},l.a.createElement(ca.a,{value:"ap-beijing"},"\u534e\u5317\u5730\u533a(\u5317\u4eac)"),l.a.createElement(ca.a,{value:"ap-chengdu"},"\u897f\u5357\u5730\u533a(\u6210\u90fd)"),l.a.createElement(ca.a,{value:"ap-guangzhou"},"\u534e\u5357\u5730\u533a(\u5e7f\u5dde)"),l.a.createElement(ca.a,{value:"ap-guangzhou-open"},"\u534e\u5357\u5730\u533a(\u5e7f\u5ddeOpen)"),l.a.createElement(ca.a,{value:"ap-hongkong"},"\u6e2f\u6fb3\u53f0\u5730\u533a(\u4e2d\u56fd\u9999\u6e2f)"),l.a.createElement(ca.a,{value:"ap-mumbai"},"\u4e9a\u592a\u5357\u90e8(\u5b5f\u4e70)"),l.a.createElement(ca.a,{value:"ap-shanghai"},"\u534e\u4e1c\u5730\u533a(\u4e0a\u6d77)"),l.a.createElement(ca.a,{value:"ap-singapore"},"\u4e9a\u592a\u4e1c\u5357(\u65b0\u52a0\u5761)"),l.a.createElement(ca.a,{value:"na-siliconvalley"},"\u7f8e\u56fd\u897f\u90e8(\u7845\u8c37)"),l.a.createElement(ca.a,{value:"na-toronto"},"\u5317\u7f8e\u5730\u533a(\u591a\u4f26\u591a)")))),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:E,color:"secondary",variant:"contained",className:a.button,onClick:function(){return b(!0),void Ze.b.post("/admin/policy/scf",{id:W,region:q}).then((function(){K("top","right","\u56de\u8c03\u4e91\u51fd\u6570\u5df2\u6dfb\u52a0","success"),u(6)})).catch((function(e){K("top","right",e.message,"error")})).then((function(){b(!1)}))},classes:{label:a.viewButtonLabel}},"\u8ba9 Cloudreve \u5e2e\u6211\u521b\u5efa")))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){u((function(e){return e+1})),g((function(e){var a=new Set(e.values());return a.add(o),a}))}},"\u8df3\u8fc7")," ")),6===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===y,isFile:!0,onClose:function(){return C("")}}),l.a.createElement(pt,{open:"path"===y,onClose:function(){return C("")}}))}var ht=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)}}})),ft=[{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8bbe\u7f6e",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function gt(e){var a=ht(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=l.a.useState(new Set),h=Object(n.a)(v,1)[0],f=Object(r.useState)(""),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(r.useState)("false"),C=Object(n.a)(y,2),S=C[0],j=C[1],_=Object(r.useState)(e.policy?e.policy:{Type:"local",Name:"",DirNameRule:"uploads/{uid}/{path}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",BaseURL:"",IsPrivate:"true",MaxSize:"0",OptionsSerialized:{file_type:"",chunk_size:25<<20}}),x=Object(n.a)(_,2),z=x[0],w=x[1],D=function(e){return function(a){w(Object(m.a)(Object(m.a)({},z),{},Object(s.a)({},e,a.target.value)))}},R=function(e){return function(a){w(Object(m.a)(Object(m.a)({},z),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},z.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},I=Object(Z.d)(),F=Object(r.useCallback)((function(e,a,t,n){return I(Object($e.R)(e,a,t,n))}),[I]);return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0","\u672c\u673a\u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},ft.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,h.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),b(!0),Ze.b.post("/admin/policy/test/path",{path:z.DirNameRule}).then((function(){u(1)})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)}))}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:z.DirNameRule,onChange:D("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:z.AutoRename,onChange:D("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===z.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===z.AutoRename,value:z.FileNameRule,onChange:D("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:z.IsOriginLinkEnable,onChange:D("IsOriginLinkEnable"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement(lt.a,{in:"true"===z.IsOriginLinkEnable},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u5bf9\u4e0b\u8f7d/\u76f4\u94fe\u4f7f\u7528 CDN\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u65f6\u7684 URL \u4e2d\u7684\u57df\u540d\u90e8\u5206\u4f1a\u88ab\u66ff\u6362\u4e3a CDN \u57df\u540d\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:S,onChange:function(e){"false"===e.target.value&&w(Object(m.a)(Object(m.a)({},z),{},{BaseURL:""})),j(e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(lt.a,{in:"true"===S},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u9009\u62e9\u534f\u8bae\u5e76\u586b\u5199 CDN \u57df\u540d"),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:z.BaseURL,onChange:D("BaseURL"),required:"true"===z.IsOriginLinkEnable&&"true"===S,label:"CDN \u524d\u7f00"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===z.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?w(Object(m.a)(Object(m.a)({},z),{},{MaxSize:"10485760"})):w(Object(m.a)(Object(m.a)({},z),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==z.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:z.MaxSize,onChange:D("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==z.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===z.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?w(Object(m.a)(Object(m.a)({},z),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},z.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):w(Object(m.a)(Object(m.a)({},z),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},z.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==z.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==z.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:z.OptionsSerialized.file_type,onChange:R("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(3,["0"!==z.MaxSize,""!==z.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u6307\u5b9a\u5206\u7247\u4e0a\u4f20\u65f6\u7684\u5206\u7247\u5927\u5c0f\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u4f7f\u7528\u5206\u7247\u4e0a\u4f20\u3002",l.a.createElement("br",null),"\u542f\u7528\u5206\u7247\u4e0a\u4f20\u540e\uff0c\u7528\u6237\u4e0a\u4f20\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u5207\u5206\u6210\u5206\u7247\u9010\u4e2a\u4e0a\u4f20\u5230\u5b58\u50a8\u7aef\uff0c\u5f53\u4e0a\u4f20\u4e2d\u65ad\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ece\u4e0a\u6b21\u4e0a\u4f20\u7684\u5206\u7247\u540e\u7ee7\u7eed\u5f00\u59cb\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:z.OptionsSerialized.chunk_size,onChange:R("chunk_size"),min:0,max:0x8000000000000000,label:"\u5206\u7247\u4e0a\u4f20\u5927\u5c0f"})))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},z);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),"false"!==S&&"false"!==z.IsOriginLinkEnable||(t.BaseURL=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.IsPrivate="true"===t.IsPrivate,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(){F("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4)})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:z.Name,onChange:D("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),4===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===O,isFile:!0,onClose:function(){return N("")}}),l.a.createElement(pt,{open:"path"===O,onClose:function(){return N("")}}))}var Ot=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"}}}})),Nt=[{title:"\u5e94\u7528\u6388\u6743",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8bbe\u7f6e",optional:!1},{title:"\u8d26\u53f7\u6388\u6743",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function yt(e){var a=Ot(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=l.a.useState(new Set),h=Object(n.a)(v,1)[0],f=Object(r.useState)(""),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(r.useState)(!(!e.policy||!e.policy.OptionsSerialized.od_proxy)&&""!==e.policy.OptionsSerialized.od_proxy),C=Object(n.a)(y,2),S=C[0],j=C[1],_=Object(r.useState)(!(!e.policy||!e.policy.OptionsSerialized.od_driver)&&""!==e.policy.OptionsSerialized.od_driver),x=Object(n.a)(_,2),z=x[0],w=x[1],D=Object(r.useState)(e.policy?e.policy:{Type:"onedrive",Name:"",BucketName:"",SecretKey:"",AccessKey:"",BaseURL:"",Server:"https://graph.microsoft.com/v1.0",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",od_redirect:"",od_proxy:"",od_driver:"",chunk_size:50<<20,placeholder_with_size:"false"}}),R=Object(n.a)(D,2),I=R[0],F=R[1],W=Object(r.useState)(e.policy?e.policy.ID:0),P=Object(n.a)(W,2),T=P[0],A=P[1],q=Object(r.useState)(!1),L=Object(n.a)(q,2),B=L[0],M=L[1],U=function(e){return function(a){F(Object(m.a)(Object(m.a)({},I),{},Object(s.a)({},e,a.target.value)))}},K=function(e){return function(a){F(Object(m.a)(Object(m.a)({},I),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},I.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},H=Object(Z.d)(),G=Object(r.useCallback)((function(e,a,t,n){return H(Object($e.R)(e,a,t,n))}),[H]);Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:["siteURL"]}).then((function(e){e.data.siteURL.startsWith("https://")||M(!0),""===I.OptionsSerialized.od_redirect&&F(Object(m.a)(Object(m.a)({},I),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},I.OptionsSerialized),{},{od_redirect:new URL("https://pan_api.114514cn.me/api/v3/callback/onedrive/auth",e.data.siteURL).toString()})}))})).catch((function(e){G("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement(pa,{open:B,onClose:function(){return M(!1)},title:"\u8b66\u544a",msg:"\u60a8\u5fc5\u987b\u542f\u7528 HTTPS \u624d\u80fd\u4f7f\u7528 OneDrive/SharePoint \u5b58\u50a8\u7b56\u7565\uff1b\u542f\u7528\u540e\u540c\u6b65\u66f4\u6539 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL\u3002"}),l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," OneDrive/SharePoint \u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},Nt.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,h.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(Ca.a,{href:"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview",target:"_blank"},"Azure Active Directory \u63a7\u5236\u53f0 (\u56fd\u9645\u7248\u8d26\u53f7)")," ","\u6216\u8005"," ",l.a.createElement(Ca.a,{href:"https://portal.azure.cn/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview",target:"_blank"},"Azure Active Directory \u63a7\u5236\u53f0 (\u4e16\u7eaa\u4e92\u8054\u8d26\u53f7)"),"\u5e76\u767b\u5f55\uff0c\u767b\u5f55\u540e\u8fdb\u5165",l.a.createElement("code",null,"Azure Active Directory"),"\u7ba1\u7406\u9762\u677f\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8fdb\u5165\u5de6\u4fa7 ",l.a.createElement("code",null,"\u5e94\u7528\u6ce8\u518c")," \u83dc\u5355\uff0c\u5e76\u70b9\u51fb"," ",l.a.createElement("code",null,"\u65b0\u6ce8\u518c")," \u6309\u94ae\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u586b\u5199\u5e94\u7528\u6ce8\u518c\u8868\u5355\u3002\u5176\u4e2d\uff0c\u540d\u79f0\u53ef\u4efb\u53d6\uff1b",l.a.createElement("code",null,"\u53d7\u652f\u6301\u7684\u5e10\u6237\u7c7b\u578b")," \u9009\u62e9\u4e3a",l.a.createElement("code",null,"\u4efb\u4f55\u7ec4\u7ec7\u76ee\u5f55(\u4efb\u4f55 Azure AD \u76ee\u5f55 - \u591a\u79df\u6237)\u4e2d\u7684\u5e10\u6237"),"\uff1b",l.a.createElement("code",null,"\u91cd\u5b9a\u5411 URI (\u53ef\u9009)"),"\u8bf7\u9009\u62e9",l.a.createElement("code",null,"Web"),"\uff0c\u5e76\u586b\u5199",l.a.createElement("code",null,I.OptionsSerialized.od_redirect),"\uff1b \u5176\u4ed6\u4fdd\u6301\u9ed8\u8ba4\u5373\u53ef"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u521b\u5efa\u5b8c\u6210\u540e\u8fdb\u5165\u5e94\u7528\u7ba1\u7406\u7684",l.a.createElement("code",null,"\u6982\u89c8"),"\u9875\u9762\uff0c\u590d\u5236",l.a.createElement("code",null,"\u5e94\u7528\u7a0b\u5e8f(\u5ba2\u6237\u7aef) ID"),"\u5e76\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5e94\u7528\u7a0b\u5e8f(\u5ba2\u6237\u7aef) ID"),l.a.createElement(ra.a,{required:!0,value:I.BucketName,onChange:U("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8fdb\u5165\u5e94\u7528\u7ba1\u7406\u9875\u9762\u5de6\u4fa7\u7684",l.a.createElement("code",null,"\u8bc1\u4e66\u548c\u5bc6\u7801"),"\u83dc\u5355\uff0c\u70b9\u51fb",l.a.createElement("code",null,"\u65b0\u5efa\u5ba2\u6237\u7aef\u5bc6\u7801"),"\u6309\u94ae\uff0c",l.a.createElement("code",null,"\u622a\u6b62\u671f\u9650"),"\u9009\u62e9\u4e3a",l.a.createElement("code",null,"\u4ece\u4e0d"),"\u3002\u521b\u5efa\u5b8c\u6210\u540e\u5c06\u5ba2\u6237\u7aef\u5bc6\u7801\u7684\u503c\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5ba2\u6237\u7aef\u5bc6\u7801"),l.a.createElement(ra.a,{required:!0,value:I.SecretKey,onChange:U("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u9009\u62e9\u60a8\u7684 Microsoft 365 \u8d26\u53f7\u7c7b\u578b\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:I.Server,onChange:U("Server"),row:!0},l.a.createElement(ua.a,{value:"https://graph.microsoft.com/v1.0",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u56fd\u9645\u7248"}),l.a.createElement(ua.a,{value:"https://microsoftgraph.chinacloudapi.cn/v1.0",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e16\u7eaa\u4e92\u8054\u7248"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"7")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5c06\u6587\u4ef6\u5b58\u653e\u5728 SharePoint \u4e2d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:z.toString(),onChange:function(e){w("true"===e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5b58\u5230\u6307\u5b9a SharePoint \u4e2d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5b58\u5230\u8d26\u53f7\u9ed8\u8ba4 OneDrive \u9a71\u52a8\u5668\u4e2d"})))),l.a.createElement(lt.a,{in:z},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"SharePoint \u7ad9\u70b9\u5730\u5740"),l.a.createElement(ra.a,{placeholder:"https://example.sharepoint.com/sites/demo",value:I.OptionsSerialized.od_driver,onChange:K("od_driver"),required:z,label:"SharePoint \u7ad9\u70b9\u5730\u5740"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"8")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u5728\u6587\u4ef6\u4e0b\u8f7d\u65f6\u66ff\u6362\u4e3a\u4f7f\u7528\u81ea\u5efa\u7684\u53cd\u4ee3\u670d\u52a1\u5668\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:S.toString(),onChange:function(e){j("true"===e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))),l.a.createElement(lt.a,{in:S},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ut,{value:I.OptionsSerialized.od_proxy,onChange:K("od_proxy"),required:S,label:"\u53cd\u4ee3\u670d\u52a1\u5668\u5730\u5740"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"9")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:I.Name,onChange:U("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:I.DirNameRule,onChange:U("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:I.AutoRename,onChange:U("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===I.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===I.AutoRename,value:I.FileNameRule,onChange:U("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:I.IsOriginLinkEnable,onChange:function(e){U("IsOriginLinkEnable")(e)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},I);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),"https://graph.microsoft.com/v1.0"===t.Server?t.BaseURL="https://login.microsoftonline.com/common/oauth2/v2.0":t.BaseURL="https://login.chinacloudapi.cn/common/oauth2",S||(t.OptionsSerialized.od_proxy=""),z||(t.OptionsSerialized.od_driver=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(a){G("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4),A(a.data)})).catch((function(e){G("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===I.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?F(Object(m.a)(Object(m.a)({},I),{},{MaxSize:"10485760"})):F(Object(m.a)(Object(m.a)({},I),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==I.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:I.MaxSize,onChange:U("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==I.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===I.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?F(Object(m.a)(Object(m.a)({},I),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},I.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):F(Object(m.a)(Object(m.a)({},I),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},I.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==I.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==I.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:I.OptionsSerialized.file_type,onChange:K("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(3,["0"!==I.MaxSize,""!==I.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u6307\u5b9a\u5206\u7247\u4e0a\u4f20\u65f6\u7684\u5206\u7247\u5927\u5c0f\uff0cOneDrive \u8981\u6c42\u5fc5\u987b\u4e3a 320 KiB (327,680 bytes) \u7684\u6574\u6570\u500d\u3002",l.a.createElement("br",null),"\u542f\u7528\u5206\u7247\u4e0a\u4f20\u540e\uff0c\u7528\u6237\u4e0a\u4f20\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u5207\u5206\u6210\u5206\u7247\u9010\u4e2a\u4e0a\u4f20\u5230\u5b58\u50a8\u7aef\uff0c\u5f53\u4e0a\u4f20\u4e2d\u65ad\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ece\u4e0a\u6b21\u4e0a\u4f20\u7684\u5206\u7247\u540e\u7ee7\u7eed\u5f00\u59cb\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:I.OptionsSerialized.chunk_size,onChange:K("chunk_size"),min:0,max:0x8000000000000000,label:"\u5206\u7247\u4e0a\u4f20\u5927\u5c0f"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(4,["0"!==I.MaxSize,""!==I.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u518d\u7528\u6237\u5f00\u59cb\u4e0a\u4f20\u65f6\u5c31\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6\u5e76\u6263\u9664\u7528\u6237\u5bb9\u91cf\uff1f\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u9632\u6b62\u7528\u6237\u6076\u610f\u53d1\u8d77\u591a\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u4f46\u4e0d\u5b8c\u6210\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:I.OptionsSerialized.placeholder_with_size,onChange:K("placeholder_with_size"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u521b\u5efa"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(4)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff0c\u4f46\u662f\u4f60\u9700\u8981\u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\uff0c\u5e76\u4f7f\u7528 OneDrive \u767b\u5f55\u6388\u6743\u4ee5\u5b8c\u6210\u521d\u59cb\u5316\u540e\u624d\u80fd\u4f7f\u7528\u3002 \u65e5\u540e\u4f60\u53ef\u4ee5\u5728\u5b58\u50a8\u7b56\u7565\u5217\u8868\u9875\u9762\u91cd\u65b0\u8fdb\u884c\u6388\u6743\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:E,color:"secondary",variant:"contained",className:a.button,onClick:function(){b(!0),Ze.b.get("/admin/policy/"+T+"/oauth").then((function(e){window.location.href=e.data})).catch((function(e){G("top","right",e.message,"error"),b(!1)}))},classes:{label:a.viewButtonLabel}},"\u8f6c\u5230\u6388\u6743\u9875\u9762")))),l.a.createElement("div",{className:a.stepFooter})),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2\u6dfb\u52a0\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===O,isFile:!0,onClose:function(){return N("")}}),l.a.createElement(pt,{open:"path"===O,onClose:function(){return N("")}}))}var Ct=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"}}}})),St=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8bbe\u7f6e",optional:!1},{title:"\u8de8\u57df\u7b56\u7565",optional:!0},{title:"\u5b8c\u6210",optional:!1}];function jt(e){var a=Ct(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=l.a.useState(new Set),h=Object(n.a)(v,2),f=h[0],g=h[1],O=Object(r.useState)(""),N=Object(n.a)(O,2),y=N[0],C=N[1],S=Object(r.useState)("false"),j=Object(n.a)(S,2),_=j[0],x=j[1],z=Object(r.useState)(!(!e.policy||!e.policy.OptionsSerialized.server_side_endpoint)&&""!==e.policy.OptionsSerialized.server_side_endpoint),w=Object(n.a)(z,2),D=w[0],R=w[1],I=Object(r.useState)(e.policy?e.policy:{Type:"oss",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",Server:"",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",server_side_endpoint:"",chunk_size:25<<20,placeholder_with_size:"false"}}),F=Object(n.a)(I,2),W=F[0],P=F[1],T=Object(r.useState)(e.policy?e.policy.ID:0),A=Object(n.a)(T,2),q=A[0],L=A[1],B=function(e){return function(a){P(Object(m.a)(Object(m.a)({},W),{},Object(s.a)({},e,a.target.value)))}},M=function(e){return function(a){P(Object(m.a)(Object(m.a)({},W),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},W.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},U=Object(Z.d)(),K=Object(r.useCallback)((function(e,a,t,n){return U(Object($e.R)(e,a,t,n))}),[U]),H=function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},W);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),"false"===_&&(t.BaseURL=""),D||(t.OptionsSerialized.server_side_endpoint=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(a){K("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4),L(a.data)})).catch((function(e){K("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)};return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u963f\u91cc\u4e91 OSS \u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},St.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,f.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4f7f\u7528 \u963f\u91cc\u4e91 OSS \u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(Ca.a,{href:"https://oss.console.aliyun.com/overview",target:"_blank"},"OSS \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa Bucket\u3002\u6ce8\u610f\uff1a\u521b\u5efa\u7a7a\u95f4\u7c7b\u578b\u53ea\u80fd\u9009\u62e9",l.a.createElement("code",null,"\u6807\u51c6\u5b58\u50a8"),"\u6216",l.a.createElement("code",null,"\u4f4e\u9891\u8bbf\u95ee"),"\uff0c\u6682\u4e0d\u652f\u6301",l.a.createElement("code",null,"\u5f52\u6863\u5b58\u50a8")))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199\u60a8\u521b\u5efa Bucket \u65f6\u6307\u5b9a\u7684",l.a.createElement("code",null,"Bucket \u540d\u79f0"),"\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Bucket \u540d\u79f0"),l.a.createElement(ra.a,{required:!0,value:W.BucketName,onChange:B("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u9009\u62e9\u60a8\u521b\u5efa\u7684\u7a7a\u95f4\u7684\u8bfb\u5199\u6743\u9650\u7c7b\u578b\uff0c\u63a8\u8350\u9009\u62e9\u201c\u79c1\u6709\u201d\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u201c\u83b7\u53d6\u76f4\u94fe\u201d\u529f\u80fd\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:W.IsPrivate,onChange:B("IsPrivate"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u79c1\u6709"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u516c\u5171\u8bfb"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f6c\u5230\u6240\u521b\u5efa Bucket \u7684\u6982\u89c8\u9875\u9762\uff0c\u586b\u5199",l.a.createElement("code",null,"\u8bbf\u95ee\u57df\u540d"),"\u680f\u76ee\u4e0b",l.a.createElement("code",null,"\u5916\u7f51\u8bbf\u95ee")," \u4e00\u884c\u4e2d\u95f4\u7684"," ",l.a.createElement("code",null,"EndPoint\uff08\u5730\u57df\u8282\u70b9\uff09")),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"EndPoint"),l.a.createElement(ra.a,{required:!0,value:W.Server,onChange:B("Server"),inputProps:{pattern:"(?:(?:(?<thld>[\\w\\-]*)(?:\\.))?(?<sld>[\\w\\-]*))\\.(?<tld>[\\w\\-]*)",title:"\u683c\u5f0f\u4e0d\u5408\u6cd5\uff0c\u53ea\u9700\u8f93\u5165\u57df\u540d\u90e8\u5206\u5373\u53ef"}}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5982\u679c\u60a8\u7684 Cloudreve \u90e8\u7f72\u5728\u963f\u91cc\u4e91\u8ba1\u7b97\u670d\u52a1\u4e2d\uff0c\u5e76\u4e14\u4e0e OSS \u5904\u5728\u540c\u4e00\u53ef\u7528\u533a\u4e0b\uff0c\u60a8\u53ef\u4ee5\u989d\u5916\u6307\u5b9a\u4f7f\u7528\u5185\u7f51 EndPoint \u4ee5\u8282\u7701\u6d41\u91cf\u5f00\u59cb\u3002\u662f\u5426\u8981\u5728\u670d\u52a1\u7aef\u53d1\u9001\u8bf7\u6c42\u65f6\u4f7f\u7528 OSS \u5185\u7f51 EndPoint\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:D.toString(),onChange:function(e){R("true"===e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))),l.a.createElement(lt.a,{in:D},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5185\u7f51 EndPoint"),l.a.createElement(ra.a,{required:D,value:W.OptionsSerialized.server_side_endpoint,onChange:M("server_side_endpoint"),inputProps:{pattern:"(?:(?:(?<thld>[\\w\\-]*)(?:\\.))?(?<sld>[\\w\\-]*))\\.(?<tld>[\\w\\-]*)",title:"\u683c\u5f0f\u4e0d\u5408\u6cd5\uff0c\u53ea\u9700\u8f93\u5165\u57df\u540d\u90e8\u5206\u5373\u53ef"}})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u4f7f\u7528\u914d\u5957\u7684 \u963f\u91cc\u4e91CDN \u52a0\u901f OSS \u8bbf\u95ee\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:_,onChange:function(e){x(e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(lt.a,{in:"true"===_},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"7")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(Ca.a,{href:"https://cdn.console.aliyun.com/domain/list",target:"_blank"},"\u963f\u91cc\u4e91 CDN \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u8bbe\u5b9a\u6e90\u7ad9\u4e3a\u521a\u521b\u5efa\u7684 OSS Bucket\u3002\u5728\u4e0b\u65b9\u586b\u5199 CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u9009\u62e9\u662f\u5426\u4f7f\u7528 HTTPS\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:W.BaseURL,onChange:B("BaseURL"),required:"true"===_,label:"CDN \u52a0\u901f\u57df\u540d"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(7,["true"===_]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u963f\u91cc\u4e91",l.a.createElement(Ca.a,{href:"https://usercenter.console.aliyun.com/#/manage/ak",target:"_blank"},"\u5b89\u5168\u4fe1\u606f\u7ba1\u7406"),"\u9875\u9762\u83b7\u53d6 \u7528\u6237 AccessKey\uff0c\u5e76\u586b\u5199\u5728\u4e0b\u65b9\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"AccessKey ID"),l.a.createElement(ra.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:W.AccessKey,onChange:B("AccessKey")}))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Access Key Secret"),l.a.createElement(ra.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:W.SecretKey,onChange:B("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(8,["true"===_]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:W.Name,onChange:B("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),C("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:W.DirNameRule,onChange:B("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),C("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:W.AutoRename,onChange:B("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===W.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===W.AutoRename,value:W.FileNameRule,onChange:B("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:W.IsOriginLinkEnable,onChange:function(e){"true"!==W.IsPrivate||"true"!==e.target.value?B("IsOriginLinkEnable")(e):K("top","right","\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u6b64\u529f\u80fd","warning")},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:H},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===W.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?P(Object(m.a)(Object(m.a)({},W),{},{MaxSize:"10485760"})):P(Object(m.a)(Object(m.a)({},W),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==W.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:W.MaxSize,onChange:B("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==W.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===W.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?P(Object(m.a)(Object(m.a)({},W),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},W.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):P(Object(m.a)(Object(m.a)({},W),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},W.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==W.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==W.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:W.OptionsSerialized.file_type,onChange:M("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(3,["0"!==W.MaxSize,""!==W.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u6307\u5b9a\u5206\u7247\u4e0a\u4f20\u65f6\u7684\u5206\u7247\u5927\u5c0f\uff0c\u8303\u56f4 100 KB ~ 5 GB\u3002",l.a.createElement("br",null),"\u542f\u7528\u5206\u7247\u4e0a\u4f20\u540e\uff0c\u7528\u6237\u4e0a\u4f20\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u5207\u5206\u6210\u5206\u7247\u9010\u4e2a\u4e0a\u4f20\u5230\u5b58\u50a8\u7aef\uff0c\u5f53\u4e0a\u4f20\u4e2d\u65ad\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ece\u4e0a\u6b21\u4e0a\u4f20\u7684\u5206\u7247\u540e\u7ee7\u7eed\u5f00\u59cb\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:W.OptionsSerialized.chunk_size,onChange:M("chunk_size"),min:102400,max:5368709120,label:"\u5206\u7247\u4e0a\u4f20\u5927\u5c0f"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(4,["0"!==W.MaxSize,""!==W.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u518d\u7528\u6237\u5f00\u59cb\u4e0a\u4f20\u65f6\u5c31\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6\u5e76\u6263\u9664\u7528\u6237\u5bb9\u91cf\uff1f\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u9632\u6b62\u7528\u6237\u6076\u610f\u53d1\u8d77\u591a\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u4f46\u4e0d\u5b8c\u6210\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:W.OptionsSerialized.placeholder_with_size,onChange:M("placeholder_with_size"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u521b\u5efa"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:H},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"OSS Bucket \u9700\u8981\u6b63\u786e\u914d\u7f6e\u8de8\u57df\u7b56\u7565\u540e\u624d\u80fd\u4f7f\u7528 Web \u7aef\u4e0a\u4f20\u6587\u4ef6\uff0cCloudreve \u53ef\u4ee5\u5e2e\u60a8\u81ea\u52a8\u8bbe\u7f6e\uff0c\u60a8\u4e5f\u53ef\u4ee5\u53c2\u8003\u6587\u6863\u6b65\u9aa4\u624b\u52a8\u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u5df2\u8bbe\u7f6e\u8fc7\u6b64 Bucket \u7684\u8de8\u57df\u7b56\u7565\uff0c\u6b64\u6b65\u9aa4\u53ef\u4ee5\u8df3\u8fc7\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:E,color:"secondary",variant:"contained",className:a.button,onClick:function(){return b(!0),void Ze.b.post("/admin/policy/cors",{id:q}).then((function(){K("top","right","\u8de8\u57df\u7b56\u7565\u5df2\u6dfb\u52a0","success"),u(5)})).catch((function(e){K("top","right",e.message,"error")})).then((function(){b(!1)}))},classes:{label:a.viewButtonLabel}},"\u8ba9 Cloudreve \u5e2e\u6211\u8bbe\u7f6e")))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){u((function(e){return e+1})),g((function(e){var a=new Set(e.values());return a.add(o),a}))}},"\u8df3\u8fc7")," ")),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===y,isFile:!0,onClose:function(){return C("")}}),l.a.createElement(pt,{open:"path"===y,onClose:function(){return C("")}}))}var kt=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)}}})),_t=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8bbe\u7f6e",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function xt(e){var a=kt(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=l.a.useState(new Set),h=Object(n.a)(v,1)[0],f=Object(r.useState)(""),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(r.useState)(e.policy?e.policy:{Type:"qiniu",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",mimetype:"",chunk_size:25<<20,placeholder_with_size:"false"}}),C=Object(n.a)(y,2),S=C[0],j=C[1],_=function(e){return function(a){j(Object(m.a)(Object(m.a)({},S),{},Object(s.a)({},e,a.target.value)))}},x=function(e){return function(a){j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},z=Object(Z.d)(),w=Object(r.useCallback)((function(e,a,t,n){return z(Object($e.R)(e,a,t,n))}),[z]);return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u4e03\u725b \u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},_t.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,h.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4f7f\u7528\u4e03\u725b\u5b58\u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(Ca.a,{href:"https://portal.qiniu.com/create",target:"_blank"},"\u4e03\u725b\u63a7\u5236\u9762\u677f"),"\u521b\u5efa\u5bf9\u8c61\u5b58\u50a8\u8d44\u6e90\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199\u60a8\u5728\u4e03\u725b\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4\u65f6\u6307\u5b9a\u7684\u201c\u5b58\u50a8\u7a7a\u95f4\u540d\u79f0\u201d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7a7a\u95f4\u540d\u79f0"),l.a.createElement(ra.a,{required:!0,value:S.BucketName,onChange:_("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u9009\u62e9\u60a8\u521b\u5efa\u7684\u7a7a\u95f4\u7c7b\u578b\uff0c\u63a8\u8350\u9009\u62e9\u201c\u79c1\u6709\u7a7a\u95f4\u201d\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u201c\u83b7\u53d6\u76f4\u94fe\u201d\u529f\u80fd\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:S.IsPrivate,onChange:_("IsPrivate"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u79c1\u6709"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u516c\u6709"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u586b\u5199\u60a8\u4e3a\u5b58\u50a8\u7a7a\u95f4\u7ed1\u5b9a\u7684 CDN \u52a0\u901f\u57df\u540d\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:S.BaseURL,onChange:_("BaseURL"),required:!0,label:"CDN \u52a0\u901f\u57df\u540d"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e03\u725b\u63a7\u5236\u9762\u677f\u8fdb\u5165 \u4e2a\u4eba\u4e2d\u5fc3 - \u5bc6\u94a5\u7ba1\u7406\uff0c\u5728\u4e0b\u65b9\u586b\u5199\u83b7\u5f97\u5230\u7684 AK\u3001SK\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"AK"),l.a.createElement(ra.a,{required:!0,value:S.AccessKey,onChange:_("AccessKey")}))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"SK"),l.a.createElement(ra.a,{required:!0,value:S.SecretKey,onChange:_("SecretKey")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:S.DirNameRule,onChange:_("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:S.AutoRename,onChange:_("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===S.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===S.AutoRename,value:S.FileNameRule,onChange:_("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:S.IsOriginLinkEnable,onChange:function(e){"true"!==S.IsPrivate||"true"!==e.target.value?_("IsOriginLinkEnable")(e):w("top","right","\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u6b64\u529f\u80fd","warning")},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(4)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===S.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?j(Object(m.a)(Object(m.a)({},S),{},{MaxSize:"10485760"})):j(Object(m.a)(Object(m.a)({},S),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==S.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:S.MaxSize,onChange:_("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===S.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==S.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:S.OptionsSerialized.file_type,onChange:x("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(3,["0"!==S.MaxSize,""!==S.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6 MimeType\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===S.OptionsSerialized.mimetype?"false":"true",onChange:function(e){"true"===e.target.value?j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},{mimetype:"image/*"})})):j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},{mimetype:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==S.OptionsSerialized.mimetype},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(4,["0"!==S.MaxSize,""!==S.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684 MimeType\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00\u3002\u4e03\u725b\u670d\u52a1\u5668\u4f1a\u4fa6\u6d4b\u6587\u4ef6\u5185\u5bb9\u4ee5\u5224\u65ad MimeType\uff0c\u518d\u7528\u5224\u65ad\u503c\u8ddf\u6307\u5b9a\u503c\u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\u5219\u5141\u8bb8\u4e0a\u4f20"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"MimeType \u5217\u8868"),l.a.createElement(ra.a,{value:S.OptionsSerialized.mimetype,onChange:x("mimetype")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(4,["0"!==S.MaxSize,""!==S.OptionsSerialized.file_type,""!==S.OptionsSerialized.mimetype]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u6307\u5b9a\u5206\u7247\u4e0a\u4f20\u65f6\u7684\u5206\u7247\u5927\u5c0f\uff0c\u8303\u56f4 1 MB - 1 GB\u3002",l.a.createElement("br",null),"\u542f\u7528\u5206\u7247\u4e0a\u4f20\u540e\uff0c\u7528\u6237\u4e0a\u4f20\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u5207\u5206\u6210\u5206\u7247\u9010\u4e2a\u4e0a\u4f20\u5230\u5b58\u50a8\u7aef\uff0c\u5f53\u4e0a\u4f20\u4e2d\u65ad\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ece\u4e0a\u6b21\u4e0a\u4f20\u7684\u5206\u7247\u540e\u7ee7\u7eed\u5f00\u59cb\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:S.OptionsSerialized.chunk_size,onChange:x("chunk_size"),min:1<<20,max:1024<<20,label:"\u5206\u7247\u4e0a\u4f20\u5927\u5c0f"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(5,["0"!==S.MaxSize,""!==S.OptionsSerialized.file_type,""!==S.OptionsSerialized.mimetype]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u518d\u7528\u6237\u5f00\u59cb\u4e0a\u4f20\u65f6\u5c31\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6\u5e76\u6263\u9664\u7528\u6237\u5bb9\u91cf\uff1f\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u9632\u6b62\u7528\u6237\u6076\u610f\u53d1\u8d77\u591a\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u4f46\u4e0d\u5b8c\u6210\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:S.OptionsSerialized.placeholder_with_size,onChange:x("placeholder_with_size"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u521b\u5efa"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},S);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(){w("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(5)})).catch((function(e){w("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:S.Name,onChange:_("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(3)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===O,isFile:!0,onClose:function(){return N("")}}),l.a.createElement(pt,{open:"path"===O,onClose:function(){return N("")}}))}var zt=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontSize:"14px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"},pre:{margin:"24px 0",padding:"12px 18px",overflow:"auto",direction:"ltr",borderRadius:"4px",backgroundColor:"#272c34",color:"#fff"}}}})),wt=[{title:"\u5b58\u50a8\u7aef\u914d\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8bbe\u7f6e",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function Dt(e){var a=zt(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=l.a.useState(new Set),h=Object(n.a)(v,1)[0],f=Object(r.useState)(""),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(r.useState)("false"),C=Object(n.a)(y,2),S=C[0],j=C[1],_=Object(r.useState)(e.policy?e.policy:{Type:"remote",Name:"",Server:"https://example.com:5212",SecretKey:Object(Ja.n)(64),DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",BaseURL:"",IsPrivate:"true",MaxSize:"0",OptionsSerialized:{file_type:"",chunk_size:25<<20}}),x=Object(n.a)(_,2),z=x[0],w=x[1],D=function(e){return function(a){w(Object(m.a)(Object(m.a)({},z),{},Object(s.a)({},e,a.target.value)))}},R=function(e){return function(a){w(Object(m.a)(Object(m.a)({},z),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},z.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},I=Object(Z.d)(),F=Object(r.useCallback)((function(e,a,t,n){return I(Object($e.R)(e,a,t,n))}),[I]);return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0","\u4ece\u673a\u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},wt.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,h.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement(wa.a,{severity:"info",style:{marginBottom:10}},"\u4ece\u673a\u5b58\u50a8\u7b56\u7565\u5141\u8bb8\u4f60\u4f7f\u7528\u540c\u6837\u8fd0\u884c\u4e86 Cloudreve \u7684\u670d\u52a1\u5668\u4f5c\u4e3a\u5b58\u50a8\u7aef\uff0c \u7528\u6237\u4e0a\u4f20\u4e0b\u8f7d\u6d41\u91cf\u901a\u8fc7 HTTP \u76f4\u4f20\u3002"),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5c06\u548c\u4e3b\u7ad9\u76f8\u540c\u7248\u672c\u7684 Cloudreve \u7a0b\u5e8f\u62f7\u8d1d\u81f3\u8981\u4f5c\u4e3a\u4ece\u673a\u7684\u670d\u52a1\u5668\u4e0a\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e0b\u65b9\u4e3a\u7cfb\u7edf\u4e3a\u60a8\u968f\u673a\u751f\u6210\u7684\u4ece\u673a\u7aef\u5bc6\u94a5\uff0c\u4e00\u822c\u65e0\u9700\u6539\u52a8\uff0c\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u9700\u6c42\uff0c \u53ef\u5c06\u60a8\u7684\u5bc6\u94a5\u586b\u5165\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u4ece\u673a\u5bc6\u94a5"),l.a.createElement(ra.a,{required:!0,inputProps:{minlength:64},value:z.SecretKey,onChange:D("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4fee\u6539\u4ece\u673a\u914d\u7f6e\u6587\u4ef6\u3002",l.a.createElement("br",null),"\u5728\u4ece\u673a\u7aef Cloudreve \u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u65b0\u5efa",l.a.createElement("code",null,"conf.ini"),"\u6587\u4ef6\uff0c\u586b\u5165\u4ece\u673a\u914d\u7f6e\uff0c\u542f\u52a8/\u91cd\u542f\u4ece\u673a\u7aef Cloudreve\u3002 \u4ee5\u4e0b\u4e3a\u4e00\u4e2a\u53ef\u4f9b\u53c2\u8003\u7684\u914d\u7f6e\u4f8b\u5b50\uff0c\u5176\u4e2d\u5bc6\u94a5\u90e8\u5206\u5df2\u5e2e\u60a8\u586b\u5199\u4e3a\u4e0a\u4e00\u6b65\u6240\u751f\u6210\u7684\u3002"),l.a.createElement("pre",null,"[System]",l.a.createElement("br",null),"Mode = slave",l.a.createElement("br",null),"Listen = :5212",l.a.createElement("br",null),l.a.createElement("br",null),"[Slave]",l.a.createElement("br",null),"Secret = ",z.SecretKey,l.a.createElement("br",null),l.a.createElement("br",null),"[CORS]",l.a.createElement("br",null),"AllowOrigins = *",l.a.createElement("br",null),"AllowMethods = OPTIONS,GET,POST",l.a.createElement("br",null),"AllowHeaders = *",l.a.createElement("br",null)),l.a.createElement(k.a,{variant:"body2"},"\u4ece\u673a\u7aef\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u5927\u81f4\u4e0e\u4e3b\u7ad9\u7aef\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\uff1a",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"System"),"\u5206\u533a\u4e0b\u7684",l.a.createElement("code",null,"mode"),"\u5b57\u6bb5\u5fc5\u987b\u66f4\u6539\u4e3a",l.a.createElement("code",null,"slave")),l.a.createElement("li",null,"\u5fc5\u987b\u6307\u5b9a",l.a.createElement("code",null,"Slave"),"\u5206\u533a\u4e0b\u7684",l.a.createElement("code",null,"Secret"),"\u5b57\u6bb5\uff0c\u5176\u503c\u4e3a\u7b2c\u4e8c\u6b65\u91cc\u586b\u5199\u6216\u751f\u6210\u7684\u5bc6\u94a5\u3002"),l.a.createElement("li",null,"\u5fc5\u987b\u542f\u52a8\u8de8\u57df\u914d\u7f6e\uff0c\u5373",l.a.createElement("code",null,"CORS"),"\u5b57\u6bb5\u7684\u5185\u5bb9\uff0c \u5177\u4f53\u53ef\u53c2\u8003\u4e0a\u6587\u8303\u4f8b\u6216\u5b98\u65b9\u6587\u6863\u3002\u5982\u679c\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u7528\u6237\u5c06\u65e0\u6cd5\u901a\u8fc7 Web \u7aef\u5411\u4ece\u673a\u4e0a\u4f20\u6587\u4ef6\u3002"))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u586b\u5199\u4ece\u673a\u5730\u5740\u3002",l.a.createElement("br",null),"\u5982\u679c\u4e3b\u7ad9\u542f\u7528\u4e86 HTTPS\uff0c\u4ece\u673a\u4e5f\u9700\u8981\u542f\u7528\uff0c\u5e76\u5728\u4e0b\u65b9\u586b\u5165 HTTPS \u534f\u8bae\u7684\u5730\u5740\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u4ece\u673a\u5730\u5740"),l.a.createElement(ra.a,{fullWidth:!0,required:!0,type:"url",value:z.Server,onChange:D("Server")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4e0b\u65b9\u7684\u6d4b\u8bd5\u6309\u94ae\u6d4b\u8bd5\u901a\u4fe1\u662f\u5426\u6b63\u5e38\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:E,onClick:function(){return b(!0),void Ze.b.post("/admin/policy/test/slave",{server:z.Server,secret:z.SecretKey}).then((function(){F("top","right","\u901a\u4fe1\u6b63\u5e38","success")})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)}))},variant:"outlined",color:"primary"},"\u6d4b\u8bd5\u4ece\u673a\u901a\u4fe1")))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:z.DirNameRule,onChange:D("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:z.AutoRename,onChange:D("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===z.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===z.AutoRename,value:z.FileNameRule,onChange:D("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:z.IsOriginLinkEnable,onChange:D("IsOriginLinkEnable"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement(lt.a,{in:"true"===z.IsOriginLinkEnable},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u5bf9\u4e0b\u8f7d/\u76f4\u94fe\u4f7f\u7528 CDN\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u65f6\u7684 URL \u4e2d\u7684\u57df\u540d\u90e8\u5206\u4f1a\u88ab\u66ff\u6362\u4e3a CDN \u57df\u540d\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:S,onChange:function(e){"false"===e.target.value&&w(Object(m.a)(Object(m.a)({},z),{},{BaseURL:""})),j(e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(lt.a,{in:"true"===S},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u9009\u62e9\u534f\u8bae\u5e76\u586b\u5199 CDN \u57df\u540d"),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:z.BaseURL,onChange:D("BaseURL"),required:"true"===z.IsOriginLinkEnable&&"true"===S,label:"CDN \u524d\u7f00"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(4)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===z.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?w(Object(m.a)(Object(m.a)({},z),{},{MaxSize:"10485760"})):w(Object(m.a)(Object(m.a)({},z),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==z.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:z.MaxSize,onChange:D("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==z.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===z.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?w(Object(m.a)(Object(m.a)({},z),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},z.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):w(Object(m.a)(Object(m.a)({},z),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},z.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==z.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==z.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:z.OptionsSerialized.file_type,onChange:R("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(3,["0"!==z.MaxSize,""!==z.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u6307\u5b9a\u5206\u7247\u4e0a\u4f20\u65f6\u7684\u5206\u7247\u5927\u5c0f\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u4f7f\u7528\u5206\u7247\u4e0a\u4f20\u3002",l.a.createElement("br",null),"\u542f\u7528\u5206\u7247\u4e0a\u4f20\u540e\uff0c\u7528\u6237\u4e0a\u4f20\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u5207\u5206\u6210\u5206\u7247\u9010\u4e2a\u4e0a\u4f20\u5230\u5b58\u50a8\u7aef\uff0c\u5f53\u4e0a\u4f20\u4e2d\u65ad\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ece\u4e0a\u6b21\u4e0a\u4f20\u7684\u5206\u7247\u540e\u7ee7\u7eed\u5f00\u59cb\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:z.OptionsSerialized.chunk_size,onChange:R("chunk_size"),min:0,max:0x8000000000000000,label:"\u5206\u7247\u4e0a\u4f20\u5927\u5c0f"})))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},z);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),"false"!==S&&"false"!==z.IsOriginLinkEnable||(t.BaseURL=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.IsPrivate="true"===t.IsPrivate,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(){F("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(5)})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:z.Name,onChange:D("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(3)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===O,isFile:!0,isSlave:!0,onClose:function(){return N("")}}),l.a.createElement(pt,{open:"path"===O,isSlave:!0,onClose:function(){return N("")}}))}var Rt=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)}}})),It=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function Ft(e){var a=Rt(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=l.a.useState(new Set),h=Object(n.a)(v,1)[0],f=Object(r.useState)(""),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(r.useState)(e.policy?e.policy:{Type:"upyun",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",IsPrivate:"false",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",token:""}}),C=Object(n.a)(y,2),S=C[0],j=C[1],_=function(e){return function(a){j(Object(m.a)(Object(m.a)({},S),{},Object(s.a)({},e,a.target.value)))}},x=function(e){return function(a){j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},z=Object(Z.d)(),w=Object(r.useCallback)((function(e,a,t,n){return z(Object($e.R)(e,a,t,n))}),[z]);return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u53c8\u62cd\u4e91 \u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},It.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,h.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(Ca.a,{href:"https://console.upyun.com/services/create/file/",target:"_blank"},"\u53c8\u62cd\u4e91\u9762\u677f"),"\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199\u6240\u521b\u5efa\u7684\u670d\u52a1\u540d\u79f0\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u670d\u52a1\u540d\u79f0"),l.a.createElement(ra.a,{required:!0,value:S.BucketName,onChange:_("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e3a\u6b64\u670d\u52a1\u521b\u5efa\u6216\u6388\u6743\u6709\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5220\u9664\u6743\u9650\u7684\u64cd\u4f5c\u5458\uff0c\u7136\u540e\u5c06\u64cd\u4f5c\u5458\u4fe1\u606f\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u64cd\u4f5c\u5458\u540d"),l.a.createElement(ra.a,{required:!0,value:S.AccessKey,onChange:_("AccessKey")}))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u64cd\u4f5c\u5458\u5bc6\u7801"),l.a.createElement(ra.a,{required:!0,value:S.SecretKey,onChange:_("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u586b\u5199\u4e3a\u4e91\u5b58\u50a8\u670d\u52a1\u7ed1\u5b9a\u7684\u57df\u540d\uff0c\u5e76\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u662f\u5426\u4f7f\u7528 HTTPS\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:S.BaseURL,onChange:_("BaseURL"),required:!0,label:"\u52a0\u901f\u57df\u540d"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u6b64\u6b65\u9aa4\u53ef\u4fdd\u6301\u9ed8\u8ba4\u5e76\u8df3\u8fc7\uff0c\u4f46\u662f\u5f3a\u70c8\u5efa\u8bae\u60a8\u8ddf\u968f\u6b64\u6b65\u9aa4\u64cd\u4f5c\u3002",l.a.createElement("br",null),"\u524d\u5f80\u6240\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u7684 \u529f\u80fd\u914d\u7f6e \u9762\u677f\uff0c\u8f6c\u5230 \u8bbf\u95ee\u914d\u7f6e \u9009\u9879\u5361\uff0c\u5f00\u542f Token \u9632\u76d7\u94fe\u5e76\u8bbe\u5b9a\u5bc6\u7801\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:S.IsPrivate,onChange:_("IsPrivate"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5df2\u5f00\u542f Token \u9632\u76d7\u94fe"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u672a\u5f00\u542f Token \u9632\u76d7\u94fe"})))))),l.a.createElement(lt.a,{in:"true"===S.IsPrivate},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u586b\u5199\u60a8\u6240\u8bbe\u7f6e\u7684 Token \u9632\u76d7\u94fe \u5bc6\u94a5"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Token \u9632\u76d7\u94fe \u5bc6\u94a5"),l.a.createElement(ra.a,{value:S.OptionsSerialized.token,onChange:x("token"),required:"true"===S.IsPrivate})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:S.DirNameRule,onChange:_("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",onClick:function(e){e.preventDefault(),N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:S.AutoRename,onChange:_("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===S.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===S.AutoRename,value:S.FileNameRule,onChange:_("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:S.IsOriginLinkEnable,onChange:function(e){"true"!==S.IsPrivate||"true"!==e.target.value?_("IsOriginLinkEnable")(e):w("top","right","\u5f00\u542f Token \u9632\u76d7\u94fe\u540e\u65e0\u6cd5\u4f7f\u7528\u76f4\u94fe\u529f\u80fd","warning")},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(4)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===S.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?j(Object(m.a)(Object(m.a)({},S),{},{MaxSize:"10485760"})):j(Object(m.a)(Object(m.a)({},S),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==S.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:S.MaxSize,onChange:_("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===S.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):j(Object(m.a)(Object(m.a)({},S),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},S.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==S.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:S.OptionsSerialized.file_type,onChange:x("file_type")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},S);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(){w("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(5)})).catch((function(e){w("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:S.Name,onChange:_("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(3)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===O,isFile:!0,onClose:function(){return N("")}}),l.a.createElement(pt,{open:"path"===O,onClose:function(){return N("")}}))}var Wt=t(8084),Pt=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"},pre:{margin:"24px 0",padding:"12px 18px",overflow:"auto",direction:"ltr",borderRadius:"4px",backgroundColor:"#272c34",color:"#fff"}}}})),Tt=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u8de8\u57df\u7b56\u7565",optional:!0},{title:"\u5b8c\u6210",optional:!1}],At={"us-east-2":"US East (Ohio)","us-east-1":"US East (N. Virginia)","us-west-1":"US West (N. California)","us-west-2":"US West (Oregon)","af-south-1":"Africa (Cape Town)","ap-east-1":"Asia Pacific (Hong Kong)","ap-south-1":"Asia Pacific (Mumbai)","ap-northeast-3":"Asia Pacific (Osaka-Local)","ap-northeast-2":"Asia Pacific (Seoul)","ap-southeast-1":"Asia Pacific (Singapore)","ap-southeast-2":"Asia Pacific (Sydney)","ap-northeast-1":"Asia Pacific (Tokyo)","ca-central-1":"Canada (Central)","cn-north-1":"China (Beijing)","cn-northwest-1":"China (Ningxia)","eu-central-1":"Europe (Frankfurt)","eu-west-1":"Europe (Ireland)","eu-west-2":"Europe (London)","eu-south-1":"Europe (Milan)","eu-west-3":"Europe (Paris)","eu-north-1":"Europe (Stockholm)","me-south-1":"Middle East (Bahrain)","sa-east-1":"South America (S\xe3o Paulo)"};function qt(e){var a=Pt(),t=Object(Q.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(!0),h=Object(n.a)(v,2),f=h[0],g=h[1],O=l.a.useState(new Set),N=Object(n.a)(O,2),y=N[0],C=N[1],S=Object(r.useState)(""),j=Object(n.a)(S,2),_=j[0],x=j[1],z=Object(r.useState)("false"),w=Object(n.a)(z,2),D=w[0],R=w[1],I=Object(r.useState)(e.policy?e.policy:{Type:"s3",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",Server:"",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",region:"us-east-2",chunk_size:25<<20,placeholder_with_size:"false"}}),F=Object(n.a)(I,2),W=F[0],P=F[1],T=Object(r.useState)(e.policy?e.policy.ID:0),A=Object(n.a)(T,2),q=A[0],L=A[1],B=function(e){return function(a){P(Object(m.a)(Object(m.a)({},W),{},Object(s.a)({},e,a.target.value)))}},M=function(e){return function(a){P(Object(m.a)(Object(m.a)({},W),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},W.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},U=Object(Z.d)(),K=Object(r.useCallback)((function(e,a,t,n){return U(Object($e.R)(e,a,t,n))}),[U]),H=function(a){a.preventDefault(),b(!0);var t=Object(m.a)({},W);t.OptionsSerialized=Object(m.a)({},t.OptionsSerialized),"false"===D&&(t.BaseURL=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.chunk_size=parseInt(t.OptionsSerialized.chunk_size),t.OptionsSerialized.placeholder_with_size="true"===t.OptionsSerialized.placeholder_with_size,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:t}).then((function(a){K("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4),L(a.data)})).catch((function(e){K("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)};return l.a.createElement("div",null,l.a.createElement(pa,{open:f,onClose:function(){return g(!1)},title:"\u8b66\u544a",msg:"S3 \u7c7b\u578b\u5b58\u50a8\u7b56\u7565\u76ee\u524d\u4ec5\u53ef\u7528\u4e8e\u81ea\u5df1\u4f7f\u7528\uff0c\u6216\u8005\u662f\u7ed9\u53d7\u4fe1\u4efb\u7684\u7528\u6237\u7ec4\u4f7f\u7528\u3002"}),l.a.createElement(k.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," Amazon S3 \u5b58\u50a8\u7b56\u7565"),l.a.createElement(st.a,{activeStep:o},Tt.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,y.has(t)&&(n.completed=!1),l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u524d\u5f80 AWS S3 \u63a7\u5236\u53f0\u521b\u5efa\u5b58\u50a8\u6876\uff0c\u5728\u4e0b\u65b9\u586b\u5199\u60a8\u521b\u5efa\u5b58\u50a8\u6876\u65f6\u6307\u5b9a\u7684",l.a.createElement("code",null,"\u5b58\u50a8\u6876\u540d\u79f0"),"\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u6876\u540d\u79f0"),l.a.createElement(ra.a,{required:!0,value:W.BucketName,onChange:B("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u9009\u62e9\u60a8\u521b\u5efa\u7684\u7a7a\u95f4\u7684\u516c\u5171\u8bbf\u95ee\u6743\u9650\u7c7b\u578b\uff0c\u63a8\u8350\u9009\u62e9\u201c\u79c1\u6709\u201d\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u201c\u83b7\u53d6\u76f4\u94fe\u201d\u529f\u80fd\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:W.IsPrivate,onChange:B("IsPrivate"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u963b\u6b62\u5168\u90e8\u516c\u5171\u8bbf\u95ee\u6743\u9650"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8\u516c\u5171\u8bfb\u53d6"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"(\u53ef\u9009) \u6307\u5b9a\u5b58\u50a8\u6876\u7684 EndPoint\uff08\u5730\u57df\u8282\u70b9\uff09\uff0c \u586b\u5199\u4e3a\u5b8c\u6574\u7684 URL \u683c\u5f0f\uff0c\u6bd4\u5982"," ",l.a.createElement("code",null,"https://bucket.region.example.com"),"\u3002 \u7559\u7a7a\u5219\u5c06\u4f7f\u7528\u7cfb\u7edf\u751f\u6210\u7684\u9ed8\u8ba4\u63a5\u5165\u70b9\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"EndPoint"),l.a.createElement(ra.a,{value:W.Server,onChange:B("Server")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u9009\u62e9\u5b58\u50a8\u6876\u6240\u5728\u7684\u533a\u57df\uff0c\u6216\u8005\u624b\u52a8\u8f93\u5165\u533a\u57df\u4ee3\u7801"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(Wt.a,{options:Object.keys(At),freeSolo:!0,value:W.OptionsSerialized.region,onInputChange:function(e,a){return M("region")({target:{value:a}})},renderOption:function(e){return l.a.createElement(l.a.Fragment,null,At[e])},renderInput:function(e){return l.a.createElement(va.a,Object.assign({style:{width:"100%"}},e))}}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u4f7f\u7528 CDN \u52a0\u901f\u8bbf\u95ee\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:D,onChange:function(e){R(e.target.value)},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(lt.a,{in:"true"===D},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"CDN \u52a0\u901f\u57df\u540d"),l.a.createElement("div",{className:a.form},l.a.createElement(ut,{value:W.BaseURL,onChange:B("BaseURL"),required:"true"===D,label:"CDN \u52a0\u901f\u57df\u540d"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(6,["true"===D]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u83b7\u53d6\u8bbf\u95ee\u5bc6\u94a5\uff0c\u5e76\u586b\u5199\u5728\u4e0b\u65b9\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"AccessKey"),l.a.createElement(ra.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:W.AccessKey,onChange:B("AccessKey")}))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"SecretKey"),l.a.createElement(ra.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:W.SecretKey,onChange:B("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(7,["true"===D]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(ra.a,{required:!0,value:W.Name,onChange:B("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",href:"javascript:void()",onClick:function(){return x("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(ra.a,{required:!0,value:W.DirNameRule,onChange:B("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(Ca.a,{color:"secondary",href:"javascript:void()",onClick:function(){return x("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:W.AutoRename,onChange:B("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(lt.a,{in:"true"===W.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(ra.a,{required:"true"===W.AutoRename,value:W.FileNameRule,onChange:B("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:W.IsOriginLinkEnable,onChange:function(e){"true"!==W.IsPrivate||"true"!==e.target.value?B("IsOriginLinkEnable")(e):K("top","right","\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u6b64\u529f\u80fd","warning")},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:H},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:"0"===W.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?P(Object(m.a)(Object(m.a)({},W),{},{MaxSize:"10485760"})):P(Object(m.a)(Object(m.a)({},W),{},{MaxSize:"0"}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:"0"!==W.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:W.MaxSize,onChange:B("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==W.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:""===W.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?P(Object(m.a)(Object(m.a)({},W),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},W.OptionsSerialized),{},{file_type:"jpg,png,mp4,zip,rar"})})):P(Object(m.a)(Object(m.a)({},W),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},W.OptionsSerialized),{},{file_type:""})}))},row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(lt.a,{in:""!==W.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==W.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(ra.a,{value:W.OptionsSerialized.file_type,onChange:M("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(3,["0"!==W.MaxSize,""!==W.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u8bf7\u6307\u5b9a\u5206\u7247\u4e0a\u4f20\u65f6\u7684\u5206\u7247\u5927\u5c0f\uff0c\u8303\u56f4 5 MB ~ 5 GB\u3002",l.a.createElement("br",null),"\u542f\u7528\u5206\u7247\u4e0a\u4f20\u540e\uff0c\u7528\u6237\u4e0a\u4f20\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u5207\u5206\u6210\u5206\u7247\u9010\u4e2a\u4e0a\u4f20\u5230\u5b58\u50a8\u7aef\uff0c\u5f53\u4e0a\u4f20\u4e2d\u65ad\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4ece\u4e0a\u6b21\u4e0a\u4f20\u7684\u5206\u7247\u540e\u7ee7\u7eed\u5f00\u59cb\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Oa,{value:W.OptionsSerialized.chunk_size,onChange:M("chunk_size"),min:5<<20,max:53687091200,label:"\u5206\u7247\u4e0a\u4f20\u5927\u5c0f"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ja.i)(4,["0"!==W.MaxSize,""!==W.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u662f\u5426\u8981\u518d\u7528\u6237\u5f00\u59cb\u4e0a\u4f20\u65f6\u5c31\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6\u5e76\u6263\u9664\u7528\u6237\u5bb9\u91cf\uff1f\u5f00\u542f\u540e\uff0c\u53ef\u4ee5\u9632\u6b62\u7528\u6237\u6076\u610f\u53d1\u8d77\u591a\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u4f46\u4e0d\u5b8c\u6210\u4e0a\u4f20\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{"aria-label":"gender",name:"gender1",value:W.OptionsSerialized.placeholder_with_size,onChange:M("placeholder_with_size"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u521b\u5efa\u5360\u4f4d\u7b26\u6587\u4ef6"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u4e0d\u521b\u5efa"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(ve.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:H},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"S3 Bucket \u9700\u8981\u6b63\u786e\u914d\u7f6e\u8de8\u57df\u7b56\u7565\u540e\u624d\u80fd\u4f7f\u7528 Web \u7aef\u4e0a\u4f20\u6587\u4ef6\uff0cCloudreve \u53ef\u4ee5\u5e2e\u60a8\u81ea\u52a8\u8bbe\u7f6e\uff0c\u60a8\u4e5f\u53ef\u4ee5\u53c2\u8003\u6587\u6863\u6b65\u9aa4\u624b\u52a8\u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u5df2\u8bbe\u7f6e\u8fc7\u6b64 Bucket \u7684\u8de8\u57df\u7b56\u7565\uff0c\u6b64\u6b65\u9aa4\u53ef\u4ee5\u8df3\u8fc7\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:E,color:"secondary",variant:"contained",className:a.button,onClick:function(){return b(!0),void Ze.b.post("/admin/policy/cors",{id:q}).then((function(){K("top","right","\u8de8\u57df\u7b56\u7565\u5df2\u6dfb\u52a0","success"),u(5)})).catch((function(e){K("top","right",e.message,"error")})).then((function(){b(!1)}))},classes:{label:a.viewButtonLabel}},"\u8ba9 Cloudreve \u5e2e\u6211\u8bbe\u7f6e")))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"default",className:a.button,onClick:function(){u((function(e){return e+1})),C((function(e){var a=new Set(e.values());return a.add(o),a}))}},"\u8df3\u8fc7")," ")),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(pt,{open:"file"===_,isFile:!0,onClose:function(){return x("")}}),l.a.createElement(pt,{open:"path"===_,onClose:function(){return x("")}}))}var Lt=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)}}}));function Bt(){var e=Lt(),a=Object(Q.i)().type;return l.a.createElement("div",null,l.a.createElement(ze.a,{square:!0,className:e.content},"local"===a&&l.a.createElement(gt,null),"remote"===a&&l.a.createElement(Dt,null),"qiniu"===a&&l.a.createElement(xt,null),"oss"===a&&l.a.createElement(jt,null),"upyun"===a&&l.a.createElement(Ft,null),"cos"===a&&l.a.createElement(vt,null),"onedrive"===a&&l.a.createElement(yt,null),"s3"===a&&l.a.createElement(qt,null)))}function Mt(e){var a=Object(r.useState)(!1),t=Object(n.a)(a,2)[1],c=Object(r.useState)(e.policy),i=Object(n.a)(c,2),o=i[0],u=i[1],d=function(e){return function(a){u(Object(m.a)(Object(m.a)({},o),{},Object(s.a)({},e,a.target.value)))}},p=function(e){return function(a){u(Object(m.a)(Object(m.a)({},o),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},o.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}},E=Object(Z.d)(),b=Object(r.useCallback)((function(e,a,t,n){return E(Object($e.R)(e,a,t,n))}),[E]);return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},"\u7f16\u8f91\u5b58\u50a8\u7b56\u7565"),l.a.createElement(Ua.a,null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t(!0);var n=Object(m.a)({},o);n.OptionsSerialized=Object(m.a)({},n.OptionsSerialized),n.AutoRename="true"===n.AutoRename,n.IsPrivate="true"===n.IsPrivate,n.IsOriginLinkEnable="true"===n.IsOriginLinkEnable,n.MaxSize=parseInt(n.MaxSize),n.OptionsSerialized.chunk_size=parseInt(n.OptionsSerialized.chunk_size),n.OptionsSerialized.placeholder_with_size="true"===n.OptionsSerialized.placeholder_with_size,n.OptionsSerialized.file_type=n.OptionsSerialized.file_type.split(","),1===n.OptionsSerialized.file_type.length&&""===n.OptionsSerialized.file_type[0]&&(n.OptionsSerialized.file_type=[]),Ze.b.post("/admin/policy",{policy:n}).then((function(){b("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success")})).catch((function(e){b("top","right",e.message,"error")})).then((function(){t(!1)})),t(!1)}},l.a.createElement(Sa.a,{"aria-label":"simple table"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,null,l.a.createElement(ka.a,null,"\u8bbe\u7f6e\u9879"),l.a.createElement(ka.a,null,"\u503c"),l.a.createElement(ka.a,null,"\u63cf\u8ff0"))),l.a.createElement(ja.a,null,l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"ID"),l.a.createElement(ka.a,null,o.ID),l.a.createElement(ka.a,null,"\u5b58\u50a8\u7b56\u7565\u7f16\u53f7")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u7c7b\u578b"),l.a.createElement(ka.a,null,o.Type),l.a.createElement(ka.a,null,"\u5b58\u50a8\u7b56\u7565\u7c7b\u578b")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u540d\u79f0"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{required:!0,value:o.Name,onChange:d("Name")}))),l.a.createElement(ka.a,null,"\u5b58\u50a8\u7b56\u540d\u79f0")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"Server"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{value:o.Server,onChange:d("Server")}))),l.a.createElement(ka.a,null,"\u5b58\u50a8\u7aef Endpoint")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"BucketName"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{value:o.BucketName,onChange:d("BucketName")}))),l.a.createElement(ka.a,null,"\u5b58\u50a8\u6876\u6807\u8bc6")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u79c1\u6709\u7a7a\u95f4"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(it.a,{required:!0,value:o.IsPrivate,onChange:d("IsPrivate"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u662f"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5426"})))),l.a.createElement(ka.a,null,"\u662f\u5426\u4e3a\u79c1\u6709\u7a7a\u95f4")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u6587\u4ef6\u8d44\u6e90\u6839URL"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{value:o.BaseURL,onChange:d("BaseURL")}))),l.a.createElement(ka.a,null,"\u9884\u89c8/\u83b7\u53d6\u6587\u4ef6\u5916\u94fe\u65f6\u751f\u6210URL\u7684\u524d\u7f00")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"AccessKey"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,rowsMax:10,value:o.AccessKey,onChange:d("AccessKey")}))),l.a.createElement(ka.a,null,"AccessKey / \u5237\u65b0Token")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"SecretKey"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,rowsMax:10,value:o.SecretKey,onChange:d("SecretKey")}))),l.a.createElement(ka.a,null,"SecretKey")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u6700\u5927\u5355\u6587\u4ef6\u5c3a\u5bf8 (Bytes)"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{type:"number",inputProps:{min:0,step:1},value:o.MaxSize,onChange:d("MaxSize")}))),l.a.createElement(ka.a,null,"\u6700\u5927\u53ef\u4e0a\u4f20\u7684\u6587\u4ef6\u5c3a\u5bf8\uff0c\u586b\u5199\u4e3a0\u8868\u793a\u4e0d\u9650\u5236")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u81ea\u52a8\u91cd\u547d\u540d"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(it.a,{required:!0,value:o.AutoRename,onChange:d("AutoRename"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u662f"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5426"})))),l.a.createElement(ka.a,null,"\u662f\u5426\u6839\u636e\u89c4\u5219\u5bf9\u4e0a\u4f20\u7269\u7406\u6587\u4ef6\u91cd\u547d\u540d")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u5b58\u50a8\u8def\u5f84"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.DirNameRule,onChange:d("DirNameRule")}))),l.a.createElement(ka.a,null,"\u6587\u4ef6\u7269\u7406\u5b58\u50a8\u8def\u5f84")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u5b58\u50a8\u6587\u4ef6\u540d"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.FileNameRule,onChange:d("FileNameRule")}))),l.a.createElement(ka.a,null,"\u6587\u4ef6\u7269\u7406\u5b58\u50a8\u6587\u4ef6\u540d")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u5141\u8bb8\u83b7\u53d6\u5916\u94fe"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(it.a,{required:!0,value:o.IsOriginLinkEnable,onChange:d("IsOriginLinkEnable"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u662f"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5426"})))),l.a.createElement(ka.a,null,"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u5916\u94fe\u3002\u6ce8\u610f\uff0c\u67d0\u4e9b\u5b58\u50a8\u7b56\u7565\u7c7b\u578b\u4e0d\u652f\u6301\uff0c\u5373\u4f7f\u5728\u6b64\u5f00\u542f\uff0c\u83b7\u53d6\u7684\u5916\u94fe\u4e5f\u65e0\u6cd5\u4f7f\u7528\u3002")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u53c8\u62cd\u4e91\u9632\u76d7\u94fe Token"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.token,onChange:p("token")}))),l.a.createElement(ka.a,null,"\u4ec5\u5bf9\u53c8\u62cd\u4e91\u5b58\u50a8\u7b56\u7565\u6709\u6548")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u5141\u8bb8\u6587\u4ef6\u6269\u5c55\u540d"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.file_type,onChange:p("file_type")}))),l.a.createElement(ka.a,null,"\u7559\u7a7a\u8868\u793a\u4e0d\u9650\u5236")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u5141\u8bb8\u7684 MimeType"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.mimetype,onChange:p("mimetype")}))),l.a.createElement(ka.a,null,"\u4ec5\u5bf9\u4e03\u725b\u5b58\u50a8\u7b56\u7565\u6709\u6548")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"OneDrive \u91cd\u5b9a\u5411\u5730\u5740"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.od_redirect,onChange:p("od_redirect")}))),l.a.createElement(ka.a,null,"\u4e00\u822c\u6dfb\u52a0\u540e\u65e0\u9700\u4fee\u6539")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"OneDrive \u53cd\u4ee3\u670d\u52a1\u5668\u5730\u5740"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.od_proxy,onChange:p("od_proxy")}))),l.a.createElement(ka.a,null,"\u4ec5\u5bf9 OneDrive \u5b58\u50a8\u7b56\u7565\u6709\u6548")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"OneDrive/SharePoint \u9a71\u52a8\u5668\u8d44\u6e90\u6807\u8bc6"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.od_driver,onChange:p("od_driver")}))),l.a.createElement(ka.a,null,"\u4ec5\u5bf9 OneDrive \u5b58\u50a8\u7b56\u7565\u6709\u6548\uff0c\u7559\u7a7a\u5219\u4f7f\u7528\u7528\u6237\u7684\u9ed8\u8ba4 OneDrive \u9a71\u52a8\u5668")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"Amazon S3 Region"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.region,onChange:p("region")}))),l.a.createElement(ka.a,null,"\u4ec5\u5bf9 Amazon S3 \u5b58\u50a8\u7b56\u7565\u6709\u6548")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u5185\u7f51 EndPoint"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{multiline:!0,value:o.OptionsSerialized.server_side_endpoint,onChange:p("server_side_endpoint")}))),l.a.createElement(ka.a,null,"\u4ec5\u5bf9 OSS \u5b58\u50a8\u7b56\u7565\u6709\u6548")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u4e0a\u4f20\u5206\u7247\u5927\u5c0f (Bytes)"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(ra.a,{type:"number",inputProps:{min:0,step:1},value:o.OptionsSerialized.chunk_size,onChange:p("chunk_size")}))),l.a.createElement(ka.a,null,"\u5206\u7247\u4e0a\u4f20\u65f6\u5355\u4e2a\u5206\u7247\u7684\u5927\u5c0f\uff0c\u4ec5\u90e8\u5206\u5b58\u50a8\u7b56\u7565\u652f\u6301\u3002")),l.a.createElement(xa.a,null,l.a.createElement(ka.a,{component:"th",scope:"row"},"\u4e0a\u4f20\u524d\u9884\u652f\u7528\u6237\u5b58\u50a8"),l.a.createElement(ka.a,null,l.a.createElement(ta.a,null,l.a.createElement(it.a,{required:!0,value:o.OptionsSerialized.placeholder_with_size,onChange:p("placeholder_with_size"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u662f"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5426"})))),l.a.createElement(ka.a,null,"\u662f\u5426\u5728\u4e0a\u4f20\u4f1a\u8bdd\u521b\u5efa\u65f6\u5c31\u5bf9\u7528\u6237\u5b58\u50a8\u8fdb\u884c\u9884\u652f\uff0c\u4ec5\u90e8\u5206\u5b58\u50a8\u7b56\u7565\u652f\u6301\u3002")))),l.a.createElement(ve.a,{type:"submit",color:"primary",variant:"contained",style:{margin:8}},"\u4fdd\u5b58\u66f4\u6539"))))}var Ut=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)}}}));function Kt(){var e=Ut(),a=Object(r.useState)(""),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({}),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(Q.i)(),p=d.mode,E=d.id,b=Object(Z.d)(),v=Object(r.useCallback)((function(e,a,t,n){return b(Object($e.R)(e,a,t,n))}),[b]);return Object(r.useEffect)((function(){i(""),Ze.b.get("/admin/policy/"+E).then((function(e){e.data.IsOriginLinkEnable=e.data.IsOriginLinkEnable?"true":"false",e.data.AutoRename=e.data.AutoRename?"true":"false",e.data.MaxSize=e.data.MaxSize.toString(),e.data.OptionsSerialized.chunk_size=e.data.OptionsSerialized.chunk_size?e.data.OptionsSerialized.chunk_size.toString():0,e.data.IsPrivate=e.data.IsPrivate?"true":"false",e.data.OptionsSerialized.placeholder_with_size=e.data.OptionsSerialized.placeholder_with_size?"true":"false",e.data.OptionsSerialized.file_type=e.data.OptionsSerialized.file_type?e.data.OptionsSerialized.file_type.join(","):"",u(e.data),i(e.data.Type)})).catch((function(e){v("top","right",e.message,"error")}))}),[E]),l.a.createElement("div",null,l.a.createElement(ze.a,{square:!0,className:e.content},"guide"===p&&l.a.createElement(l.a.Fragment,null,"local"===c&&l.a.createElement(gt,{policy:s}),"remote"===c&&l.a.createElement(Dt,{policy:s}),"qiniu"===c&&l.a.createElement(xt,{policy:s}),"oss"===c&&l.a.createElement(jt,{policy:s}),"upyun"===c&&l.a.createElement(Ft,{policy:s}),"cos"===c&&l.a.createElement(vt,{policy:s}),"onedrive"===c&&l.a.createElement(yt,{policy:s}),"s3"===c&&l.a.createElement(qt,{policy:s})),"pro"===p&&""!==c&&l.a.createElement(Mt,{policy:s})))}var Ht=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{}}})),Gt=[{id:"#",label:"#",minWidth:50},{id:"name",label:"\u540d\u79f0",minWidth:170},{id:"type",label:"\u5b58\u50a8\u7b56\u7565",minWidth:170},{id:"count",label:"\u4e0b\u5c5e\u7528\u6237\u6570",minWidth:50,align:"right"},{id:"size",label:"\u6700\u5927\u5bb9\u91cf",minWidth:100,align:"right"},{id:"action",label:"\u64cd\u4f5c",minWidth:170,align:"right"}];function Vt(){var e=Ht(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)([]),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)(1),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(10),h=Object(n.a)(v,2),g=h[0],O=h[1],N=Object(r.useState)(0),y=Object(n.a)(N,2),C=y[0],S=y[1],j=l.a.useState({}),k=Object(n.a)(j,2),_=k[0],x=k[1],z=Object(Q.h)(),w=Object(Q.g)(),D=new URLSearchParams(Object(Q.h)().search),R=Object(Z.d)(),I=Object(r.useCallback)((function(e,a,t,n){return R(Object($e.R)(e,a,t,n))}),[R]),F=function(){Ze.b.post("/admin/group/list",{page:E,page_size:g,order_by:"id desc"}).then((function(e){i(e.data.items),u(e.data.statics),S(e.data.total),x(e.data.policies)})).catch((function(e){I("top","right",e.message,"error")}))};Object(r.useEffect)((function(){"0"===D.get("code")?I("top","right","\u6388\u6743\u6210\u529f","success"):D.get("msg")&&""!==D.get("msg")&&I("top","right",D.get("msg")+", "+D.get("err"),"warning")}),[z]),Object(r.useEffect)((function(){F()}),[E,g]);return l.a.createElement("div",null,l.a.createElement("div",{className:e.header},l.a.createElement(ve.a,{color:"primary",onClick:function(){return w.push("/admin/group/add")},variant:"contained"},"\u65b0\u5efa\u7528\u6237\u7ec4"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(ve.a,{color:"primary",onClick:function(){return F()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},Gt.map((function(e){return l.a.createElement(ka.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),l.a.createElement(ja.a,null,c.map((function(e){return l.a.createElement(xa.a,{hover:!0,key:e.ID},l.a.createElement(ka.a,null,e.ID),l.a.createElement(ka.a,null,e.Name),l.a.createElement(ka.a,null,null!==e.PolicyList&&e.PolicyList.map((function(a,t){var n="";return _[a]&&(n+=_[a].Name),t!==e.PolicyList.length-1&&(n+=" / "),n}))),l.a.createElement(ka.a,{align:"right"},void 0!==s[e.ID]&&s[e.ID].toLocaleString()),l.a.createElement(ka.a,{align:"right"},void 0!==s[e.ID]&&Object(Ja.p)(e.MaxStorage)),l.a.createElement(ka.a,{align:"right"},l.a.createElement(Ha.a,{title:"\u7f16\u8f91"},l.a.createElement(f.a,{onClick:function(){return w.push("/admin/group/edit/"+e.ID)},size:"small"},l.a.createElement(Ga.a,null))),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:function(){return a=e.ID,void Ze.b.delete("/admin/group/"+a).then((function(){F(),I("top","right","\u7528\u6237\u7ec4\u5df2\u5220\u9664","success")})).catch((function(e){I("top","right",e.message,"error")}));var a},size:"small"},l.a.createElement(za.a,null)))))}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,100],component:"div",count:C,rowsPerPage:g,page:E-1,onChangePage:function(e,a){return b(a+1)},onChangeRowsPerPage:function(e){O(e.target.value),b(1)}})))}var Jt=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function Xt(e){var a=Jt(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),i=c[0],o=c[1],u=Object(r.useState)(e.group?e.group:{ID:0,Name:"",MaxStorage:"1073741824",ShareEnabled:"true",WebDAVEnabled:"true",SpeedLimit:"0",PolicyList:1,OptionsSerialized:{share_download:"true",aria2_options:"{}",compress_size:"0",decompress_size:"0",source_batch:"0",aria2_batch:"1"}}),d=Object(n.a)(u,2),p=d[0],E=d[1],b=Object(r.useState)({}),v=Object(n.a)(b,2),h=v[0],f=v[1],g=Object(Q.g)(),O=Object(Z.d)(),N=Object(r.useCallback)((function(e,a,t,n){return O(Object($e.R)(e,a,t,n))}),[O]);Object(r.useEffect)((function(){Ze.b.post("/admin/policy/list",{page:1,page_size:1e4,order_by:"id asc",conditions:{}}).then((function(e){var a={};e.data.items.forEach((function(e){a[e.ID]=e.Name})),f(a)})).catch((function(e){N("top","right",e.message,"error")}))}),[]);var y=function(e){return function(a){E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},e,a.target.value)))}},C=function(e){return function(a){var t=a.target.checked?"true":"false";E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},e,t)))}},S=function(e){return function(a){var t=a.target.checked?"true":"false";E(Object(m.a)(Object(m.a)({},p),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},p.OptionsSerialized),{},Object(s.a)({},e,t))}))}},j=function(e){return function(a){E(Object(m.a)(Object(m.a)({},p),{},{OptionsSerialized:Object(m.a)(Object(m.a)({},p.OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t=Object(m.a)(Object(m.a)({},p),{},{OptionsSerialized:Object(m.a)({},p.OptionsSerialized)});["ShareEnabled","WebDAVEnabled"].forEach((function(e){t[e]="true"===t[e]})),["archive_download","archive_task","one_time_download","share_download","aria2"].forEach((function(e){void 0!==t.OptionsSerialized[e]&&(t.OptionsSerialized[e]="true"===t.OptionsSerialized[e])})),["MaxStorage","SpeedLimit"].forEach((function(e){t[e]=parseInt(t[e])})),["compress_size","decompress_size","source_batch","aria2_batch"].forEach((function(e){void 0!==t.OptionsSerialized[e]&&(t.OptionsSerialized[e]=parseInt(t.OptionsSerialized[e]))})),t.PolicyList=[parseInt(t.PolicyList)];try{t.OptionsSerialized.aria2_options=JSON.parse(t.OptionsSerialized.aria2_options)}catch(a){return void N("top","right","Aria2 \u8bbe\u7f6e\u9879\u683c\u5f0f\u9519\u8bef","warning")}o(!0),Ze.b.post("/admin/group",{group:t}).then((function(){g.push("/admin/group"),N("top","right","\u7528\u6237\u7ec4\u5df2"+(e.group?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success")})).catch((function(e){N("top","right",e.message,"error")})).then((function(){o(!1)}))}},l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},0===p.ID&&"\u65b0\u5efa\u7528\u6237\u7ec4",0!==p.ID&&"\u7f16\u8f91 "+p.Name),l.a.createElement("div",{className:a.formContainer},3!==p.ID&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7528\u6237\u7ec4\u540d"),l.a.createElement(ra.a,{value:p.Name,onChange:y("Name"),required:!0}),l.a.createElement(na.a,{id:"component-helper-text"},"\u7528\u6237\u7ec4\u7684\u540d\u79f0"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565"),l.a.createElement(ia.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",value:p.PolicyList,onChange:y("PolicyList"),input:l.a.createElement(ra.a,{id:"select-multiple-chip"})},Object.keys(h).map((function(e){return l.a.createElement(ca.a,{key:e,value:e},h[e])}))),l.a.createElement(na.a,{id:"component-helper-text"},"\u6307\u5b9a\u7528\u6237\u7ec4\u7684\u5b58\u50a8\u7b56\u7565\u3002"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(Oa,{value:p.MaxStorage,onChange:y("MaxStorage"),min:0,max:0x8000000000000000,label:"\u521d\u59cb\u5bb9\u91cf",required:!0})),l.a.createElement(na.a,{id:"component-helper-text"},"\u7528\u6237\u7ec4\u4e0b\u7684\u7528\u6237\u521d\u59cb\u53ef\u7528\u6700\u5927\u5bb9\u91cf"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(Oa,{value:p.SpeedLimit,onChange:y("SpeedLimit"),min:0,max:0x8000000000000000,label:"\u4e0b\u8f7d\u9650\u901f",suffix:"/s",required:!0})),l.a.createElement(na.a,{id:"component-helper-text"},"\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u9650\u5236\u3002\u5f00\u542f\u9650\u5236\u540e\uff0c \u6b64\u7528\u6237\u7ec4\u4e0b\u7684\u7528\u6237\u4e0b\u8f7d\u6240\u6709\u652f\u6301\u9650\u901f\u7684\u5b58\u50a8\u7b56\u7565\u4e0b\u7684\u6587\u4ef6\u65f6\uff0c\u4e0b\u8f7d\u6700\u5927\u901f\u5ea6\u4f1a\u88ab\u9650\u5236\u3002")),3!==p.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6279\u91cf\u751f\u6210\u5916\u94fe\u6570\u91cf\u9650\u5236"),l.a.createElement(ra.a,{multiline:!0,type:"number",inputProps:{min:1,step:1},value:p.OptionsSerialized.source_batch,onChange:j("source_batch")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u5bf9\u4e8e\u652f\u6301\u7684\u5b58\u50a8\u7b56\u7565\u4e0b\u7684\u6587\u4ef6\uff0c\u5141\u8bb8\u7528\u6237\u5355\u6b21\u6279\u91cf\u83b7\u53d6\u5916\u94fe\u7684\u6700\u5927\u6587\u4ef6\u6570\u91cf\uff0c\u586b\u5199\u4e3a 0 \u6216\u7a7a\u8868\u793a\u4e0d\u5141\u8bb8\u6279\u91cf\u751f\u6210\u5916\u94fe\u3002"))),3!==p.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"true"===p.ShareEnabled,onChange:C("ShareEnabled")}),label:"\u5141\u8bb8\u521b\u5efa\u5206\u4eab"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u5173\u95ed\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u521b\u5efa\u5206\u4eab\u94fe\u63a5"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"true"===p.OptionsSerialized.share_download,onChange:S("share_download")}),label:"\u5141\u8bb8\u4e0b\u8f7d\u5206\u4eab"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u5173\u95ed\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u4e0b\u8f7d\u522b\u4eba\u521b\u5efa\u7684\u6587\u4ef6\u5206\u4eab"))),3!==p.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"true"===p.WebDAVEnabled,onChange:C("WebDAVEnabled")}),label:"WebDAV"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u5173\u95ed\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u901a\u8fc7 WebDAV \u534f\u8bae\u8fde\u63a5\u81f3\u7f51\u76d8"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"true"===p.OptionsSerialized.one_time_download,onChange:S("one_time_download")}),label:"\u7981\u6b62\u591a\u6b21\u4e0b\u8f7d\u8bf7\u6c42"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u53ea\u9488\u5bf9\u672c\u673a\u5b58\u50a8\u7b56\u7565\u6709\u6548\u3002\u5f00\u542f\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u4f7f\u7528\u591a\u7ebf\u7a0b\u4e0b\u8f7d\u5de5\u5177\u3002"))),3!==p.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"true"===p.OptionsSerialized.aria2,onChange:S("aria2")}),label:"\u79bb\u7ebf\u4e0b\u8f7d"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u662f\u5426\u5141\u8bb8\u7528\u6237\u521b\u5efa\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1"))),l.a.createElement(lt.a,{in:"true"===p.OptionsSerialized.aria2},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Aria2 \u4efb\u52a1\u53c2\u6570"),l.a.createElement(ra.a,{multiline:!0,value:p.OptionsSerialized.aria2_options,onChange:j("aria2_options")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u6b64\u7528\u6237\u7ec4\u521b\u5efa\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1\u65f6\u989d\u5916\u643a\u5e26\u7684\u53c2\u6570\uff0c\u4ee5 JSON \u7f16\u7801\u540e\u7684\u683c\u5f0f\u4e66\u5199\uff0c\u60a8\u53ef\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u5199\u5728 Aria2 \u914d\u7f6e\u6587\u4ef6\u91cc\uff0c\u53ef\u7528\u53c2\u6570\u8bf7\u67e5\u9605\u5b98\u65b9\u6587\u6863"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Aria2 \u6279\u91cf\u4e0b\u8f7d\u6700\u5927\u6570\u91cf"),l.a.createElement(ra.a,{multiline:!0,type:"number",inputProps:{min:1,step:1},value:p.OptionsSerialized.aria2_batch,onChange:j("aria2_batch")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u5141\u8bb8\u7528\u6237\u5355\u6b21\u6279\u91cf\u521b\u5efa\u7684\u79bb\u7ebf\u4e0b\u8f7d\u94fe\u63a5\u7684\u6700\u5927\u6570\u91cf")))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"true"===p.OptionsSerialized.archive_download,onChange:S("archive_download")}),label:"\u670d\u52a1\u7aef\u6253\u5305\u4e0b\u8f7d"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u662f\u5426\u5141\u8bb8\u7528\u6237\u591a\u9009\u6587\u4ef6\u4f7f\u7528\u670d\u52a1\u7aef\u4e2d\u8f6c\u6253\u5305\u4e0b\u8f7d\uff0c\u5173\u95ed\u540e\uff0c\u7528\u6237\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u7eaf Web \u7aef\u6253\u5305\u4e0b\u8f7d\u529f\u80fd\u3002"))),3!==p.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"true"===p.OptionsSerialized.archive_task,onChange:S("archive_task")}),label:"\u538b\u7f29/\u89e3\u538b\u7f29 \u4efb\u52a1"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u662f\u5426\u7528\u6237\u521b\u5efa \u538b\u7f29/\u89e3\u538b\u7f29 \u4efb\u52a1"))),l.a.createElement(lt.a,{in:"true"===p.OptionsSerialized.archive_task},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(Oa,{value:p.OptionsSerialized.compress_size,onChange:j("compress_size"),min:0,max:0x8000000000000000,label:"\u5f85\u538b\u7f29\u6587\u4ef6\u6700\u5927\u5927\u5c0f"})),l.a.createElement(na.a,{id:"component-helper-text"},"\u7528\u6237\u53ef\u521b\u5efa\u7684\u538b\u7f29\u4efb\u52a1\u7684\u6587\u4ef6\u6700\u5927\u603b\u5927\u5c0f\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u9650\u5236")),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(Oa,{value:p.OptionsSerialized.decompress_size,onChange:j("decompress_size"),min:0,max:0x8000000000000000,label:"\u5f85\u89e3\u538b\u6587\u4ef6\u6700\u5927\u5927\u5c0f"})),l.a.createElement(na.a,{id:"component-helper-text"},"\u7528\u6237\u53ef\u521b\u5efa\u7684\u89e3\u538b\u7f29\u4efb\u52a1\u7684\u6587\u4ef6\u6700\u5927\u603b\u5927\u5c0f\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u9650\u5236"))))),l.a.createElement("div",{className:a.root},l.a.createElement(ve.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}function Yt(){var e=Object(r.useState)({}),a=Object(n.a)(e,2),t=a[0],c=a[1],i=Object(Q.i)().id,o=Object(Z.d)(),m=Object(r.useCallback)((function(e,a,t,n){return o(Object($e.R)(e,a,t,n))}),[o]);return Object(r.useEffect)((function(){c({}),Ze.b.get("/admin/group/"+i).then((function(e){if(["ShareEnabled","WebDAVEnabled"].forEach((function(a){e.data[a]=e.data[a]?"true":"false"})),["archive_download","archive_task","one_time_download","share_download","aria2"].forEach((function(a){void 0!==e.data.OptionsSerialized[a]&&(e.data.OptionsSerialized[a]=e.data.OptionsSerialized[a]?"true":"false")})),["MaxStorage","SpeedLimit"].forEach((function(a){e.data[a]=e.data[a].toString()})),["compress_size","decompress_size","source_batch","aria2_batch"].forEach((function(a){void 0!==e.data.OptionsSerialized[a]&&(e.data.OptionsSerialized[a]=e.data.OptionsSerialized[a].toString())})),e.data.PolicyList=e.data.PolicyList[0],void 0===e.data.OptionsSerialized.aria2_options)e.data.OptionsSerialized.aria2_options="{}";else try{e.data.OptionsSerialized.aria2_options=JSON.stringify(e.data.OptionsSerialized.aria2_options)}catch(a){return void m("top","right","Aria2 \u8bbe\u7f6e\u9879\u683c\u5f0f\u9519\u8bef","warning")}c(e.data)})).catch((function(e){m("top","right",e.message,"error")}))}),[i]),l.a.createElement("div",null,void 0!==t.ID&&l.a.createElement(Xt,{group:t}))}var $t=t(7090),Zt=t(7152),Qt=t(7157),en=t(8069),an=t(8070);function tn(e){var a=e.setFilter,t=e.setSearch,c=e.open,i=e.onClose,o=Object(r.useState)({group_id:"all",status:"all"}),u=Object(n.a)(o,2),d=u[0],p=u[1],E=Object(r.useState)([]),b=Object(n.a)(E,2),v=b[0],h=b[1],f=Object(r.useState)(""),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(Z.d)(),C=Object(r.useCallback)((function(e,a,t,n){return y(Object($e.R)(e,a,t,n))}),[y]),S=function(e){return function(a){p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},e,a.target.value)))}};Object(r.useEffect)((function(){Ze.b.get("/admin/groups").then((function(e){h(e.data)})).catch((function(e){C("top","right",e.message,"error")}))}),[]);return l.a.createElement(ye.a,{open:c,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"xs"},l.a.createElement(ke.a,{id:"alert-dialog-title"},"\u8fc7\u6ee4\u6761\u4ef6"),l.a.createElement(Se.a,null,l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{id:"demo-simple-select-label"},"\u7528\u6237\u7ec4"),l.a.createElement(ia.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d.group_id,onChange:S("group_id")},l.a.createElement(ca.a,{value:"all"},"\u5168\u90e8"),v.map((function(e){return 3===e.ID?null:l.a.createElement(ca.a,{key:e.ID,value:e.ID.toString()},e.Name)})))),l.a.createElement(ta.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(la.a,{id:"demo-simple-select-label"},"\u7528\u6237\u72b6\u6001"),l.a.createElement(ia.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d.status,onChange:S("status")},l.a.createElement(ca.a,{value:"all"},"\u5168\u90e8"),l.a.createElement(ca.a,{value:"0"},"\u6b63\u5e38"),l.a.createElement(ca.a,{value:"1"},"\u672a\u6fc0\u6d3b"),l.a.createElement(ca.a,{value:"2"},"\u88ab\u5c01\u7981"),l.a.createElement(ca.a,{value:"3"},"\u8d85\u989d\u4f7f\u7528\u88ab\u5c01\u7981"))),l.a.createElement(ta.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(va.a,{value:O,onChange:function(e){return N(e.target.value)},id:"standard-basic",label:"\u641c\u7d22 \u6635\u79f0 / \u7528\u6237\u540d"}))),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:i,color:"default"},"\u53d6\u6d88"),l.a.createElement(ve.a,{onClick:function(){var e={};Object.keys(d).forEach((function(a){"all"!==d[a]&&(e[a]=d[a])})),a(e),t(""!==O?{nick:O,email:O}:{}),i()},color:"primary"},"\u5e94\u7528")))}var nn=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(C.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function rn(){var e=nn(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),s=Object(n.a)(o,2),u=s[0],d=s[1],p=Object(r.useState)(10),E=Object(n.a)(p,2),b=E[0],v=E[1],h=Object(r.useState)(0),g=Object(n.a)(h,2),O=g[0],N=g[1],y=Object(r.useState)({}),C=Object(n.a)(y,2),_=C[0],x=C[1],z=Object(r.useState)({}),w=Object(n.a)(z,2),D=w[0],R=w[1],I=Object(r.useState)(["id","desc"]),F=Object(n.a)(I,2),W=F[0],P=F[1],T=Object(r.useState)(!1),A=Object(n.a)(T,2),q=A[0],L=A[1],B=Object(r.useState)([]),M=Object(n.a)(B,2),U=M[0],K=M[1],H=Object(r.useState)(!1),G=Object(n.a)(H,2),V=G[0],J=G[1],X=Object(Q.g)(),Y=Object(S.a)(),$=Object(Z.d)(),ee=Object(r.useCallback)((function(e,a,t,n){return $(Object($e.R)(e,a,t,n))}),[$]),ae=function(){Ze.b.post("/admin/user/list",{page:u,page_size:b,order_by:W.join(" "),conditions:_,searches:D}).then((function(e){i(e.data.items),N(e.data.total),K([])})).catch((function(e){ee("top","right",e.message,"error")}))};Object(r.useEffect)((function(){ae()}),[u,b,W,_,D]);var te=function(e){return-1!==U.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(tn,{filter:_,open:q,onClose:function(){return L(!1)},setSearch:R,setFilter:x}),l.a.createElement("div",{className:e.header},l.a.createElement(ve.a,{style:{alignSelf:"center"},color:"primary",onClick:function(){return X.push("/admin/user/add")},variant:"contained"},"\u65b0\u5efa\u7528\u6237"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ha.a,{title:"\u8fc7\u6ee4"},l.a.createElement(f.a,{style:{marginRight:8},onClick:function(){return L(!0)}},l.a.createElement($t.a,{color:"secondary",variant:"dot",invisible:0===Object.keys(D).length&&0===Object.keys(_).length},l.a.createElement(en.a,null)))),l.a.createElement(ve.a,{color:"primary",onClick:function(){return ae()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},U.length>0&&l.a.createElement(j.a,{className:e.highlight},l.a.createElement(k.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",U.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:function(){J(!0),Ze.b.post("/admin/user/delete",{id:U}).then((function(){ae(),ee("top","right","\u7528\u6237\u5df2\u5220\u9664","success")})).catch((function(e){ee("top","right",e.message,"error")})).then((function(){J(!1)}))},disabled:V,"aria-label":"delete"},l.a.createElement(za.a,null)))),l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{indeterminate:U.length>0&&U.length<c.length,checked:c.length>0&&U.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));K(a)}else K([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(ka.a,{style:{minWidth:59}},l.a.createElement(Qt.a,{active:"id"===W[0],direction:W[1],onClick:function(){return P(["id","asc"===W[1]?"desc":"asc"])}},"#","id"===W[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===W[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:120}},l.a.createElement(Qt.a,{active:"nick"===W[0],direction:W[1],onClick:function(){return P(["nick","asc"===W[1]?"desc":"asc"])}},"\u6635\u79f0","nick"===W[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===W[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:170}},l.a.createElement(Qt.a,{active:"email"===W[0],direction:W[1],onClick:function(){return P(["email","asc"===W[1]?"desc":"asc"])}},"Email","email"===W[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===W[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:70}},"\u7528\u6237\u7ec4"),l.a.createElement(ka.a,{style:{minWidth:50}},"\u72b6\u6001"),l.a.createElement(ka.a,{align:"right",style:{minWidth:80}},l.a.createElement(Qt.a,{active:"storage"===W[0],direction:W[1],onClick:function(){return P(["storage","asc"===W[1]?"desc":"asc"])}},"\u5df2\u7528\u7a7a\u95f4","storage"===W[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===W[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:100}},"\u64cd\u4f5c"))),l.a.createElement(ja.a,null,c.map((function(e){return l.a.createElement(xa.a,{hover:!0,key:e.ID,role:"checkbox",selected:te(e.ID)},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{onClick:function(a){return function(e,a){var t=U.indexOf(a),n=[];-1===t?n=n.concat(U,a):0===t?n=n.concat(U.slice(1)):t===U.length-1?n=n.concat(U.slice(0,-1)):t>0&&(n=n.concat(U.slice(0,t),U.slice(t+1))),K(n)}(0,e.ID)},checked:te(e.ID)})),l.a.createElement(ka.a,null,e.ID),l.a.createElement(ka.a,null,e.Nick),l.a.createElement(ka.a,null,e.Email),l.a.createElement(ka.a,null,l.a.createElement(Ca.a,{href:"/admin/group/edit/"+e.Group.ID},e.Group.Name)),l.a.createElement(ka.a,null,0===e.Status&&l.a.createElement(k.a,{style:{color:Y.palette.success.main},variant:"body2"},"\u6b63\u5e38"),1===e.Status&&l.a.createElement(k.a,{color:"textSecondary",variant:"body2"},"\u672a\u6fc0\u6d3b"),2===e.Status&&l.a.createElement(k.a,{color:"error",variant:"body2"},"\u88ab\u5c01\u7981"),3===e.Status&&l.a.createElement(k.a,{color:"error",variant:"body2"},"\u8d85\u989d\u5c01\u7981")),l.a.createElement(ka.a,{align:"right"},Object(Ja.p)(e.Storage)),l.a.createElement(ka.a,null,l.a.createElement(Ha.a,{title:"\u7f16\u8f91"},l.a.createElement(f.a,{onClick:function(){return X.push("/admin/user/edit/"+e.ID)},size:"small"},l.a.createElement(Ga.a,null))),l.a.createElement(Ha.a,{title:"\u5c01\u7981/\u89e3\u5c01"},l.a.createElement(f.a,{disabled:V,onClick:function(){return a=e.ID,J(!0),void Ze.b.patch("/admin/user/ban/"+a).then((function(e){i(c.map((function(t){return t.ID===a?Object(m.a)(Object(m.a)({},t),{},{Status:e.data}):t})))})).catch((function(e){ee("top","right",e.message,"error")})).then((function(){J(!1)}));var a},size:"small"},l.a.createElement(an.a,null))),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{disabled:V,onClick:function(){return a=e.ID,J(!0),void Ze.b.post("/admin/user/delete",{id:[a]}).then((function(){ae(),ee("top","right","\u7528\u6237\u5df2\u5220\u9664","success")})).catch((function(e){ee("top","right",e.message,"error")})).then((function(){J(!1)}));var a},size:"small"},l.a.createElement(za.a,null)))))}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,100],component:"div",count:O,rowsPerPage:b,page:u-1,onChangePage:function(e,a){return d(a+1)},onChangeRowsPerPage:function(e){v(e.target.value),d(1)}})))}var ln=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function cn(e){var a=ln(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),i=c[0],o=c[1],u=Object(r.useState)(e.user?e.user:{ID:0,Email:"",Nick:"",Password:"",Status:"0",GroupID:"2"}),d=Object(n.a)(u,2),p=d[0],E=d[1],b=Object(r.useState)([]),v=Object(n.a)(b,2),h=v[0],f=v[1],g=Object(Q.g)(),O=Object(Z.d)(),N=Object(r.useCallback)((function(e,a,t,n){return O(Object($e.R)(e,a,t,n))}),[O]);Object(r.useEffect)((function(){Ze.b.get("/admin/groups").then((function(e){f(e.data)})).catch((function(e){N("top","right",e.message,"error")}))}),[]);var y=function(e){return function(a){E(Object(m.a)(Object(m.a)({},p),{},Object(s.a)({},e,a.target.value)))}};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t=Object(m.a)({},p);["Status","GroupID","Score"].forEach((function(e){t[e]=parseInt(t[e])})),o(!0),Ze.b.post("/admin/user",{user:t,password:t.Password}).then((function(){g.push("/admin/user"),N("top","right","\u7528\u6237\u5df2"+(e.user?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success")})).catch((function(e){N("top","right",e.message,"error")})).then((function(){o(!1)}))}},l.a.createElement("div",{className:a.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},0===p.ID&&"\u521b\u5efa\u7528\u6237",0!==p.ID&&"\u7f16\u8f91 "+p.Nick),l.a.createElement("div",{className:a.formContainer},l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u90ae\u7bb1"),l.a.createElement(ra.a,{value:p.Email,type:"email",onChange:y("Email"),required:!0}))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6635\u79f0"),l.a.createElement(ra.a,{value:p.Nick,onChange:y("Nick"),required:!0}))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5bc6\u7801"),l.a.createElement(ra.a,{type:"password",value:p.Password,onChange:y("Password"),required:0===p.ID}),l.a.createElement(na.a,{id:"component-helper-text"},0!==p.ID&&"\u7559\u7a7a\u8868\u793a\u4e0d\u4fee\u6539"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u7528\u6237\u7ec4"),l.a.createElement(ia.a,{value:p.GroupID,onChange:y("GroupID"),required:!0},h.map((function(e){return 3===e.ID?null:l.a.createElement(ca.a,{key:e.ID,value:e.ID.toString()},e.Name)}))),l.a.createElement(na.a,{id:"component-helper-text"},"\u7528\u6237\u6240\u5c5e\u7528\u6237\u7ec4"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u72b6\u6001"),l.a.createElement(ia.a,{value:p.Status,onChange:y("Status"),required:!0},l.a.createElement(ca.a,{value:"0"},"\u6b63\u5e38"),l.a.createElement(ca.a,{value:"1"},"\u672a\u6fc0\u6d3b"),l.a.createElement(ca.a,{value:"2"},"\u88ab\u5c01\u7981"),l.a.createElement(ca.a,{value:"3"},"\u8d85\u989d\u4f7f\u7528\u88ab\u5c01\u7981")))))),l.a.createElement("div",{className:a.root},l.a.createElement(ve.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}function on(){var e=Object(r.useState)({}),a=Object(n.a)(e,2),t=a[0],c=a[1],i=Object(Q.i)().id,o=Object(Z.d)(),m=Object(r.useCallback)((function(e,a,t,n){return o(Object($e.R)(e,a,t,n))}),[o]);return Object(r.useEffect)((function(){c({}),Ze.b.get("/admin/user/"+i).then((function(e){["Status","GroupID"].forEach((function(a){e.data[a]=e.data[a].toString()})),c(e.data)})).catch((function(e){m("top","right",e.message,"error")}))}),[i]),l.a.createElement("div",null,void 0!==t.ID&&l.a.createElement(cn,{user:t}))}var mn=t(8071);function sn(e){var a=e.setFilter,t=e.setSearch,c=e.open,i=e.onClose,o=Object(r.useState)({policy_id:"all",user_id:""}),u=Object(n.a)(o,2),d=u[0],p=u[1],E=Object(r.useState)([]),b=Object(n.a)(E,2),v=b[0],h=b[1],f=Object(r.useState)(""),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(Z.d)(),C=Object(r.useCallback)((function(e,a,t,n){return y(Object($e.R)(e,a,t,n))}),[y]),S=function(e){return function(a){p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},e,a.target.value)))}};Object(r.useEffect)((function(){Ze.b.post("/admin/policy/list",{page:1,page_size:1e4,order_by:"id asc",conditions:{}}).then((function(e){h(e.data.items)})).catch((function(e){C("top","right",e.message,"error")}))}),[]);return l.a.createElement(ye.a,{open:c,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"xs"},l.a.createElement(ke.a,{id:"alert-dialog-title"},"\u8fc7\u6ee4\u6761\u4ef6"),l.a.createElement(Se.a,null,l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{id:"demo-simple-select-label"},"\u5b58\u50a8\u7b56\u7565"),l.a.createElement(ia.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d.policy_id,onChange:S("policy_id")},l.a.createElement(ca.a,{value:"all"},"\u5168\u90e8"),v.map((function(e){return l.a.createElement(ca.a,{key:e.ID,value:e.ID.toString()},e.Name)})))),l.a.createElement(ta.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(va.a,{value:d.user_id,onChange:S("user_id"),id:"standard-basic",label:"\u4e0a\u4f20\u8005ID"})),l.a.createElement(ta.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(va.a,{value:O,onChange:function(e){return N(e.target.value)},id:"standard-basic",label:"\u641c\u7d22 \u6587\u4ef6\u540d"}))),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:i,color:"default"},"\u53d6\u6d88"),l.a.createElement(ve.a,{onClick:function(){var e={};Object.keys(d).forEach((function(a){"all"!==d[a]&&""!==d[a]&&(e[a]=d[a])})),a(e),t(""!==O?{name:O}:{}),i()},color:"primary"},"\u5e94\u7528")))}var un=t(53),dn=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(C.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},disabledBadge:{marginLeft:e.spacing(1),height:18}}}));function pn(){var e=dn(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)(10),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(0),h=Object(n.a)(v,2),g=h[0],O=h[1],N=Object(r.useState)({}),y=Object(n.a)(N,2),C=y[0],S=y[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),z=x[0],w=x[1],D=Object(r.useState)({}),R=Object(n.a)(D,2),I=R[0],F=R[1],W=Object(r.useState)(["id","desc"]),P=Object(n.a)(W,2),T=P[0],A=P[1],q=Object(r.useState)(!1),L=Object(n.a)(q,2),B=L[0],M=L[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],G=K[1],V=Object(r.useState)(!1),J=Object(n.a)(V,2),X=J[0],Y=J[1],$=Object(Q.g)(),ee=Object(Z.d)(),ae=Object(r.useCallback)((function(e,a,t,n){return ee(Object($e.R)(e,a,t,n))}),[ee]),te=function(){Ze.b.post("/admin/file/list",{page:s,page_size:E,order_by:T.join(" "),conditions:C,searches:I}).then((function(e){i(e.data.items),O(e.data.total),G([]),w(e.data.users)})).catch((function(e){ae("top","right",e.message,"error")}))};Object(r.useEffect)((function(){te()}),[s,E,T,C,I]);var ne=function(e){return function(){Y(!0),Ze.b.post("/admin/file/delete",{id:H,force:e}).then((function(){te(),ae("top","right","\u5220\u9664\u4efb\u52a1\u5c06\u5728\u540e\u53f0\u6267\u884c","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){Y(!1)}))}},re=function(e){return-1!==H.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(sn,{filter:C,open:B,onClose:function(){return M(!1)},setSearch:F,setFilter:S}),l.a.createElement("div",{className:e.header},l.a.createElement(ve.a,{color:"primary",onClick:function(){return $.push("/admin/file/import")},variant:"contained",style:{alignSelf:"center"}},"\u4ece\u5916\u90e8\u5bfc\u5165"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ha.a,{title:"\u8fc7\u6ee4"},l.a.createElement(f.a,{style:{marginRight:8},onClick:function(){return M(!0)}},l.a.createElement($t.a,{color:"secondary",variant:"dot",invisible:0===Object.keys(I).length&&0===Object.keys(C).length},l.a.createElement(en.a,null)))),l.a.createElement(ve.a,{color:"primary",onClick:function(){return te()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},H.length>0&&l.a.createElement(j.a,{className:e.highlight},l.a.createElement(k.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",H.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:ne(!1),disabled:X,"aria-label":"delete"},l.a.createElement(za.a,null))),l.a.createElement(Ha.a,{title:"\u5f3a\u5236\u5220\u9664"},l.a.createElement(f.a,{onClick:ne(!0),disabled:X,"aria-label":"delete"},l.a.createElement(mn.a,null)))),l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{indeterminate:H.length>0&&H.length<c.length,checked:c.length>0&&H.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));G(a)}else G([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(ka.a,{style:{minWidth:59}},l.a.createElement(Qt.a,{active:"id"===T[0],direction:T[1],onClick:function(){return A(["id","asc"===T[1]?"desc":"asc"])}},"#","id"===T[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===T[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:250}},l.a.createElement(Qt.a,{active:"name"===T[0],direction:T[1],onClick:function(){return A(["name","asc"===T[1]?"desc":"asc"])}},"\u6587\u4ef6\u540d","name"===T[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===T[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{align:"right",style:{minWidth:70}},l.a.createElement(Qt.a,{active:"size"===T[0],direction:T[1],onClick:function(){return A(["size","asc"===T[1]?"desc":"asc"])}},"\u5927\u5c0f","size"===T[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===T[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:120}},"\u4e0a\u4f20\u8005"),l.a.createElement(ka.a,{style:{minWidth:150}},"\u521b\u5efa\u4e8e"),l.a.createElement(ka.a,{style:{minWidth:100}},"\u64cd\u4f5c"))),l.a.createElement(ja.a,null,c.map((function(a){return l.a.createElement(xa.a,{hover:!0,key:a.ID,role:"checkbox",selected:re(a.ID)},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{onClick:function(e){return function(e,a){var t=H.indexOf(a),n=[];-1===t?n=n.concat(H,a):0===t?n=n.concat(H.slice(1)):t===H.length-1?n=n.concat(H.slice(0,-1)):t>0&&(n=n.concat(H.slice(0,t),H.slice(t+1))),G(n)}(0,a.ID)},checked:re(a.ID)})),l.a.createElement(ka.a,null,a.ID),l.a.createElement(ka.a,null,l.a.createElement(Ca.a,{target:"_blank",color:"inherit",href:"https://pan_api.114514cn.me/api/v3/admin/file/preview/"+a.ID},a.Name,a.UploadSessionID&&l.a.createElement(he.a,{className:e.disabledBadge,size:"small",label:"\u4e0a\u4f20\u4e2d"}))),l.a.createElement(ka.a,{align:"right"},Object(Ja.p)(a.Size)),l.a.createElement(ka.a,null,l.a.createElement(Ca.a,{href:"/admin/user/edit/"+a.UserID},z[a.UserID]?z[a.UserID].Nick:"\u672a\u77e5")),l.a.createElement(ka.a,null,Object(un.a)(a.CreatedAt,"YYYY-MM-DD H:mm:ss")),l.a.createElement(ka.a,null,l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{disabled:X,onClick:function(){return e=a.ID,Y(!0),void Ze.b.post("/admin/file/delete",{id:[e]}).then((function(){te(),ae("top","right","\u5220\u9664\u4efb\u52a1\u5c06\u5728\u540e\u53f0\u6267\u884c","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){Y(!1)}));var e},size:"small"},l.a.createElement(za.a,null)))))}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:g,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){b(e.target.value),u(1)}})))}function En(e){var a=e.setFilter,t=e.setSearch,c=e.open,i=e.onClose,o=Object(r.useState)({is_dir:"all",user_id:""}),u=Object(n.a)(o,2),d=u[0],p=u[1],E=Object(r.useState)(""),b=Object(n.a)(E,2),v=b[0],h=b[1],f=function(e){return function(a){p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},e,a.target.value)))}};return l.a.createElement(ye.a,{open:c,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"xs"},l.a.createElement(ke.a,{id:"alert-dialog-title"},"\u8fc7\u6ee4\u6761\u4ef6"),l.a.createElement(Se.a,null,l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{id:"demo-simple-select-label"},"\u6e90\u6587\u4ef6\u7c7b\u578b"),l.a.createElement(ia.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d.is_dir,onChange:f("is_dir")},l.a.createElement(ca.a,{value:"all"},"\u5168\u90e8"),l.a.createElement(ca.a,{value:"1"},"\u76ee\u5f55"),l.a.createElement(ca.a,{value:"0"},"\u6587\u4ef6"))),l.a.createElement(ta.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(va.a,{value:d.user_id,onChange:f("user_id"),id:"standard-basic",label:"\u4e0a\u4f20\u8005ID"})),l.a.createElement(ta.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(va.a,{value:v,onChange:function(e){return h(e.target.value)},id:"standard-basic",label:"\u641c\u7d22 \u6587\u4ef6\u540d"}))),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:i,color:"default"},"\u53d6\u6d88"),l.a.createElement(ve.a,{onClick:function(){var e={};Object.keys(d).forEach((function(a){"all"!==d[a]&&""!==d[a]&&(e[a]=d[a])})),a(e),t(""!==v?{source_name:v}:{}),i()},color:"primary"},"\u5e94\u7528")))}var bn=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(C.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function vn(){var e=bn(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)(10),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(0),h=Object(n.a)(v,2),g=h[0],O=h[1],N=Object(r.useState)({}),y=Object(n.a)(N,2),C=y[0],S=y[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),z=x[0],w=x[1],D=Object(r.useState)({}),R=Object(n.a)(D,2),I=R[0],F=R[1],W=Object(r.useState)({}),P=Object(n.a)(W,2),T=P[0],A=P[1],q=Object(r.useState)(["id","desc"]),L=Object(n.a)(q,2),B=L[0],M=L[1],U=Object(r.useState)(!1),K=Object(n.a)(U,2),H=K[0],G=K[1],V=Object(r.useState)([]),J=Object(n.a)(V,2),X=J[0],Y=J[1],$=Object(r.useState)(!1),Q=Object(n.a)($,2),ee=Q[0],ae=Q[1],te=Object(Z.d)(),ne=Object(r.useCallback)((function(e,a,t,n){return te(Object($e.R)(e,a,t,n))}),[te]),re=function(){Ze.b.post("/admin/share/list",{page:s,page_size:E,order_by:B.join(" "),conditions:C,searches:T}).then((function(e){w(e.data.users),F(e.data.ids),i(e.data.items),O(e.data.total),Y([])})).catch((function(e){ne("top","right",e.message,"error")}))};Object(r.useEffect)((function(){re()}),[s,E,B,C,T]);var le=function(e){return-1!==X.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(En,{filter:C,open:H,onClose:function(){return G(!1)},setSearch:A,setFilter:S}),l.a.createElement("div",{className:e.header},l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ha.a,{title:"\u8fc7\u6ee4"},l.a.createElement(f.a,{style:{marginRight:8},onClick:function(){return G(!0)}},l.a.createElement($t.a,{color:"secondary",variant:"dot",invisible:0===Object.keys(T).length&&0===Object.keys(C).length},l.a.createElement(en.a,null)))),l.a.createElement(ve.a,{color:"primary",onClick:function(){return re()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},X.length>0&&l.a.createElement(j.a,{className:e.highlight},l.a.createElement(k.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",X.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:function(){ae(!0),Ze.b.post("/admin/share/delete",{id:X}).then((function(){re(),ne("top","right","\u5206\u4eab\u5df2\u5220\u9664","success")})).catch((function(e){ne("top","right",e.message,"error")})).then((function(){ae(!1)}))},disabled:ee,"aria-label":"delete"},l.a.createElement(za.a,null)))),l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{indeterminate:X.length>0&&X.length<c.length,checked:c.length>0&&X.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));Y(a)}else Y([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(ka.a,{style:{minWidth:10}},l.a.createElement(Qt.a,{active:"id"===B[0],direction:B[1],onClick:function(){return M(["id","asc"===B[1]?"desc":"asc"])}},"#","id"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:200}},l.a.createElement(Qt.a,{active:"source_name"===B[0],direction:B[1],onClick:function(){return M(["source_name","asc"===B[1]?"desc":"asc"])}},"\u5bf9\u8c61\u540d","source_name"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:70}},"\u7c7b\u578b"),l.a.createElement(ka.a,{style:{minWidth:100},align:"right"},l.a.createElement(Qt.a,{active:"views"===B[0],direction:B[1],onClick:function(){return M(["views","asc"===B[1]?"desc":"asc"])}},"\u6d4f\u89c8","views"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:100},align:"right"},l.a.createElement(Qt.a,{active:"downloads"===B[0],direction:B[1],onClick:function(){return M(["downloads","asc"===B[1]?"desc":"asc"])}},"\u4e0b\u8f7d","downloads"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:120}},"\u81ea\u52a8\u8fc7\u671f"),l.a.createElement(ka.a,{style:{minWidth:120}},"\u5206\u4eab\u8005"),l.a.createElement(ka.a,{style:{minWidth:150}},"\u5206\u4eab\u4e8e"),l.a.createElement(ka.a,{style:{minWidth:100}},"\u64cd\u4f5c"))),l.a.createElement(ja.a,null,c.map((function(e){return l.a.createElement(xa.a,{hover:!0,key:e.ID,role:"checkbox",selected:le(e.ID)},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{onClick:function(a){return function(e,a){var t=X.indexOf(a),n=[];-1===t?n=n.concat(X,a):0===t?n=n.concat(X.slice(1)):t===X.length-1?n=n.concat(X.slice(0,-1)):t>0&&(n=n.concat(X.slice(0,t),X.slice(t+1))),Y(n)}(0,e.ID)},checked:le(e.ID)})),l.a.createElement(ka.a,null,e.ID),l.a.createElement(ka.a,{style:{wordBreak:"break-all"}},l.a.createElement(Ca.a,{target:"_blank",color:"inherit",href:"/s/"+I[e.ID]+(""===e.Password?"":"?password="+e.Password)},e.SourceName)),l.a.createElement(ka.a,null,""===e.Password?"\u516c\u5f00":"\u79c1\u5bc6"),l.a.createElement(ka.a,{align:"right"},e.Views),l.a.createElement(ka.a,{align:"right"},e.Downloads),l.a.createElement(ka.a,null,e.RemainDownloads>-1&&e.RemainDownloads+" \u6b21\u4e0b\u8f7d\u540e",-1===e.RemainDownloads&&"\u65e0"),l.a.createElement(ka.a,null,l.a.createElement(Ca.a,{href:"/admin/user/edit/"+e.UserID},z[e.UserID]?z[e.UserID].Nick:"\u672a\u77e5")),l.a.createElement(ka.a,null,Object(un.a)(e.CreatedAt)),l.a.createElement(ka.a,null,l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{disabled:ee,onClick:function(){return a=e.ID,ae(!0),void Ze.b.post("/admin/share/delete",{id:[a]}).then((function(){re(),ne("top","right","\u5206\u4eab\u5df2\u5220\u9664","success")})).catch((function(e){ne("top","right",e.message,"error")})).then((function(){ae(!1)}));var a},size:"small"},l.a.createElement(za.a,null)))))}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:g,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){b(e.target.value),u(1)}})))}var hn=t(47),fn=Object(c.a)((function(e){return{}}));function gn(e){fn();return l.a.createElement(ye.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(ke.a,{id:"alert-dialog-title"},"\u5982\u4f55\u914d\u7f6e\u79bb\u7ebf\u4e0b\u8f7d\uff1f"),l.a.createElement(Se.a,null,l.a.createElement(je.a,{id:"alert-dialog-description"},"Cloudreve \u7684\u79bb\u7ebf\u4e0b\u8f7d\u652f\u6301\u4e3b\u4ece\u5206\u6563\u6a21\u5f0f\u3002\u60a8\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a Cloudreve \u4ece\u673a\u8282\u70b9\uff0c\u8fd9\u4e9b\u8282\u70b9\u53ef\u4ee5\u7528\u6765\u5904\u7406\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1\uff0c\u5206\u6563\u4e3b\u8282\u70b9\u7684\u538b\u529b\u3002\u5f53\u7136\uff0c\u60a8\u4e5f\u53ef\u4ee5\u914d\u7f6e\u53ea\u5728\u4e3b\u8282\u70b9\u4e0a\u5904\u7406\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1\uff0c\u8fd9\u662f\u6700\u7b80\u5355\u7684\u4e00\u79cd\u65b9\u5f0f\u3002",l.a.createElement("ul",null,l.a.createElement("li",null,"\u5982\u679c\u60a8\u53ea\u9700\u8981\u4e3a\u4e3b\u673a\u542f\u7528\u79bb\u7ebf\u4e0b\u8f7d\u529f\u80fd\uff0c\u8bf7"," ",l.a.createElement(Ca.a,{component:hn.a,to:"/admin/node/edit/1"},"\u70b9\u51fb\u8fd9\u91cc")," ","\u7f16\u8f91\u4e3b\u8282\u70b9\uff1b"),l.a.createElement("li",null,"\u5982\u679c\u60a8\u60f3\u8981\u5728\u4ece\u673a\u8282\u70b9\u4e0a\u5206\u6563\u5904\u7406\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1\uff0c\u8bf7"," ",l.a.createElement(Ca.a,{component:hn.a,to:"/admin/node/add"},"\u70b9\u51fb\u8fd9\u91cc")," ","\u6dfb\u52a0\u5e76\u914d\u7f6e\u65b0\u8282\u70b9\u3002")),"\u5f53\u4f60\u6dfb\u52a0\u591a\u4e2a\u53ef\u7528\u4e8e\u79bb\u7ebf\u4e0b\u8f7d\u7684\u8282\u70b9\u540e\uff0c\u4e3b\u8282\u70b9\u4f1a\u5c06\u79bb\u7ebf\u4e0b\u8f7d\u8bf7\u6c42\u8f6e\u6d41\u53d1\u9001\u5230\u8fd9\u4e9b\u8282\u70b9\u5904\u7406\u3002 \u8282\u70b9\u79bb\u7ebf\u4e0b\u8f7d\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u60a8\u53ef\u80fd\u8fd8\u9700\u8981"," ",l.a.createElement(Ca.a,{component:hn.a,to:"/admin/group"},"\u5230\u8fd9\u91cc")," ","\u7f16\u8f91\u7528\u6237\u7ec4\uff0c\u4e3a\u5bf9\u5e94\u7528\u6237\u7ec4\u5f00\u542f\u79bb\u7ebf\u4e0b\u8f7d\u6743\u9650\u3002")),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:e.onClose,color:"primary",autoFocus:!0},"\u5173\u95ed")))}var On=t(7770),Nn=t.n(On),yn=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(C.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Cn(){var e=yn(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)(10),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(0),h=Object(n.a)(v,2),g=h[0],O=h[1],N=Object(r.useState)({}),y=Object(n.a)(N,2),C=y[0],S=y[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),z=x[0],w=x[1],D=Object(r.useState)({}),R=Object(n.a)(D,2),I=R[0],F=R[1],W=Object(r.useState)(["id","desc"]),P=Object(n.a)(W,2),T=P[0],A=P[1],q=Object(r.useState)(!1),L=Object(n.a)(q,2),B=L[0],M=L[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],G=K[1],V=Object(r.useState)(!1),J=Object(n.a)(V,2),X=J[0],Y=J[1],$=Object(r.useState)(!1),Q=Object(n.a)($,2),ee=Q[0],ae=Q[1],te=Object(Z.d)(),ne=Object(r.useCallback)((function(e,a,t,n){return te(Object($e.R)(e,a,t,n))}),[te]),re=function(){Ze.b.post("/admin/download/list",{page:s,page_size:E,order_by:T.join(" "),conditions:C,searches:I}).then((function(e){w(e.data.users),i(e.data.items),O(e.data.total),G([])})).catch((function(e){ne("top","right",e.message,"error")}))};Object(r.useEffect)((function(){re()}),[s,E,T,C,I]);var le=function(e){return-1!==H.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(gn,{open:ee,onClose:function(){return ae(!1)}}),l.a.createElement(En,{filter:C,open:B,onClose:function(){return M(!1)},setSearch:F,setFilter:S}),l.a.createElement("div",{className:e.header},l.a.createElement(ve.a,{color:"primary",onClick:function(){return re()},variant:"outlined"},"\u5237\u65b0"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(ve.a,{color:"primary",onClick:function(){return ae(!0)}},l.a.createElement(Nn.a,null)," ","  ","\u5982\u4f55\u914d\u7f6e\u79bb\u7ebf\u4e0b\u8f7d"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},H.length>0&&l.a.createElement(j.a,{className:e.highlight},l.a.createElement(k.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",H.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:function(){Y(!0),Ze.b.post("/admin/download/delete",{id:H}).then((function(){re(),ne("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){ne("top","right",e.message,"error")})).then((function(){Y(!1)}))},disabled:X,"aria-label":"delete"},l.a.createElement(za.a,null)))),l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{indeterminate:H.length>0&&H.length<c.length,checked:c.length>0&&H.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));G(a)}else G([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(ka.a,{style:{minWidth:10}},l.a.createElement(Qt.a,{active:"id"===T[0],direction:T[1],onClick:function(){return A(["id","asc"===T[1]?"desc":"asc"])}},"#","id"===T[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===T[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:130}},"\u6e90\u5730\u5740"),l.a.createElement(ka.a,{style:{minWidth:90}},"\u72b6\u6001"),l.a.createElement(ka.a,{style:{minWidth:90}},"\u5904\u7406\u8282\u70b9"),l.a.createElement(ka.a,{style:{minWidth:150},align:"right"},l.a.createElement(Qt.a,{active:"total_size"===T[0],direction:T[1],onClick:function(){return A(["total_size","asc"===T[1]?"desc":"asc"])}},"\u5927\u5c0f","total_size"===T[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===T[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:100}},"\u521b\u5efa\u8005"),l.a.createElement(ka.a,{style:{minWidth:150}},"\u521b\u5efa\u4e8e"),l.a.createElement(ka.a,{style:{minWidth:80}},"\u64cd\u4f5c"))),l.a.createElement(ja.a,null,c.map((function(e){return l.a.createElement(xa.a,{hover:!0,key:e.ID,role:"checkbox",selected:le(e.ID)},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{onClick:function(a){return function(e,a){var t=H.indexOf(a),n=[];-1===t?n=n.concat(H,a):0===t?n=n.concat(H.slice(1)):t===H.length-1?n=n.concat(H.slice(0,-1)):t>0&&(n=n.concat(H.slice(0,t),H.slice(t+1))),G(n)}(0,e.ID)},checked:le(e.ID)})),l.a.createElement(ka.a,null,e.ID),l.a.createElement(ka.a,{style:{wordBreak:"break-all"}},e.Source),l.a.createElement(ka.a,null,0===e.Status&&"\u5c31\u7eea",1===e.Status&&"\u4e0b\u8f7d\u4e2d",2===e.Status&&"\u6682\u505c\u4e2d",3===e.Status&&"\u51fa\u9519",4===e.Status&&"\u5b8c\u6210",5===e.Status&&"\u53d6\u6d88/\u505c\u6b62",6===e.Status&&"\u672a\u77e5"),l.a.createElement(ka.a,null,e.NodeID<=1&&l.a.createElement(Ca.a,{component:hn.a,to:"/admin/node/edit/1"},"\u4e3b\u673a"),e.NodeID>1&&l.a.createElement(Ca.a,{component:hn.a,to:"/admin/node/edit/"+e.NodeID},"\u4ece\u673a#",e.NodeID)),l.a.createElement(ka.a,{align:"right"},Object(Ja.p)(e.TotalSize)),l.a.createElement(ka.a,null,l.a.createElement(Ca.a,{href:"/admin/user/edit/"+e.UserID},z[e.UserID]?z[e.UserID].Nick:"\u672a\u77e5")),l.a.createElement(ka.a,null,Object(un.a)(e.CreatedAt)),l.a.createElement(ka.a,null,l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{disabled:X,onClick:function(){return a=e.ID,Y(!0),void Ze.b.post("/admin/download/delete",{id:[a]}).then((function(){re(),ne("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){ne("top","right",e.message,"error")})).then((function(){Y(!1)}));var a},size:"small"},l.a.createElement(za.a,null)))))}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:g,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){b(e.target.value),u(1)}})))}var Sn=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(C.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function jn(){var e=Sn(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],d=Object(r.useState)(10),p=Object(n.a)(d,2),E=p[0],b=p[1],v=Object(r.useState)(0),h=Object(n.a)(v,2),g=h[0],O=h[1],N=Object(r.useState)({}),y=Object(n.a)(N,2),C=y[0],S=y[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),z=x[0],w=x[1],D=Object(r.useState)({}),R=Object(n.a)(D,2),I=R[0],F=R[1],W=Object(r.useState)(["id","desc"]),P=Object(n.a)(W,2),T=P[0],A=P[1],q=Object(r.useState)(!1),L=Object(n.a)(q,2),B=L[0],M=L[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],G=K[1],V=Object(r.useState)(!1),J=Object(n.a)(V,2),X=J[0],Y=J[1],$=Object(Z.d)(),Q=Object(r.useCallback)((function(e,a,t,n){return $(Object($e.R)(e,a,t,n))}),[$]),ee=function(){Ze.b.post("/admin/task/list",{page:s,page_size:E,order_by:T.join(" "),conditions:C,searches:I}).then((function(e){w(e.data.users),i(e.data.items),O(e.data.total),G([])})).catch((function(e){Q("top","right",e.message,"error")}))};Object(r.useEffect)((function(){ee()}),[s,E,T,C,I]);var ae=function(e){return-1!==H.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(En,{filter:C,open:B,onClose:function(){return M(!1)},setSearch:F,setFilter:S}),l.a.createElement("div",{className:e.header},l.a.createElement("div",{className:e.headerRight},l.a.createElement(ve.a,{color:"primary",onClick:function(){return ee()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},H.length>0&&l.a.createElement(j.a,{className:e.highlight},l.a.createElement(k.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",H.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:function(){Y(!0),Ze.b.post("/admin/task/delete",{id:H}).then((function(){ee(),Q("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){Q("top","right",e.message,"error")})).then((function(){Y(!1)}))},disabled:X,"aria-label":"delete"},l.a.createElement(za.a,null)))),l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{indeterminate:H.length>0&&H.length<c.length,checked:c.length>0&&H.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));G(a)}else G([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(ka.a,{style:{minWidth:10}},l.a.createElement(Qt.a,{active:"id"===T[0],direction:T[1],onClick:function(){return A(["id","asc"===T[1]?"desc":"asc"])}},"#","id"===T[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===T[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(ka.a,{style:{minWidth:130}},"\u7c7b\u578b"),l.a.createElement(ka.a,{style:{minWidth:90}},"\u72b6\u6001"),l.a.createElement(ka.a,{style:{minWidth:90}},"\u6700\u540e\u8fdb\u5ea6"),l.a.createElement(ka.a,{style:{minWidth:150}},"\u9519\u8bef\u4fe1\u606f"),l.a.createElement(ka.a,{style:{minWidth:100}},"\u521b\u5efa\u8005"),l.a.createElement(ka.a,{style:{minWidth:150}},"\u521b\u5efa\u4e8e"),l.a.createElement(ka.a,{style:{minWidth:80}},"\u64cd\u4f5c"))),l.a.createElement(ja.a,null,c.map((function(a){return l.a.createElement(xa.a,{hover:!0,key:a.ID,role:"checkbox",selected:ae(a.ID)},l.a.createElement(ka.a,{padding:"checkbox"},l.a.createElement(Zt.a,{onClick:function(e){return function(e,a){var t=H.indexOf(a),n=[];-1===t?n=n.concat(H,a):0===t?n=n.concat(H.slice(1)):t===H.length-1?n=n.concat(H.slice(0,-1)):t>0&&(n=n.concat(H.slice(0,t),H.slice(t+1))),G(n)}(0,a.ID)},checked:ae(a.ID)})),l.a.createElement(ka.a,null,a.ID),l.a.createElement(ka.a,{style:{wordBreak:"break-all"}},Object(Va.f)(a.Type)),l.a.createElement(ka.a,null,Object(Va.e)(a.Status)),l.a.createElement(ka.a,null,Object(Va.d)(a.Type,a.Progress)),l.a.createElement(ka.a,{className:e.noWrap},function(e){if(""===e)return"-";try{return JSON.parse(e).msg}catch(a){return"\u672a\u77e5"}}(a.Error)),l.a.createElement(ka.a,null,l.a.createElement(Ca.a,{href:"/admin/user/edit/"+a.UserID},z[a.UserID]?z[a.UserID].Nick:"\u672a\u77e5")),l.a.createElement(ka.a,null,Object(un.a)(a.CreatedAt)),l.a.createElement(ka.a,null,l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{disabled:X,onClick:function(){return e=a.ID,Y(!0),void Ze.b.post("/admin/task/delete",{id:[e]}).then((function(){ee(),Q("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){Q("top","right",e.message,"error")})).then((function(){Y(!1)}));var e},size:"small"},l.a.createElement(za.a,null)))))}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:g,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){b(e.target.value),u(1)}})))}var kn=t(270),_n=t(459),xn=t(89),zn=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),userSelect:{width:400,borderRadius:0}}}));function wn(){var e=zn(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({policy:1,userInput:"",src:"",dst:"",recursive:!0}),u=Object(n.a)(o,2),d=u[0],p=u[1],E=Object(r.useState)(null),b=Object(n.a)(E,2),v=b[0],h=b[1],f=Object(r.useState)({}),g=Object(n.a)(f,2),O=g[0],N=g[1],y=Object(r.useState)([]),C=Object(n.a)(y,2),S=C[0],j=C[1],_=Object(r.useState)(null),x=Object(n.a)(_,2),z=x[0],w=x[1],D=Object(r.useState)(!1),R=Object(n.a)(D,2),I=R[0],F=R[1],W=Object(r.useState)(!1),P=Object(n.a)(W,2),T=P[0],A=P[1],q=function(e){return function(a){p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},e,a.target.value)))}},L=Object(Q.g)(),B=Object(Z.d)(),M=Object(r.useCallback)((function(e,a,t,n){return B(Object($e.R)(e,a,t,n))}),[B]),U=function(e,a){var t=Object(r.useState)(e),l=Object(n.a)(t,2),c=l[0],i=l[1];return Object(r.useEffect)((function(){var t=setTimeout((function(){i(e)}),a);return function(){clearTimeout(t)}}),[e]),c}(d.userInput,500);Object(r.useEffect)((function(){""!==U&&Ze.b.post("/admin/user/list",{page:1,page_size:1e4,order_by:"id asc",searches:{nick:U,email:U}}).then((function(e){j(e.data.items)})).catch((function(e){M("top","right",e.message,"error")}))}),[U]),Object(r.useEffect)((function(){Ze.b.post("/admin/policy/list",{page:1,page_size:1e4,order_by:"id asc",conditions:{}}).then((function(e){var a={};e.data.items.forEach((function(e){a[e.ID]=e})),N(a)})).catch((function(e){M("top","right",e.message,"error")}))}),[]);var K,H=function(e){return function(a){var t="/"===a.path?a.path+a.name:a.path+"/"+a.name;e("//"===t?"/":t)}},G=function(e){if(e){if(!O[d.policy]||"local"===O[d.policy].Type||"remote"===O[d.policy].Type)return void M("top","right","\u9009\u62e9\u7684\u5b58\u50a8\u7b56\u7565\u53ea\u652f\u6301\u624b\u52a8\u8f93\u5165\u8def\u5f84","warning");F(!0)}else{if(null===z)return void M("top","right","\u8bf7\u5148\u9009\u62e9\u76ee\u6807\u7528\u6237","warning");A(!0)}};return l.a.createElement("div",null,l.a.createElement(ye.a,{open:I,onClose:function(){return F(!1)},"aria-labelledby":"form-dialog-title"},l.a.createElement(ke.a,{id:"form-dialog-title"},"\u9009\u62e9\u76ee\u5f55"),l.a.createElement(xn.a,{presentPath:"/",api:"/admin/file/folders/policy/"+d.policy,selected:[],onSelect:H((function(e){return p(Object(m.a)(Object(m.a)({},d),{},{src:e}))}))}),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:function(){return F(!1)},color:"primary"},"\u786e\u5b9a"))),l.a.createElement(ye.a,{open:T,onClose:function(){return A(!1)},"aria-labelledby":"form-dialog-title"},l.a.createElement(ke.a,{id:"form-dialog-title"},"\u9009\u62e9\u76ee\u5f55"),l.a.createElement(xn.a,{presentPath:"/",api:"/admin/file/folders/user/"+(null===z?0:z.ID),selected:[],onSelect:H((function(e){return p(Object(m.a)(Object(m.a)({},d),{},{dst:e}))}))}),l.a.createElement(Ce.a,null,l.a.createElement(ve.a,{onClick:function(){return A(!1)},color:"primary"},"\u786e\u5b9a"))),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null!==z?(i(!0),Ze.b.post("/admin/task/import",{uid:z.ID,policy_id:parseInt(d.policy),src:d.src,dst:d.dst,recursive:d.recursive}).then((function(){i(!1),L.push("/admin/file"),M("top","right","\u5bfc\u5165\u4efb\u52a1\u5df2\u521b\u5efa\uff0c\u60a8\u53ef\u4ee5\u5728\u201c\u6301\u4e45\u4efb\u52a1\u201d\u4e2d\u67e5\u770b\u6267\u884c\u60c5\u51b5","success")})).catch((function(e){i(!1),M("top","right",e.message,"error")}))):M("top","right","\u8bf7\u5148\u9009\u62e9\u76ee\u6807\u7528\u6237","warning")}},l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"\u5bfc\u5165\u5916\u90e8\u76ee\u5f55"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(wa.a,{severity:"info"},"\u60a8\u53ef\u4ee5\u5c06\u5b58\u50a8\u7b56\u7565\u4e2d\u5df2\u6709\u6587\u4ef6\u3001\u76ee\u5f55\u7ed3\u6784\u5bfc\u5165\u5230 Cloudreve \u4e2d\uff0c\u5bfc\u5165\u64cd\u4f5c\u4e0d\u4f1a\u989d\u5916\u5360\u7528\u7269\u7406\u5b58\u50a8\u7a7a\u95f4\uff0c\u4f46\u4ecd\u4f1a\u6b63\u5e38\u6263\u9664\u7528\u6237\u5df2\u7528\u5bb9\u91cf\u7a7a\u95f4\uff0c\u7a7a\u95f4\u4e0d\u8db3\u65f6\u5c06\u505c\u6b62\u5bfc\u5165\u3002")),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565"),l.a.createElement(ia.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",value:d.policy,onChange:q("policy"),input:l.a.createElement(ra.a,{id:"select-multiple-chip"})},Object.keys(O).map((function(e){return l.a.createElement(ca.a,{key:e,value:e},O[e].Name)}))),l.a.createElement(na.a,{id:"component-helper-text"},"\u9009\u62e9\u8981\u5bfc\u5165\u6587\u4ef6\u76ee\u524d\u5b58\u50a8\u6240\u5728\u7684\u5b58\u50a8\u7b56\u7565"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u76ee\u6807\u7528\u6237"),l.a.createElement(ra.a,{value:d.userInput,onChange:function(e){q("userInput")(e),h(e.currentTarget)},startAdornment:null!==z&&l.a.createElement(ga.a,{position:"start"},l.a.createElement(he.a,{size:"small",onDelete:function(){w(null)},label:z.Nick})),disabled:null!==z}),l.a.createElement(_n.a,{open:""!==d.userInput&&S.length>0,anchorEl:v,placement:"bottom",transition:!0},(function(a){var t=a.TransitionProps;return l.a.createElement(kn.a,Object.assign({},t,{timeout:350}),l.a.createElement(ze.a,{className:e.userSelect},S.map((function(e){return l.a.createElement(ca.a,{key:e.Email,onClick:function(){return function(e){p(Object(m.a)(Object(m.a)({},d),{},{userInput:""})),w(e)}(e)}},e.Nick," ","<"+e.Email+">")}))))})),l.a.createElement(na.a,{id:"component-helper-text"},"\u9009\u62e9\u8981\u5c06\u6587\u4ef6\u5bfc\u5165\u5230\u54ea\u4e2a\u7528\u6237\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u53ef\u901a\u8fc7\u6635\u79f0\u3001\u90ae\u7bb1\u641c\u7d22\u7528\u6237"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u539f\u59cb\u76ee\u5f55\u8def\u5f84"),l.a.createElement(ra.a,{value:d.src,onChange:function(e){q("src")(e),h(e.currentTarget)},required:!0,endAdornment:l.a.createElement(ve.a,{onClick:function(){return G(!0)}},"\u9009\u62e9")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u8981\u5bfc\u5165\u7684\u76ee\u5f55\u5728\u5b58\u50a8\u7aef\u7684\u8def\u5f84"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u76ee\u7684\u76ee\u5f55\u8def\u5f84"),l.a.createElement(ra.a,{value:d.dst,onChange:function(e){q("dst")(e),h(e.currentTarget)},required:!0,endAdornment:l.a.createElement(ve.a,{onClick:function(){return G(!1)}},"\u9009\u62e9")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u8981\u5c06\u76ee\u5f55\u5bfc\u5165\u5230\u7528\u6237\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u8def\u5f84"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:d.recursive,onChange:(K="recursive",function(e){p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},K,e.target.checked)))})}),label:"\u9012\u5f52\u5bfc\u5165\u5b50\u76ee\u5f55"}),l.a.createElement(na.a,{id:"component-helper-text"},"\u662f\u5426\u5c06\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5b50\u76ee\u5f55\u9012\u5f52\u5bfc\u5165"))))),l.a.createElement("div",{className:e.root},l.a.createElement(ve.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u521b\u5efa\u5bfc\u5165\u4efb\u52a1"))))}var Dn=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function Rn(){var e=Dn(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({captcha_type:"normal",captcha_height:"1",captcha_width:"1",captcha_mode:"3",captcha_CaptchaLen:"6",captcha_ComplexOfNoiseText:"0",captcha_ComplexOfNoiseDot:"0",captcha_IsShowHollowLine:"0",captcha_IsShowNoiseDot:"0",captcha_IsShowNoiseText:"0",captcha_IsShowSlimeLine:"0",captcha_IsShowSineLine:"0",captcha_ReCaptchaKey:"",captcha_ReCaptchaSecret:"",captcha_TCaptcha_CaptchaAppId:"",captcha_TCaptcha_AppSecretKey:"",captcha_TCaptcha_SecretId:"",captcha_TCaptcha_SecretKey:""}),u=Object(n.a)(o,2),d=u[0],p=u[1],E=function(e){return function(a){p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},e,a.target.value)))}},b=Object(Z.d)(),v=Object(r.useCallback)((function(e,a,t,n){return b(Object($e.R)(e,a,t,n))}),[b]);Object(r.useEffect)((function(){Ze.b.post("/admin/setting",{keys:Object.keys(d)}).then((function(e){p(e.data)})).catch((function(e){v("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(d).forEach((function(e){a.push({key:e,value:d[e]})})),Ze.b.patch("/admin/setting",{options:a}).then((function(){v("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){v("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"\u9a8c\u8bc1\u7801"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u9a8c\u8bc1\u7801\u7c7b\u578b"),l.a.createElement(ia.a,{value:d.captcha_type,onChange:E("captcha_type"),required:!0},l.a.createElement(ca.a,{value:"normal"},"\u666e\u901a"),l.a.createElement(ca.a,{value:"recaptcha"},"reCAPTCHA V2"),l.a.createElement(ca.a,{value:"tcaptcha"},"\u817e\u8baf\u4e91\u9a8c\u8bc1\u7801")),l.a.createElement(na.a,{id:"component-helper-text"},"\u9a8c\u8bc1\u7801\u7c7b\u578b"))))),"normal"===d.captcha_type&&l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"\u666e\u901a\u9a8c\u8bc1\u7801"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5bbd\u5ea6"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.captcha_width,onChange:E("captcha_width"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u9ad8\u5ea6"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.captcha_height,onChange:E("captcha_height"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u957f\u5ea6"),l.a.createElement(ra.a,{type:"number",inputProps:{min:1,step:1},value:d.captcha_CaptchaLen,onChange:E("captcha_CaptchaLen"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,null,l.a.createElement(la.a,{htmlFor:"component-helper"},"\u6a21\u5f0f"),l.a.createElement(ia.a,{value:d.captcha_mode,onChange:E("captcha_mode"),required:!0},l.a.createElement(ca.a,{value:"0"},"\u6570\u5b57"),l.a.createElement(ca.a,{value:"1"},"\u5b57\u6bcd"),l.a.createElement(ca.a,{value:"2"},"\u7b97\u6570"),l.a.createElement(ca.a,{value:"3"},"\u6570\u5b57+\u5b57\u6bcd")),l.a.createElement(na.a,{id:"component-helper-text"},"\u9a8c\u8bc1\u7801\u7684\u5f62\u5f0f"))),[{name:"\u52a0\u5f3a\u5e72\u6270\u6587\u5b57",field:"captcha_ComplexOfNoiseText"},{name:"\u52a0\u5f3a\u5e72\u6270\u70b9",field:"captcha_ComplexOfNoiseDot"},{name:"\u4f7f\u7528\u7a7a\u5fc3\u7ebf",field:"captcha_IsShowHollowLine"},{name:"\u4f7f\u7528\u566a\u70b9",field:"captcha_IsShowNoiseDot"},{name:"\u4f7f\u7528\u5e72\u6270\u6587\u5b57",field:"captcha_IsShowNoiseText"},{name:"\u4f7f\u7528\u6ce2\u6d6a\u7ebf",field:"captcha_IsShowSlimeLine"},{name:"\u4f7f\u7528\u6b63\u5f26\u7ebf",field:"captcha_IsShowSineLine"}].map((function(a){return l.a.createElement("div",{key:a.name,className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ua.a,{control:l.a.createElement(da.a,{checked:"1"===d[a.field],onChange:(t=a.field,function(e){var a=e.target.checked?"1":"0";p(Object(m.a)(Object(m.a)({},d),{},Object(s.a)({},t,a)))})}),label:a.name})));var t})))),"recaptcha"===d.captcha_type&&l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"reCAPTCHA V2"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Site KEY"),l.a.createElement(ra.a,{required:!0,value:d.captcha_ReCaptchaKey,onChange:E("captcha_ReCaptchaKey")}),l.a.createElement(na.a,{id:"component-helper-text"},l.a.createElement(Ca.a,{href:"https://www.google.com/recaptcha/admin/create",target:"_blank"},"\u5e94\u7528\u7ba1\u7406\u9875\u9762")," ","\u83b7\u53d6\u5230\u7684\u7684 \u7f51\u7ad9\u5bc6\u94a5"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"Secret"),l.a.createElement(ra.a,{required:!0,value:d.captcha_ReCaptchaSecret,onChange:E("captcha_ReCaptchaSecret")}),l.a.createElement(na.a,{id:"component-helper-text"},l.a.createElement(Ca.a,{href:"https://www.google.com/recaptcha/admin/create",target:"_blank"},"\u5e94\u7528\u7ba1\u7406\u9875\u9762")," ","\u83b7\u53d6\u5230\u7684\u7684 \u79d8\u94a5")))))),"tcaptcha"===d.captcha_type&&l.a.createElement("div",{className:e.root},l.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"\u817e\u8baf\u4e91\u9a8c\u8bc1\u7801"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"SecretId"),l.a.createElement(ra.a,{required:!0,value:d.captcha_TCaptcha_SecretId,onChange:E("captcha_TCaptcha_SecretId")}),l.a.createElement(na.a,{id:"component-helper-text"},l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/capi",target:"_blank"},"\u8bbf\u95ee\u5bc6\u94a5\u9875\u9762")," ","\u83b7\u53d6\u5230\u7684\u7684 SecretId"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"SecretKey"),l.a.createElement(ra.a,{required:!0,value:d.captcha_TCaptcha_SecretKey,onChange:E("captcha_TCaptcha_SecretKey")}),l.a.createElement(na.a,{id:"component-helper-text"},l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/capi",target:"_blank"},"\u8bbf\u95ee\u5bc6\u94a5\u9875\u9762")," ","\u83b7\u53d6\u5230\u7684\u7684 SecretKey"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"APPID"),l.a.createElement(ra.a,{required:!0,value:d.captcha_TCaptcha_CaptchaAppId,onChange:E("captcha_TCaptcha_CaptchaAppId")}),l.a.createElement(na.a,{id:"component-helper-text"},l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/captcha/graphical",target:"_blank"},"\u56fe\u5f62\u9a8c\u8bc1\u9875\u9762")," ","\u83b7\u53d6\u5230\u7684\u7684 APPID"))),l.a.createElement("div",{className:e.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"App Secret Key"),l.a.createElement(ra.a,{required:!0,value:d.captcha_TCaptcha_AppSecretKey,onChange:E("captcha_TCaptcha_AppSecretKey")}),l.a.createElement(na.a,{id:"component-helper-text"},l.a.createElement(Ca.a,{href:"https://console.cloud.tencent.com/captcha/graphical",target:"_blank"},"\u56fe\u5f62\u9a8c\u8bc1\u9875\u9762")," ","\u83b7\u53d6\u5230\u7684\u7684 App Secret Key")))))),l.a.createElement("div",{className:e.root},l.a.createElement(ve.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}var In=t(8073),Fn=t(8074),Wn=t(8075),Pn=t(8076),Tn=t(30),An=t.n(Tn),qn=t(8072),Ln=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},disabledBadge:{marginLeft:e.spacing(1),height:18},disabledCell:{color:e.palette.text.disabled},verticalAlign:{verticalAlign:"middle",display:"inline-block"}}})),Bn=[{id:"#",label:"#",minWidth:50},{id:"name",label:"\u540d\u79f0",minWidth:170},{id:"status",label:"\u5f53\u524d\u72b6\u6001",minWidth:50},{id:"features",label:"\u5df2\u542f\u7528\u529f\u80fd",minWidth:170},{id:"action",label:"\u64cd\u4f5c",minWidth:170}],Mn=[{field:"Aria2Enabled",name:"\u79bb\u7ebf\u4e0b\u8f7d"}];function Un(){var e=Ln(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({}),m=Object(n.a)(o,2),u=m[0],d=m[1],p=Object(r.useState)(!1),E=Object(n.a)(p,2),b=E[0],v=E[1],h=Object(r.useState)(1),g=Object(n.a)(h,2),O=g[0],N=g[1],y=Object(r.useState)(10),C=Object(n.a)(y,2),S=C[0],j=C[1],k=Object(r.useState)(0),_=Object(n.a)(k,2),x=_[0],z=_[1],w=Object(Q.g)(),D=Object(Z.d)(),R=Object(r.useCallback)((function(e,a,t,n){return D(Object($e.R)(e,a,t,n))}),[D]),I=function(){Ze.b.post("/admin/node/list",{page:O,page_size:S,order_by:"id desc"}).then((function(e){i(e.data.items),z(e.data.total),d(e.data.active)})).catch((function(e){R("top","right",e.message,"error")}))};Object(r.useEffect)((function(){I()}),[O,S]);return l.a.createElement("div",null,l.a.createElement("div",{className:e.header},l.a.createElement(ve.a,{color:"primary",onClick:function(){return w.push("/admin/node/add")},variant:"contained"},"\u63a5\u5165\u65b0\u8282\u70b9"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(ve.a,{color:"primary",onClick:function(){return I()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(ze.a,{square:!0,className:e.tableContainer},l.a.createElement(Ua.a,{className:e.container},l.a.createElement(Sa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(_a.a,null,l.a.createElement(xa.a,{style:{height:52}},Bn.map((function(e){return l.a.createElement(ka.a,{key:e.id,align:e.align,style:{minWidth:e.minWidthclassNames}},e.label)})))),l.a.createElement(ja.a,null,c.map((function(a){return l.a.createElement(xa.a,{hover:!0,key:a.ID},l.a.createElement(ka.a,null,a.ID),l.a.createElement(ka.a,{className:An()(Object(s.a)({},e.disabledCell,1===a.Status))},a.Name,function(a){if(1===a)return l.a.createElement(he.a,{className:e.disabledBadge,size:"small",label:"\u672a\u542f\u7528"})}(a.Status)),l.a.createElement(ka.a,null,u[a.ID]?l.a.createElement(qn.a,{color:"success.main",fontSize:"small"},l.a.createElement(In.a,{className:e.verticalAlign,fontSize:"small"})," ",l.a.createElement("span",{className:e.verticalAlign},"\u5728\u7ebf")):l.a.createElement(qn.a,{color:"error.main",fontSize:"small"},l.a.createElement(Fn.a,{className:e.verticalAlign,fontSize:"small"})," ",l.a.createElement("span",{className:e.verticalAlign},"\u79bb\u7ebf"))),l.a.createElement(ka.a,null,(t=a,Mn.map((function(a){if(t[a.field])return l.a.createElement(he.a,{className:e.disabledBadge,size:"small",color:"primary",label:a.name})})))),l.a.createElement(ka.a,{align:"right"},l.a.createElement(Ha.a,{title:1===a.Status?"\u542f\u7528\u8282\u70b9":"\u6682\u505c\u4f7f\u7528\u8282\u70b9"},l.a.createElement(f.a,{disabled:b,onClick:function(){return e=a.ID,t=1-a.Status,v(!0),void Ze.b.patch("/admin/node/enable/"+e+"/"+t).then((function(e){I(),R("top","right","\u8282\u70b9\u5df2"+(1===t?"\u6682\u505c\u4f7f\u7528":"\u542f\u7528"),"success")})).catch((function(e){R("top","right",e.message,"error")})).then((function(){v(!1)}));var e,t},size:"small"},1===a.Status&&l.a.createElement(Wn.a,null),1!==a.Status&&l.a.createElement(Pn.a,null))),l.a.createElement(Ha.a,{title:"\u7f16\u8f91"},l.a.createElement(f.a,{disabled:b,onClick:function(){return w.push("/admin/node/edit/"+a.ID)},size:"small"},l.a.createElement(Ga.a,null))),l.a.createElement(Ha.a,{title:"\u5220\u9664"},l.a.createElement(f.a,{onClick:function(){return e=a.ID,v(!0),void Ze.b.delete("/admin/node/"+e).then((function(){I(),R("top","right","\u8282\u70b9\u5df2\u5220\u9664","success")})).catch((function(e){R("top","right",e.message,"error")})).then((function(){v(!1)}));var e},disabled:b,size:"small"},l.a.createElement(za.a,null)))));var t}))))),l.a.createElement(Ka.a,{rowsPerPageOptions:[10,25,100],component:"div",count:x,rowsPerPage:S,page:O-1,onChangePage:function(e,a){return N(a+1)},onChangeRowsPerPage:function(e){j(e.target.value),N(1)}})))}var Kn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"},pre:{margin:"24px 0",padding:"12px 18px",overflow:"auto",direction:"ltr",borderRadius:"4px",backgroundColor:"#272c34",color:"#fff",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace'}}}}));function Hn(e){var a=Kn(),t=Object(Z.d)(),c=Object(r.useState)(!1),i=Object(n.a)(c,2),o=i[0],m=i[1],s=Object(r.useCallback)((function(e,a,n,r){return t(Object($e.R)(e,a,n,r))}),[t]);return l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),e.onSubmit(a)}},l.a.createElement(wa.a,{severity:"info",style:{marginBottom:10}},"\u60a8\u53ef\u4ee5\u6dfb\u52a0\u540c\u6837\u8fd0\u884c\u4e86 Cloudreve \u7684\u670d\u52a1\u5668\u4f5c\u4e3a\u4ece\u673a\u7aef\uff0c \u6b63\u5e38\u8fd0\u884c\u5de5\u4f5c\u7684\u4ece\u673a\u7aef\u53ef\u4ee5\u4e3a\u4e3b\u673a\u5206\u62c5\u67d0\u4e9b\u5f02\u6b65\u4efb\u52a1\uff08\u5982\u79bb\u7ebf\u4e0b\u8f7d\uff09\u3002 \u8bf7\u53c2\u8003\u4e0b\u9762\u5411\u5bfc\u90e8\u7f72\u5e76\u914d\u7f6e\u8fde\u63a5 Cloudreve \u4ece\u673a\u8282\u70b9\u3002",l.a.createElement(qn.a,{fontWeight:"fontWeightBold"},"\u5982\u679c\u4f60\u5df2\u7ecf\u5728\u76ee\u6807\u670d\u52a1\u5668\u4e0a\u90e8\u7f72\u4e86\u4ece\u673a\u5b58\u50a8\u7b56\u7565\uff0c\u60a8\u53ef\u4ee5\u8df3\u8fc7\u672c\u9875\u9762\u7684\u67d0\u4e9b\u6b65\u9aa4\uff0c \u53ea\u5c06\u4ece\u673a\u5bc6\u94a5\u3001\u670d\u52a1\u5668\u5730\u5740\u5728\u8fd9\u91cc\u586b\u5199\u5e76\u4fdd\u6301\u4e0e\u4ece\u673a\u5b58\u50a8\u7b56\u7565\u4e2d\u4e00\u81f4\u5373\u53ef\u3002"),"\u5728\u540e\u7eed\u7248\u672c\u4e2d\uff0c\u4ece\u673a\u5b58\u50a8\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u5408\u5e76\u5230\u8fd9\u91cc\u3002"),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5c06\u548c\u4e3b\u7ad9\u76f8\u540c\u7248\u672c\u7684 Cloudreve \u7a0b\u5e8f\u62f7\u8d1d\u81f3\u8981\u4f5c\u4e3a\u4ece\u673a\u7684\u670d\u52a1\u5668\u4e0a\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e0b\u65b9\u4e3a\u7cfb\u7edf\u4e3a\u60a8\u968f\u673a\u751f\u6210\u7684\u4ece\u673a\u7aef\u5bc6\u94a5\uff0c\u4e00\u822c\u65e0\u9700\u6539\u52a8\uff0c\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u9700\u6c42\uff0c \u53ef\u5c06\u60a8\u7684\u5bc6\u94a5\u586b\u5165\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u4ece\u673a\u5bc6\u94a5"),l.a.createElement(ra.a,{required:!0,inputProps:{minlength:64},value:e.node.SlaveKey,onChange:e.handleTextChange("SlaveKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4fee\u6539\u4ece\u673a\u914d\u7f6e\u6587\u4ef6\u3002",l.a.createElement("br",null),"\u5728\u4ece\u673a\u7aef Cloudreve \u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u65b0\u5efa",l.a.createElement("code",null,"conf.ini"),"\u6587\u4ef6\uff0c\u586b\u5165\u4ece\u673a\u914d\u7f6e\uff0c\u542f\u52a8/\u91cd\u542f\u4ece\u673a\u7aef Cloudreve\u3002 \u4ee5\u4e0b\u4e3a\u4e00\u4e2a\u53ef\u4f9b\u53c2\u8003\u7684\u914d\u7f6e\u4f8b\u5b50\uff0c\u5176\u4e2d\u5bc6\u94a5\u90e8\u5206\u5df2\u5e2e\u60a8\u586b\u5199\u4e3a\u4e0a\u4e00\u6b65\u6240\u751f\u6210\u7684\u3002"),l.a.createElement("pre",null,"[System]",l.a.createElement("br",null),"Mode = slave",l.a.createElement("br",null),"Listen = :5212",l.a.createElement("br",null),l.a.createElement("br",null),"[Slave]",l.a.createElement("br",null),"Secret = ",e.node.SlaveKey,l.a.createElement("br",null),l.a.createElement("br",null),"; \u4ee5\u4e0b\u4e3a\u53ef\u9009\u7684\u8bbe\u7f6e\uff0c\u5bf9\u5e94\u4e3b\u673a\u8282\u70b9\u7684\u76f8\u5173\u53c2\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u5e94\u7528\u5230\u4ece\u673a\u8282\u70b9\uff0c\u8bf7\u6839\u636e",l.a.createElement("br",null),"; \u5b9e\u9645\u60c5\u51b5\u8c03\u6574\u3002\u66f4\u6539\u4e0b\u9762\u8bbe\u7f6e\u9700\u8981\u91cd\u542f\u4ece\u673a\u8282\u70b9\u540e\u751f\u6548\u3002",l.a.createElement("br",null),"[OptionOverwrite]",l.a.createElement("br",null),"; \u4efb\u52a1\u961f\u5217\u6700\u591a\u5e76\u884c\u6267\u884c\u7684\u4efb\u52a1\u6570",l.a.createElement("br",null),"max_worker_num = 50",l.a.createElement("br",null),"; \u4efb\u52a1\u961f\u5217\u4e2d\u8f6c\u4efb\u52a1\u4f20\u8f93\u65f6\uff0c\u6700\u5927\u5e76\u884c\u534f\u7a0b\u6570",l.a.createElement("br",null),"max_parallel_transfer = 10",l.a.createElement("br",null),"; \u4e2d\u8f6c\u5206\u7247\u4e0a\u4f20\u5931\u8d25\u540e\u91cd\u8bd5\u7684\u6700\u5927\u6b21\u6570",l.a.createElement("br",null),"chunk_retries = 10"),l.a.createElement(k.a,{variant:"body2"},"\u4ece\u673a\u7aef\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u5927\u81f4\u4e0e\u4e3b\u7ad9\u7aef\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\uff1a",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"System"),"\u5206\u533a\u4e0b\u7684",l.a.createElement("code",null,"mode"),"\u5b57\u6bb5\u5fc5\u987b\u66f4\u6539\u4e3a",l.a.createElement("code",null,"slave")),l.a.createElement("li",null,"\u5fc5\u987b\u6307\u5b9a",l.a.createElement("code",null,"Slave"),"\u5206\u533a\u4e0b\u7684",l.a.createElement("code",null,"Secret"),"\u5b57\u6bb5\uff0c\u5176\u503c\u4e3a\u7b2c\u4e8c\u6b65\u91cc\u586b\u5199\u6216\u751f\u6210\u7684\u5bc6\u94a5\u3002")),"\u4e00\u4e2a\u4ece\u673a Cloudreve \u5b9e\u4f8b\u53ef\u4ee5\u5bf9\u63a5\u591a\u4e2a Cloudreve \u4e3b\u8282\u70b9\uff0c\u53ea\u9700\u5728\u6240\u6709\u4e3b\u8282\u70b9\u4e2d\u6dfb\u52a0\u6b64\u4ece\u673a\u8282\u70b9\u5e76\u4fdd\u6301\u5bc6\u94a5\u4e00\u81f4\u5373\u53ef\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u586b\u5199\u4ece\u673a\u5730\u5740\u3002",l.a.createElement("br",null),"\u5982\u679c\u4e3b\u7ad9\u542f\u7528\u4e86 HTTPS\uff0c\u4ece\u673a\u4e5f\u9700\u8981\u542f\u7528\uff0c\u5e76\u5728\u4e0b\u65b9\u586b\u5165 HTTPS \u534f\u8bae\u7684\u5730\u5740\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u4ece\u673a\u5730\u5740"),l.a.createElement(ra.a,{fullWidth:!0,required:!0,type:"url",value:e.node.Server,onChange:e.handleTextChange("Server")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4e0b\u65b9\u7684\u6d4b\u8bd5\u6309\u94ae\u6d4b\u8bd5\u901a\u4fe1\u662f\u5426\u6b63\u5e38\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:o,variant:"outlined",onClick:function(){return m(!0),void Ze.b.post("/admin/policy/test/slave",{server:e.node.Server,secret:e.node.SlaveKey}).then((function(){s("top","right","\u901a\u4fe1\u6b63\u5e38","success")})).catch((function(e){s("top","right",e.message,"error")})).then((function(){m(!1)}))},color:"primary"},"\u6d4b\u8bd5\u4ece\u673a\u901a\u4fe1")))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:o||e.loading,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65")))}var Gn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"},pre:{margin:"24px 0",padding:"12px 18px",overflow:"auto",direction:"ltr",borderRadius:"4px",backgroundColor:"#272c34",color:"#fff",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace'}}}}));function Vn(e){var a=Gn(),t=Object(Z.d)(),c=Object(r.useState)(!1),i=Object(n.a)(c,2),o=i[0],m=i[1],s=Object(r.useCallback)((function(e,a,n,r){return t(Object($e.R)(e,a,n,r))}),[t]),u=0===e.node.Type?"\u4ece\u673a":"\u4e3b\u673a";return l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),e.onSubmit(a)}},l.a.createElement(wa.a,{severity:"info",style:{marginBottom:10}},l.a.createElement(k.a,{variant:"body2"},"Cloudreve \u7684\u79bb\u7ebf\u4e0b\u8f7d\u529f\u80fd\u7531"," ",l.a.createElement(Ca.a,{href:"https://aria2.github.io/",target:"_blank"},"Aria2")," ","\u9a71\u52a8\u3002\u5982\u9700\u4f7f\u7528\uff0c\u8bf7\u5728\u76ee\u6807\u8282\u70b9\u670d\u52a1\u5668\u4e0a\u4ee5\u548c\u8fd0\u884c Cloudreve \u76f8\u540c\u7684\u7528\u6237\u8eab\u4efd\u542f\u52a8 Aria2\uff0c \u5e76\u5728 Aria2 \u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542f RPC \u670d\u52a1\uff0c",l.a.createElement(qn.a,{component:"span",fontWeight:"fontWeightBold"},"Aria2 \u9700\u8981\u548c",u," Cloudreve \u8fdb\u7a0b\u5171\u7528\u76f8\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\u3002")," ","\u66f4\u591a\u4fe1\u606f\u53ca\u6307\u5f15\u8bf7\u53c2\u8003\u6587\u6863\u7684"," ",l.a.createElement(Ca.a,{href:"https://docs.cloudreve.org/use/aria2",target:"_blank"},"\u79bb\u7ebf\u4e0b\u8f7d")," ","\u7ae0\u8282\u3002")),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},0===e.node.Type?"\u662f\u5426\u9700\u8981\u6b64\u8282\u70b9\u63a5\u7ba1\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1\uff1f":"\u662f\u5426\u9700\u8981\u4e3b\u673a\u63a5\u7ba1\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1\uff1f",l.a.createElement("br",null),0===e.node.Type?"\u5f00\u542f\u540e\uff0c\u7528\u6237\u7684\u79bb\u7ebf\u4e0b\u8f7d\u8bf7\u6c42\u53ef\u4ee5\u88ab\u5206\u6d41\u5230\u6b64\u8282\u70b9\u5904\u7406\u3002":"\u5f00\u542f\u540e\uff0c\u7528\u6237\u7684\u79bb\u7ebf\u4e0b\u8f7d\u8bf7\u6c42\u53ef\u4ee5\u88ab\u5206\u6d41\u5230\u4e3b\u673a\u5904\u7406\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{required:!0,component:"fieldset"},l.a.createElement(it.a,{required:!0,value:e.node.Aria2Enabled,onChange:e.handleTextChange("Aria2Enabled"),row:!0},l.a.createElement(ua.a,{value:"true",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u542f\u7528"}),l.a.createElement(ua.a,{value:"false",control:l.a.createElement(ct.a,{color:"primary"}),label:"\u5173\u95ed"})))))),l.a.createElement(lt.a,{in:"true"===e.node.Aria2Enabled},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},0===e.node.Type?" \u5728\u76ee\u6807\u8282\u70b9\u670d\u52a1\u5668\u4e0a\u4e0e\u8282\u70b9 ":"\u5728\u4e0e ","Cloudreve \u8fdb\u7a0b\u76f8\u540c\u7684\u6587\u4ef6\u7cfb\u7edf\u73af\u5883\u4e0b\u542f\u52a8 Aria2 \u8fdb\u7a0b\u3002\u5728\u542f\u52a8 Aria2 \u65f6\uff0c\u9700\u8981\u5728\u5176\u914d\u7f6e\u6587\u4ef6\u4e2d\u542f\u7528 RPC \u670d\u52a1\uff0c\u5e76\u8bbe\u5b9a RPC Secret\uff0c\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528\u3002\u4ee5\u4e0b\u4e3a\u4e00\u4e2a\u4f9b\u53c2\u8003\u7684\u914d\u7f6e\uff1a"),l.a.createElement("pre",null,"# \u542f\u7528 RPC \u670d\u52a1",l.a.createElement("br",null),"enable-rpc=true",l.a.createElement("br",null),"# RPC \u76d1\u542c\u7aef\u53e3",l.a.createElement("br",null),"rpc-listen-port=6800",l.a.createElement("br",null),"# RPC \u6388\u6743\u4ee4\u724c\uff0c\u53ef\u81ea\u884c\u8bbe\u5b9a",l.a.createElement("br",null),"rpc-secret=",e.node.Aria2OptionsSerialized.token,l.a.createElement("br",null)),l.a.createElement(wa.a,{severity:"info",style:{marginBottom:10}},l.a.createElement(k.a,{variant:"body2"},"\u63a8\u8350\u5728\u65e5\u5e38\u542f\u52a8\u6d41\u7a0b\u4e2d\uff0c\u5148\u542f\u52a8 Aria2\uff0c\u518d\u542f\u52a8\u8282\u70b9 Cloudreve\uff0c\u8fd9\u6837\u8282\u70b9 Cloudreve \u53ef\u4ee5\u5411 Aria2 \u8ba2\u9605\u4e8b\u4ef6\u901a\u77e5\uff0c\u4e0b\u8f7d\u72b6\u6001\u53d8\u66f4\u5904\u7406\u66f4\u53ca\u65f6\u3002\u5f53\u7136\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e00\u6d41\u7a0b\uff0c\u8282\u70b9 Cloudreve \u4e5f\u4f1a\u901a\u8fc7\u8f6e\u8be2\u8ffd\u8e2a\u4efb\u52a1\u72b6\u6001\u3002")))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199",u," Cloudreve \u4e0e Aria2 \u901a\u4fe1\u7684 RPC \u670d\u52a1\u5730\u5740\u3002\u4e00\u822c\u53ef\u586b\u5199\u4e3a",l.a.createElement("code",null,"http://127.0.0.1:6800/"),",\u5176\u4e2d\u7aef\u53e3\u53f7",l.a.createElement("code",null,"6800"),"\u4e0e\u4e0a\u6587\u914d\u7f6e\u6587\u4ef6\u4e2d",l.a.createElement("code",null,"rpc-listen-port"),"\u4fdd\u6301\u4e00\u81f4\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"RPC \u670d\u52a1\u5668\u5730\u5740"),l.a.createElement(ra.a,{required:!0,type:"url",value:e.node.Aria2OptionsSerialized.server,onChange:e.handleOptionChange("server")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u5305\u542b\u7aef\u53e3\u7684\u5b8c\u6574 RPC \u670d\u52a1\u5668\u5730\u5740\uff0c\u4f8b\u5982\uff1ahttp://127.0.0.1:6800/\uff0c\u7559\u7a7a\u8868\u793a\u4e0d\u542f\u7528 Aria2 \u670d\u52a1"))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"RPC \u6388\u6743\u4ee4\u724c\uff0c\u4e0e Aria2 \u914d\u7f6e\u6587\u4ef6\u4e2d",l.a.createElement("code",null,"rpc-secret"),"\u4fdd\u6301\u4e00\u81f4\uff0c\u672a\u8bbe\u7f6e\u8bf7\u7559\u7a7a\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ra.a,{value:e.node.Aria2OptionsSerialized.token,onChange:e.handleOptionChange("token")})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199 Aria2 \u7528\u4f5c\u4e34\u65f6\u4e0b\u8f7d\u76ee\u5f55\u7684 \u8282\u70b9\u4e0a\u7684",l.a.createElement("strong",null,"\u7edd\u5bf9\u8def\u5f84"),"\uff0c\u8282\u70b9\u4e0a\u7684 Cloudreve \u8fdb\u7a0b\u9700\u8981\u6b64\u76ee\u5f55\u7684\u8bfb\u3001\u5199\u3001\u6267\u884c\u6743\u9650\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ra.a,{value:e.node.Aria2OptionsSerialized.temp_path,onChange:e.handleOptionChange("temp_path")})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u6309\u9700\u8981\u586b\u5199\u4e00\u4e9b Aria2 \u989d\u5916\u53c2\u6570\u4fe1\u606f\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u72b6\u6001\u5237\u65b0\u95f4\u9694 (\u79d2)"),l.a.createElement(ra.a,{type:"number",inputProps:{step:1,min:1},required:!0,value:e.node.Aria2OptionsSerialized.interval,onChange:e.handleOptionChange("interval")}),l.a.createElement(na.a,{id:"component-helper-text"},"Cloudreve \u5411 Aria2 \u8bf7\u6c42\u5237\u65b0\u4efb\u52a1\u72b6\u6001\u7684\u95f4\u9694\u3002"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"RPC \u8c03\u7528\u8d85\u65f6 (\u79d2)"),l.a.createElement(ra.a,{type:"number",inputProps:{step:1,min:1},required:!0,value:e.node.Aria2OptionsSerialized.timeout,onChange:e.handleOptionChange("timeout")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u8c03\u7528 RPC \u670d\u52a1\u65f6\u6700\u957f\u7b49\u5f85\u65f6\u95f4"))),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u5168\u5c40\u4efb\u52a1\u53c2\u6570"),l.a.createElement(ra.a,{multiline:!0,required:!0,value:e.node.Aria2OptionsSerialized.options,onChange:e.handleOptionChange("options")}),l.a.createElement(na.a,{id:"component-helper-text"},"\u521b\u5efa\u4e0b\u8f7d\u4efb\u52a1\u65f6\u643a\u5e26\u7684\u989d\u5916\u8bbe\u7f6e\u53c2\u6570\uff0c\u4ee5 JSON \u7f16\u7801\u540e\u7684\u683c\u5f0f\u4e66\u5199\uff0c\u60a8\u53ef\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u5199\u5728 Aria2 \u914d\u7f6e\u6587\u4ef6\u91cc\uff0c\u53ef\u7528\u53c2\u6570\u8bf7\u67e5\u9605\u5b98\u65b9\u6587\u6863"))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4e0b\u65b9\u7684\u6d4b\u8bd5\u6309\u94ae\u6d4b\u8bd5",u,"Cloudreve \u5411 Aria2 \u901a\u4fe1\u662f\u5426\u6b63\u5e38\u3002",0===e.node.Type&&"\u5728\u8fdb\u884c\u6d4b\u8bd5\u524d\u8bf7\u5148\u786e\u4fdd\u60a8\u5df2\u8fdb\u884c\u5e76\u901a\u8fc7\u4e0a\u4e00\u9875\u9762\u4e2d\u7684\u201c\u4ece\u673a\u901a\u4fe1\u6d4b\u8bd5\u201d\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(ve.a,{disabled:o,variant:"outlined",onClick:function(){return m(!0),void Ze.b.post("/admin/node/aria2/test",{type:e.node.Type,server:e.node.Server,secret:e.node.SlaveKey,rpc:e.node.Aria2OptionsSerialized.server,token:e.node.Aria2OptionsSerialized.token}).then((function(e){s("top","right","\u8fde\u63a5\u6210\u529f\uff0cAria2 \u7248\u672c\u4e3a\uff1a"+e.data,"success")})).catch((function(e){s("top","right",e.message,"error")})).then((function(){m(!1)}))},color:"primary"},"\u6d4b\u8bd5 Aria2 \u901a\u4fe1"))))),l.a.createElement("div",{className:a.stepFooter},0!==e.activeStep&&l.a.createElement(ve.a,{color:"default",className:a.button,onClick:e.onBack},"\u4e0a\u4e00\u6b65"),l.a.createElement(ve.a,{disabled:o||e.loading,type:"submit",variant:"contained",color:"primary",onClick:e.onSubmit},"\u4e0b\u4e00\u6b65")))}var Jn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"},pre:{margin:"24px 0",padding:"12px 18px",overflow:"auto",direction:"ltr",borderRadius:"4px",backgroundColor:"#272c34",color:"#fff",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace'}}}}));function Xn(e){var a=Jn(),t=Object(Z.d)(),c=Object(r.useState)(!1),i=Object(n.a)(c,2),o=i[0];i[1],Object(r.useCallback)((function(e,a,n,r){return t(Object($e.R)(e,a,n,r))}),[t]);return l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),e.onSubmit(a)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e3a\u6b64\u8282\u70b9\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(ra.a,{required:!0,value:e.node.Name,onChange:e.handleTextChange("Name")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(k.a,{variant:"body2"},"\u4e3a\u6b64\u8282\u70b9\u6307\u5b9a\u8d1f\u8f7d\u5747\u8861\u6743\u91cd\uff0c\u6570\u503c\u4e3a\u6574\u6570\u3002\u67d0\u4e9b\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\u4f1a\u6839\u636e\u6b64\u6570\u503c\u52a0\u6743\u9009\u62e9\u8282\u70b9"),l.a.createElement("div",{className:a.form},l.a.createElement(ta.a,{fullWidth:!0},l.a.createElement(la.a,{htmlFor:"component-helper"},"\u8d1f\u8f7d\u5747\u8861\u6743\u91cd"),l.a.createElement(ra.a,{type:"number",required:!0,inputProps:{step:1,min:0},value:e.node.Rank,onChange:e.handleTextChange("Rank")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{disabled:o||e.loading,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65")))}var Yn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(s.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(C.i)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"},pre:{margin:"24px 0",padding:"12px 18px",overflow:"auto",direction:"ltr",borderRadius:"4px",backgroundColor:"#272c34",color:"#fff",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace'}}}}));function $n(e){var a=Yn(),t=Object(Q.g)();return l.a.createElement("form",{className:a.stepContent},l.a.createElement(k.a,null,"\u8282\u70b9\u5df2\u4fdd\u5b58\uff01"),l.a.createElement(k.a,{variant:"body2",color:"textSecondary"},"\u5982\u679c\u60a8\u6dfb\u52a0\u4e86\u65b0\u8282\u70b9\uff0c\u8fd8\u9700\u8981\u5728\u8282\u70b9\u5217\u8868\u624b\u52a8\u542f\u52a8\u8282\u70b9\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u3002"),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(ve.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/node")}},"\u8fd4\u56de\u8282\u70b9\u5217\u8868")))}var Zn=[{slaveOnly:!0,title:"\u901a\u4fe1\u914d\u7f6e",optional:!1,component:function(e){return l.a.createElement(Hn,e)}},{slaveOnly:!1,title:"\u79bb\u7ebf\u4e0b\u8f7d",optional:!1,component:function(e){return l.a.createElement(Vn,e)}},{slaveOnly:!1,title:"\u6742\u9879\u4fe1\u606f",optional:!1,component:function(e){return l.a.createElement(Xn,e)}},{slaveOnly:!1,title:"\u5b8c\u6210",optional:!1,component:function(e){return l.a.createElement($n,e)}}];function Qn(e){var a=Object(r.useState)(0),t=Object(n.a)(a,2),c=t[0],i=t[1],o=l.a.useState(new Set),u=Object(n.a)(o,2),d=u[0],p=(u[1],Object(r.useState)(!1)),E=Object(n.a)(p,2),b=E[0],v=E[1],h=Object(r.useState)(e.node?e.node:{Status:1,Type:0,Aria2Enabled:"false",Server:"https://example.com:5212",SlaveKey:Object(Ja.n)(64),MasterKey:Object(Ja.n)(64),Rank:"0",Aria2OptionsSerialized:{token:Object(Ja.n)(32),options:"{}",interval:"10",timeout:"10"}}),f=Object(n.a)(h,2),g=f[0],O=f[1],N=Object(r.useMemo)((function(){return Zn.filter((function(e){return!(e.slaveOnly&&1===g.Type)}))}),[g.Type]),y=Object(Z.d)(),C=Object(r.useCallback)((function(e,a,t,n){return y(Object($e.R)(e,a,t,n))}),[y]);return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"h6"},e.node?"\u4fee\u6539":"\u6dfb\u52a0"," \u8282\u70b9"),l.a.createElement(st.a,{activeStep:c},N.map((function(e,a){var t,n={},r={};if(e.optional&&(r.optional=l.a.createElement(k.a,{variant:"caption"},"\u53ef\u9009")),t=a,d.has(t)&&(n.completed=!1),!e.slaveOnly||1!==g.Type)return l.a.createElement(ot.a,Object.assign({key:e.title},n),l.a.createElement(mt.a,r,e.title))}))),N[c].component({onSubmit:function(a){return function(){if(e.node||c+1===Zn.length-1){v(!0);var a=Object(m.a)({},g);a.Aria2OptionsSerialized=Object(m.a)({},g.Aria2OptionsSerialized),a.Rank=parseInt(a.Rank),a.Aria2OptionsSerialized.interval=parseInt(a.Aria2OptionsSerialized.interval),a.Aria2OptionsSerialized.timeout=parseInt(a.Aria2OptionsSerialized.timeout),a.Aria2Enabled="true"===a.Aria2Enabled,Ze.b.post("/admin/node",{node:a}).then((function(){C("top","right","\u8282\u70b9\u5df2"+(e.node?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),i(c+1),v(!1)})).catch((function(e){C("top","right",e.message,"error")})).then((function(){v(!1)}))}else i(c+1)}()},node:g,loading:b,onBack:function(e){return i(c-1)},handleTextChange:function(e){return function(a){O(Object(m.a)(Object(m.a)({},g),{},Object(s.a)({},e,a.target.value)))}},activeStep:c,handleOptionChange:function(e){return function(a){O(Object(m.a)(Object(m.a)({},g),{},{Aria2OptionsSerialized:Object(m.a)(Object(m.a)({},g.Aria2OptionsSerialized),{},Object(s.a)({},e,a.target.value))}))}}}))}var er=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)}}}));function ar(){var e=er();return l.a.createElement("div",null,l.a.createElement(ze.a,{square:!0,className:e.content},l.a.createElement(Qn,null)))}var tr=Object(c.a)((function(e){var a;return{root:(a={},Object(s.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(s.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)}}}));function nr(){var e=tr(),a=Object(Q.i)().id,t=Object(r.useState)(null),c=Object(n.a)(t,2),i=c[0],o=c[1],m=Object(Z.d)(),s=Object(r.useCallback)((function(e,a,t,n){return m(Object($e.R)(e,a,t,n))}),[m]);return Object(r.useEffect)((function(){Ze.b.get("/admin/node/"+a).then((function(e){e.data.Rank=e.data.Rank.toString(),e.data.Aria2OptionsSerialized.interval=e.data.Aria2OptionsSerialized.interval.toString(),e.data.Aria2OptionsSerialized.timeout=e.data.Aria2OptionsSerialized.timeout.toString(),e.data.Aria2Enabled=e.data.Aria2Enabled?"true":"false",o(e.data)})).catch((function(e){s("top","right",e.message,"error")}))}),[a]),l.a.createElement("div",null,l.a.createElement(ze.a,{square:!0,className:e.content},i&&l.a.createElement(Qn,{node:i})))}t.d(a,"default",(function(){return cr}));var rr=Object(c.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:0,minWidth:0},toolbar:e.mixins.toolbar}})),lr=pe()({palette:{background:{}},overrides:{MuiButton:{root:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}},Ee.zhCN);function cr(){var e=rr(),a=Object(Q.g)(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),m=c[0],s=c[1];return Object(r.useEffect)((function(){var e=se.a.GetUser();if(e&&e.group)return 1!==e.group.id?void a.push("/home"):void s(!0);a.push("/login")}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ue.a,{theme:lr},l.a.createElement("div",{className:e.root},l.a.createElement(i.a,null),l.a.createElement(o.a,null),m&&l.a.createElement(me,{content:function(e){return l.a.createElement(Q.d,null,l.a.createElement(Q.b,{path:"".concat(e,"/home"),exact:!0},l.a.createElement(aa,null)),l.a.createElement(Q.b,{path:"".concat(e,"/basic")},l.a.createElement(ma,null)),l.a.createElement(Q.b,{path:"".concat(e,"/access")},l.a.createElement(ba,null)),l.a.createElement(Q.b,{path:"".concat(e,"/mail")},l.a.createElement(fa,null)),l.a.createElement(Q.b,{path:"".concat(e,"/upload")},l.a.createElement(ya,null)),l.a.createElement(Q.b,{path:"".concat(e,"/theme")},l.a.createElement(qa,null)),l.a.createElement(Q.b,{path:"".concat(e,"/image")},l.a.createElement(Ba,null)),l.a.createElement(Q.b,{path:"".concat(e,"/captcha")},l.a.createElement(Rn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/policy"),exact:!0},l.a.createElement(rt,null)),l.a.createElement(Q.b,{path:"".concat(e,"/policy/add/:type"),exact:!0},l.a.createElement(Bt,null)),l.a.createElement(Q.b,{path:"".concat(e,"/policy/edit/:mode/:id"),exact:!0},l.a.createElement(Kt,null)),l.a.createElement(Q.b,{path:"".concat(e,"/group"),exact:!0},l.a.createElement(Vt,null)),l.a.createElement(Q.b,{path:"".concat(e,"/group/add"),exact:!0},l.a.createElement(Xt,null)),l.a.createElement(Q.b,{path:"".concat(e,"/group/edit/:id"),exact:!0},l.a.createElement(Yt,null)),l.a.createElement(Q.b,{path:"".concat(e,"/user"),exact:!0},l.a.createElement(rn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/user/add"),exact:!0},l.a.createElement(cn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/user/edit/:id"),exact:!0},l.a.createElement(on,null)),l.a.createElement(Q.b,{path:"".concat(e,"/file"),exact:!0},l.a.createElement(pn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/file/import"),exact:!0},l.a.createElement(wn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/share"),exact:!0},l.a.createElement(vn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/download"),exact:!0},l.a.createElement(Cn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/task"),exact:!0},l.a.createElement(jn,null)),l.a.createElement(Q.b,{path:"".concat(e,"/node"),exact:!0},l.a.createElement(Un,null)),l.a.createElement(Q.b,{path:"".concat(e,"/node/add"),exact:!0},l.a.createElement(ar,null)),l.a.createElement(Q.b,{path:"".concat(e,"/node/edit/:id"),exact:!0},l.a.createElement(nr,null)))}}))))}}}]);
//# sourceMappingURL=11.3f4ba400.chunk.js.map